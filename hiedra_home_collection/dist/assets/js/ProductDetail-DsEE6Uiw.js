import{e,u as s,a as i,r as a,d as t,j as r,L as l}from"./react-vendor-2SZXphvN.js";import{u as n,a as c}from"./context-2p1VoVIE.js";import{L as o}from"./LazyImage-oGJM51qZ.js";import{S as d}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";import"./index-Dai0eSSf.js";const m="http://localhost:8080/api",h=()=>{const{id:h}=e();s();const{refreshCart:p}=n(),{accessToken:u}=c(),x=i(),g=a.useRef(null),j=a.useRef(null),v=a.useRef(null),y=a.useRef(null),[f,N]=a.useState(1),[w,k]=a.useState(null),[b,F]=a.useState(!0),[S,C]=a.useState(!1),[T,E]=a.useState(""),[M,B]=a.useState(!1),[P,z]=a.useState(""),[R,D]=a.useState(""),[$,A]=a.useState("1x1"),[I,W]=a.useState(0),[L,O]=a.useState(!1),[V,U]=a.useState(!1),[Y,G]=a.useState(!0),[q,H]=a.useState([]),[K,_]=a.useState({en:"",boy:""}),[J]=a.useState(0),[X,Q]=a.useState([]),[Z,ee]=a.useState(null),[se,ie]=a.useState({page:0,size:6,hasNext:!0,totalElements:0,totalPages:0}),[ae,te]=a.useState(!1),[re,le]=a.useState("LATEST"),[ne,ce]=a.useState(!1),[oe,de]=a.useState(""),[me,he]=a.useState(!1),[pe,ue]=a.useState(null),[xe,ge]=a.useState(null),[je,ve]=a.useState(!1),ye=a.useMemo(()=>{if(!w)return[];const e=[];return w.image&&e.push(w.image),Array.isArray(w.detailImages)&&w.detailImages.filter(Boolean).forEach(s=>e.push(s)),e.filter(Boolean).filter((e,s,i)=>i.indexOf(e)===s)},[w]),fe=ye[J]||ye[0]||w?.image||"/images/perde1kapak.jpg",Ne=ye.length>1?ye[1]:null,we=a.useCallback((e,s)=>{e&&"function"==typeof e.stopPropagation&&e.stopPropagation();const i=y.current,a=v.current;if("undefined"==typeof window)ge(null);else if(i&&a){const e=i.getBoundingClientRect(),s=a.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop||0,r=window.pageXOffset||document.documentElement.scrollLeft||0,l=s.top+t,n=s.left+r;ge({top:e.top+t-l+.075*e.height,left:e.left+r-n+.075*e.width,width:.85*e.width,height:.85*e.height})}else ge(null);ue(s||Ne||fe),he(!0),ve(!0)},[fe,Ne]),ke=a.useCallback(()=>{he(!1),ue(null),ge(null),ve(!1)},[]),be=[{value:"1x1",label:"Pilesiz (1x1)"},{value:"1x2",label:"1x2"},{value:"1x3",label:"1x3"}],Fe=e=>{if(!e)return null;const s=e.trim();return s.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(s)?s:{beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF","yeşil":"#008000",green:"#008000","kırmızı":"#FF0000",red:"#FF0000","sarı":"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"}[s.toLowerCase()]||s};a.useEffect(()=>{(async()=>{if(h)try{F(!0),k(null);const e="string"==typeof h?parseInt(h,10):h;if(isNaN(e))return void F(!1);const s=await fetch(`${m}/products/${e}`);if(s.ok){const i=await s.json();if(i.isSuccess||i.success){const s=i.data||i,a="number"==typeof s.price?s.price:parseFloat(s.price)||0;k({...s,id:s.id||e,name:s.name||"Ürün",price:a,image:s.coverImageUrl||s.image||"/images/perde1kapak.jpg",detailImages:s.detailImageUrl?Array.isArray(s.detailImageUrl)?s.detailImageUrl:[s.detailImageUrl]:[],inStock:(s.quantity||0)>0,category:s.category?.name||s.category||"Genel",mountingType:s.mountingType||"",material:s.material||"",lightTransmittance:s.lightTransmittance||"",pieceCount:s.pieceCount||null,usageArea:s.usageArea||"",color:s.color||"",reviewCount:s.reviewCount||0,averageRating:s.averageRating||0,viewCount:s.viewCount||0})}else k(null)}else s.status,k(null)}catch(e){k(null)}finally{F(!1)}else F(!1)})()},[h]),a.useEffect(()=>{w&&"#reviews"===x.hash&&(g.current&&!ae&&X.length>0||g.current&&!ae)&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[x.hash,w,ae,X.length]);const Se=a.useCallback(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Ce=a.useCallback(e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("tr-TR")},[]),Te=a.useCallback(async({page:e=0,reset:s=!1}={})=>{if(!w?.id)return Promise.resolve();te(!0),s&&de("");try{const i=new URLSearchParams({page:e.toString(),size:"6",sort:re,withImagesOnly:ne?"true":"false"}),a=await fetch(`${m}/reviews/product/${w.id}/page?${i.toString()}`);if(!a.ok)throw Error("Yorumlar getirilemedi.");const t=await a.json();if(!t?.isSuccess&&!t?.success)throw Error(t?.message||"Yorumlar getirilemedi.");const r=t?.data||{};return Q(e=>s?r.items||[]:[...e,...r.items||[]]),ee(r.summary||null),ie({page:r.page??e,size:r.size??6,hasNext:r.hasNext??!1,totalElements:r.totalElements??0,totalPages:r.totalPages??0}),Promise.resolve()}catch(i){return de(i.message||"Yorumlar yüklenirken bir hata oluştu."),Promise.reject(i)}finally{te(!1)}},[w?.id,re,ne]);a.useEffect(()=>{w?.id&&(Q([]),ee(null),ie(e=>({...e,page:0,hasNext:!0,totalElements:0,totalPages:0})),Te({page:0,reset:!0}).then(()=>{"#reviews"===x.hash&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"start"})},300)}).catch(()=>{"#reviews"===x.hash&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"start"})},300)}))},[w?.id,re,ne,Te,x.hash]),a.useEffect(()=>{const e=j.current;if(!e||!se.hasNext)return;const s=new IntersectionObserver(e=>{e[0]?.isIntersecting&&!ae&&Te({page:se.page+1,reset:!1})},{rootMargin:"200px"});return s.observe(e),()=>s.disconnect()},[se.hasNext,se.page,ae,Te]),a.useEffect(()=>{(async()=>{try{const e=await fetch(m+"/products");if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=(s.data||[]).map(e=>({id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",description:e.description||"",category:e.category?.name||"Genel",inStock:(e.quantity||0)>0}));H(e)}}}catch(e){}})()},[]);const Ee=t.useCallback((e,s)=>{if(!w||!w.price)return void W(0);let i=1;try{const e=s.split("x");2===e.length&&(i=parseFloat(e[1]),isNaN(i)&&(i=1))}catch(r){i=1}const a=e/100,t="number"==typeof w.price?w.price:parseFloat(w.price)||0;W(Math.round(t*a*i*100)/100)},[w]),Me=t.useCallback(async(e,s,i)=>{if(!(e&&s&&i&&w&&w.id))return void W(0);const a=parseFloat(e),t=parseFloat(s);if(!isNaN(a)&&!isNaN(t)&&a>0&&t>0){U(!0);try{const e=await fetch(`${m}/products/${w.id}/calculate-price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:a,height:t,pleatType:i,price:w.price})});if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=parseFloat(s.data.calculatedPrice);W(isNaN(e)?0:e)}else Ee(a,i)}else Ee(a,i)}catch(r){Ee(a,i)}finally{U(!1)}}else W(0)},[w,Ee]),Be=(e,s)=>{if(!s||""===s.trim())return{isValid:!1,message:""};const i=parseFloat(s);if(isNaN(i))return{isValid:!1,message:"Lütfen geçerli bir sayı giriniz."};if("en"===e){if(50>i)return{isValid:!1,message:"Genişlik en az 50 cm olmalıdır."};if(i>1e3)return{isValid:!1,message:"Genişlik en fazla 1000 cm olabilir."}}else if("boy"===e){if(30>i)return{isValid:!1,message:"Yükseklik en az 30 cm olmalıdır."};if(i>270)return{isValid:!1,message:"Yükseklik en fazla 270 cm olabilir."}}return{isValid:!0,message:""}};a.useEffect(()=>{const e=Be("en",P),s=Be("boy",R);if(_({en:e.message,boy:s.message}),w&&w.id&&P&&R&&$&&e.isValid&&s.isValid){const e=setTimeout(()=>{Me(P,R,$)},500);return()=>clearTimeout(e)}W(0)},[P,R,$,w?.id,w?.price,Me]);const Pe=Z?.totalReviewCount??w?.reviewCount??0,ze=Z?.averageRating??w?.averageRating??0,Re=Z?.imageReviewCount??0;a.useMemo(()=>{const e=Z?.breakdown||{},s=[{label:"5",count:e.fiveStars||0},{label:"4",count:e.fourStars||0},{label:"3",count:e.threeStars||0},{label:"2",count:e.twoStars||0},{label:"1",count:e.oneStar||0}],i=s.reduce((e,s)=>e+s.count,0)||Pe;return s.map(e=>({...e,percentage:i?Math.round(e.count/i*100):0}))},[Z,Pe]);const De=a.useMemo(()=>w&&w.id&&w.name&&w.price?{"@context":"https://schema.org","@type":"Product",name:(w.name||"Ürün")+" - Perde Satış",description:(w.description||"")+" Perde satış için Hiedra'yı ziyaret edin. Kaliteli kumaş, uygun fiyat, hızlı teslimat.",image:w.image?w.image.startsWith("http")?w.image:`${"undefined"!=typeof window?window.location.origin:"https://hiedra.com"}${w.image}`:"/images/perde1kapak.jpg",sku:"PROD-"+w.id,mpn:"HIEDRA-"+w.id,category:(w.category||"Genel")+" Perde",brand:{"@type":"Brand",name:"Hiedra Perde"},manufacturer:{"@type":"Organization",name:"Hiedra Perde"},offers:{"@type":"Offer",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/product/"+w.id,priceCurrency:"TRY",price:("number"==typeof w.price?w.price:parseFloat(w.price)||0).toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:w.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Hiedra Perde"},priceSpecification:{"@type":"UnitPriceSpecification",priceCurrency:"TRY",price:("number"==typeof w.price?w.price:parseFloat(w.price)||0).toString(),unitCode:"MTR",unitText:"metre"}},aggregateRating:{"@type":"AggregateRating",ratingValue:(w.averageRating||ze||4.8).toString(),reviewCount:(w.reviewCount||Pe||0).toString(),bestRating:"5",worstRating:"1"},review:w.reviewCount>0?[{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:(w.averageRating||5).toString(),bestRating:"5"},author:{"@type":"Person",name:"Müşteri"},reviewBody:(w.name||"Ürün")+" ürünü kaliteli ve hızlı teslimat ile memnun kaldık."}]:[]}:null,[w]),$e=t.useCallback(async e=>{if(e.preventDefault(),E(""),B(!1),!P||!R)return void E("Lütfen en ve boy değerlerini giriniz.");const s=parseFloat(P),i=parseFloat(R);if(isNaN(s)||isNaN(i))E("Lütfen geçerli sayısal değerler giriniz.");else if(50>s||s>1e3)E("Genişlik değeri 50 ile 1000 cm arasında olmalıdır.");else if(30>i||i>270)E("Yükseklik değeri 30 ile 270 cm arasında olmalıdır.");else if(w&&w.id){C(!0);try{let e=null;u||(e=localStorage.getItem("guestUserId"),e||(e="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",e)));const a=await fetch(`${m}/cart/items${e?"?guestUserId="+e:""}`,{method:"POST",headers:{"Content-Type":"application/json",...u&&{Authorization:"Bearer "+u}},body:JSON.stringify({productId:w.id,quantity:f,width:s,height:i,pleatType:$})}),t=await a.json();if(!a.ok||!t.isSuccess&&!t.success)throw Error(t.message||"Ürün sepete eklenemedi");p&&await p(),B(!0)}catch(a){E(a.message||"Ürün sepete eklenirken bir hata oluştu. Lütfen tekrar deneyin.")}finally{C(!1)}}else E("Ürün bilgisi bulunamadı.")},[w,f,P,R,$,I,u,p]);return b?r.jsx("div",{className:"product-detail-container",children:r.jsxs("div",{className:"loading-state",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Ürün bilgileri yükleniyor..."})]})}):w?r.jsxs("div",{className:"product-detail-container",children:[w&&r.jsx(d,{title:`${w.name} - ${w.category} Perde Satış | Fiyat: ${w.price} ₺`,description:`${w.description} ${w.category} perde satış için en uygun fiyat: ${w.price} ₺. Kaliteli kumaş, hızlı teslimat. Perde satın al.`,keywords:`${w.name}, ${w.category} perde satış, ${w.category.toLowerCase()} perde, perde satış, online perde satış, ${w.price} TL perde, kaliteli perde`,image:w.image,url:"/product/"+w.id,type:"product",structuredData:De}),w&&r.jsxs("div",{className:"product-detail-wrapper",ref:v,children:[r.jsx("div",{className:"product-category-top",children:r.jsx("span",{className:"product-category-top-text",children:w.category||"Genel"})}),r.jsx("div",{className:"product-name-top",children:r.jsx("h1",{className:"product-name-top-text",children:w.name})}),r.jsxs("div",{className:"product-detail-content",children:[r.jsxs("section",{className:"product-detail-images",children:[r.jsx("div",{className:"product-image-section-home",children:r.jsx("div",{className:"product-image-wrapper",children:r.jsxs("div",{className:"main-product-image-wrapper-home fade-in "+(je?"detail-modal-blurred":""),ref:y,children:[r.jsx(o,{src:fe,alt:`${w.name} - ${w.category} perde modeli - Görsel ${J+1}`,className:"main-product-image-home",isLCP:!0,fetchPriority:"high",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 800px",width:800,height:800}),Ne&&r.jsx("div",{className:"detail-image-preview-home",onClick:e=>we(e,Ne),title:"Detay fotoğrafını görüntüle",children:r.jsx(o,{src:Ne,alt:w.name+" detay fotoğrafı",className:"detail-image-preview-img-home"})})]})})}),w.description&&r.jsxs("div",{className:"product-description-section-detail",children:[r.jsx("h3",{className:"product-description-title",children:"Ürün Açıklaması"}),r.jsx("p",{className:"product-description-text",children:w.description})]}),(w.mountingType||w.material||w.lightTransmittance||w.pieceCount||w.color||w.usageArea||w.pleatType||w.width&&w.height)&&r.jsxs("div",{className:"product-specifications-detail",children:[r.jsx("h3",{className:"specifications-title-detail",children:"Ürün Özellikleri"}),r.jsxs("div",{className:"specifications-grid-detail",children:[w.mountingType&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Takma Şekli"}),r.jsx("span",{className:"spec-value-detail",children:w.mountingType})]})]}),w.material&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),r.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),r.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Materyal"}),r.jsx("span",{className:"spec-value-detail",children:w.material})]})]}),w.pleatType&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Pile"}),r.jsx("span",{className:"spec-value-detail",children:w.pleatType})]})]}),w.lightTransmittance&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Işık Geçirgenliği"}),r.jsx("span",{className:"spec-value-detail",children:w.lightTransmittance})]})]}),w.pieceCount&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),r.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),r.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),r.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Parça Sayısı"}),r.jsxs("span",{className:"spec-value-detail",children:[w.pieceCount," Adet"]})]})]}),w.color&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 2v4M12 18v4M2 12h4M18 12h4"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Renk"}),r.jsx("div",{className:"spec-color-display-detail",children:r.jsx("div",{className:"color-swatch-detail",style:{backgroundColor:Fe(w.color)||"#ccc",border:"2px solid "+(Fe(w.color)||"#ccc")},title:w.color})})]})]}),w.width&&w.height&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Beden"}),r.jsxs("span",{className:"spec-value-detail",children:[w.width," x ",w.height," cm"]})]})]}),w.usageArea&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),r.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Kullanım Alanı"}),r.jsx("span",{className:"spec-value-detail",children:w.usageArea})]})]})]})]})]}),r.jsxs("article",{className:"product-detail-info",children:[r.jsxs("div",{className:"product-header-info",children:[w.productCode&&r.jsxs("span",{className:"product-code",children:["Ürün Kodu: ",r.jsx("strong",{children:w.productCode})]}),Pe>0&&r.jsxs("div",{className:"product-rating-section",children:[r.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(e=>{const s=Math.floor(ze||0)>=e;return r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:s?"#FFD700":"none",stroke:s?"#FFD700":"#ddd",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},e)}),ze>0&&r.jsx("span",{className:"rating-value",children:ze.toFixed(1)})]}),r.jsxs("span",{className:"review-count",children:["(",Pe," ","yorum",")"]}),r.jsx("button",{type:"button",className:"reviews-anchor-btn",onClick:Se,children:"Yorumları Gör"})]}),r.jsx("div",{className:"detail-price-section-top",children:r.jsxs("div",{className:"price-info-top",children:[r.jsx("span",{className:"price-label-top",children:"Metre Fiyatı:"}),r.jsxs("span",{className:"detail-price-top",children:[w.price.toFixed(2)," ₺"]})]})})]}),r.jsxs("div",{className:"product-features",children:[r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Kaliteli Kumaş"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Hızlı Teslimat"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Uygun Fiyat"})]})]}),r.jsxs("div",{className:"pricing-form-wrapper",children:[r.jsxs("button",{type:"button",className:"pricing-form-toggle",onClick:()=>G(!Y),children:[r.jsx("h2",{className:"form-title",children:"Özel Fiyatlandırma"}),r.jsx("svg",{className:"form-toggle-arrow "+(Y?"open":""),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),r.jsxs("form",{className:"pricing-form "+(Y?"open":""),onSubmit:$e,children:[r.jsxs("div",{className:"form-section",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"en",children:["Genişlik (cm) ",r.jsx("span",{className:"required",children:"*"}),r.jsx("span",{className:"form-hint",children:"Min: 50 cm, Max: 1000 cm"})]}),r.jsx("input",{type:"number",id:"en",value:P,onChange:e=>{const s=e.target.value;z(s)},min:"50",max:"1000",step:"0.1",placeholder:"Örn: 200",className:K.en?"input-error":"",required:!0}),K.en&&r.jsx("span",{className:"error-message",children:K.en})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"boy",children:["Yükseklik (cm) ",r.jsx("span",{className:"required",children:"*"}),r.jsx("span",{className:"form-hint",children:"Min: 30 cm, Max: 270 cm"})]}),r.jsx("input",{type:"number",id:"boy",value:R,onChange:e=>{const s=e.target.value;D(s)},min:"30",max:"270",step:"0.1",placeholder:"Örn: 250",className:K.boy?"input-error":"",required:!0}),K.boy&&r.jsx("span",{className:"error-message",children:K.boy})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"pileSikligi",children:["Pile Sıklığı ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{className:"custom-dropdown",children:[r.jsxs("button",{type:"button",className:"dropdown-trigger",onClick:()=>O(!L),onBlur:()=>setTimeout(()=>O(!1),200),children:[r.jsx("span",{className:"dropdown-selected",children:be.find(e=>e.value===$)?.label}),r.jsx("svg",{className:"dropdown-arrow "+(L?"open":""),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),L&&r.jsx("div",{className:"dropdown-menu",children:be.map(e=>r.jsx("button",{type:"button",className:"dropdown-option "+($===e.value?"selected":""),onClick:()=>{A(e.value),O(!1)},children:r.jsx("span",{className:"option-label",children:e.label})},e.value))})]}),r.jsx("p",{className:"form-info",children:"Pile sıklığı fiyatlandırmayı etkiler: 1x1 (x1), 1x2 (x2), 1x3 (x3)"})]}),I>0&&r.jsx("div",{className:"calculated-price-section",children:r.jsxs("div",{className:"price-breakdown",children:[r.jsxs("div",{className:"breakdown-item",children:[r.jsx("span",{children:"Metre Fiyatı:"}),r.jsxs("span",{children:[w.price," ₺"]})]}),r.jsxs("div",{className:"breakdown-item",children:[r.jsx("span",{children:"En:"}),r.jsxs("span",{children:[P," cm (",parseFloat(P)/100," m)"]})]}),r.jsxs("div",{className:"breakdown-item",children:[r.jsx("span",{children:"Pile Çarpanı:"}),r.jsx("span",{children:$})]}),r.jsxs("div",{className:"breakdown-item total",children:[r.jsx("span",{children:"Toplam Fiyat:"}),r.jsx("span",{className:"total-price",children:V?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",display:"inline-block",marginRight:"0.5rem",verticalAlign:"middle"},children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Hesaplanıyor..."]}):I.toFixed(2)+" ₺"})]})]})})]}),r.jsxs("div",{className:"quantity-section",children:[r.jsx("label",{children:"Adet:"}),r.jsxs("div",{className:"quantity-controls",children:[r.jsx("button",{type:"button",onClick:()=>N(Math.max(1,f-1)),children:"-"}),r.jsx("span",{children:f}),r.jsx("button",{type:"button",onClick:()=>N(f+1),children:"+"})]})]}),T&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:T}),M&&r.jsx("div",{className:"success-message",style:{padding:"1rem",backgroundColor:"#efe",color:"#3c3",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #cfc"},children:"✓ Ürün sepete başarıyla eklendi!"}),r.jsx("button",{type:"submit",className:"add-to-cart-btn",disabled:!P||!R||0===I||S||!!K.en||!!K.boy,children:S?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",marginRight:"0.5rem"},children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Ekleniyor..."]}):"Sepete Ekle"})]})]})]})]}),me&&pe&&r.jsx("div",{className:"detail-modal-overlay-home",onClick:ke,children:r.jsxs("div",{className:"detail-modal-content-home",onClick:e=>e.stopPropagation(),style:xe?{position:"absolute",top:xe.top+"px",left:xe.left+"px",width:xe.width+"px",height:xe.height+"px"}:{},children:[r.jsx("button",{className:"detail-modal-close-home",onClick:ke,"aria-label":"Kapat",children:r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),r.jsx(o,{src:pe,alt:"Ürün detay",className:"detail-modal-image-home"})]})})]}),w&&(()=>{const e=q.filter(e=>e.id!==w.id&&e.category===(w.category||"Genel"));return 0===e.length?null:r.jsxs("section",{className:"similar-products-widget",children:[r.jsxs("div",{className:"similar-products-header",children:[r.jsx("h2",{className:"similar-products-title",children:"Benzer Ürünler"}),r.jsxs("p",{className:"similar-products-subtitle",children:[w.category||"Genel"," kategorisindeki diğer ürünler"]})]}),r.jsx("div",{className:"similar-products-scroll-container",children:r.jsx("div",{className:"similar-products-scroll",children:e.map(e=>r.jsxs(l,{to:"/product/"+e.id,className:"similar-product-item",children:[r.jsx("div",{className:"similar-product-image-wrapper",children:r.jsx(o,{src:e.image,alt:e.name,className:"similar-product-image"})}),r.jsx("div",{className:"similar-product-name",children:e.name})]},e.id))})})]})})(),w&&r.jsxs("section",{id:"reviews-section",ref:g,className:"product-reviews-section",children:[r.jsxs("div",{className:"reviews-header",children:[r.jsx("h2",{className:"reviews-title",children:"Ürün Yorumları"}),r.jsx("p",{className:"reviews-subtitle",children:"Gerçek müşteri deneyimleri ve puanlamalar"})]}),r.jsxs("div",{className:"reviews-summary-card",children:[r.jsxs("div",{className:"reviews-score",children:[r.jsx("span",{className:"reviews-score-value",children:(ze||0).toFixed(1)}),r.jsx("span",{className:"reviews-score-max",children:"/ 5"}),r.jsx("span",{className:"reviews-score-text",children:"puan"}),r.jsx("div",{className:"reviews-score-stars",children:[1,2,3,4,5].map(e=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:e>Math.round(ze)?"none":"#FFD700",stroke:e>Math.round(ze)?"#ddd":"#FFD700",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},"summary-star-"+e))})]}),r.jsxs("div",{className:"reviews-meta",children:[r.jsx("span",{className:"reviews-count-text",children:Pe>0?Pe+" değerlendirme":"Henüz yorum bulunmuyor"}),Re>0&&r.jsxs("span",{className:"reviews-image-count",children:[Re," fotoğraflı yorum"]}),r.jsx("button",{type:"button",className:"reviews-anchor-btn secondary",onClick:Se,children:"Başa Dön"})]})]}),r.jsx("div",{className:"reviews-summary-extras",children:r.jsxs("div",{className:"reviews-filters",children:[r.jsx("label",{className:"reviews-sort-label",htmlFor:"review-sort-select",children:"Sırala"}),r.jsxs("select",{id:"review-sort-select",className:"reviews-sort-select",value:re,onChange:e=>le(e.target.value),children:[r.jsx("option",{value:"LATEST",children:"En Yeni"}),r.jsx("option",{value:"OLDEST",children:"En Eski"}),r.jsx("option",{value:"HIGHEST_RATED",children:"En Yüksek Puan"}),r.jsx("option",{value:"LOWEST_RATED",children:"En Düşük Puan"}),r.jsx("option",{value:"MOST_HELPFUL",children:"En Faydalı"})]}),r.jsxs("label",{className:"reviews-checkbox",children:[r.jsx("input",{type:"checkbox",checked:ne,onChange:e=>ce(e.target.checked)}),r.jsxs("span",{children:["Sadece görselli (",Re,")"]})]})]})}),oe&&r.jsx("div",{className:"reviews-error",children:oe}),ae&&0===X.length?r.jsx("div",{className:"reviews-loading",children:"Yorumlar yükleniyor..."}):X.length>0?r.jsxs("div",{className:"reviews-list",children:[X.map((e,s)=>{const i=+e.rating||0,a=Ce(e.createdAt||e.updatedAt),t=e.reviewer||{},l=e.id??`${s}-${t.email||"review"}`;return r.jsxs("article",{className:"review-card",children:[r.jsxs("div",{className:"review-card-header",children:[r.jsxs("div",{className:"review-author-meta",children:[r.jsx("span",{className:"review-author",children:t.name||"Müşteri"}),a&&r.jsx("time",{className:"review-date",children:a})]}),i>0&&r.jsxs("div",{className:"review-card-rating",children:[[1,2,3,4,5].map(s=>r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:s>Math.round(i)?"none":"#FFD700",stroke:s>Math.round(i)?"#ddd":"#FFD700",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},`${e.id}-${s}`)),r.jsx("span",{children:i.toFixed(1)})]})]}),e.comment&&r.jsx("p",{className:"review-comment",children:e.comment}),e.imageUrls&&e.imageUrls.length>0&&r.jsx("div",{className:"review-image-grid",children:e.imageUrls.map((s,i)=>r.jsx("div",{className:"review-image-thumb","aria-label":"Yorum görseli "+(i+1),children:r.jsx(o,{src:s,alt:"Yorum görseli "+(i+1)})},`${e.id}-img-${i}`))})]},l)}),r.jsxs("div",{className:"reviews-load-more",ref:j,children:[ae&&X.length>0&&r.jsx("span",{children:"Daha fazla yorum yükleniyor..."}),!se.hasNext&&X.length>0&&r.jsx("span",{children:"Tüm yorumlar yüklendi."})]})]}):r.jsxs("div",{className:"no-reviews-card",children:[r.jsx("p",{children:ne?"Fotoğraflı yorum bulunamadı.":"Bu ürün için henüz yorum paylaşılmadı."}),r.jsx("span",{children:"Satın alma sonrasında deneyiminizi paylaşarak diğer müşterilere destek olabilirsiniz."})]})]})]}):r.jsx("div",{className:"product-detail-container",children:r.jsxs("div",{className:"product-not-found",children:[r.jsx("h2",{children:"Ürün bulunamadı"}),r.jsx("p",{children:"Aradığınız ürün mevcut değil veya silinmiş olabilir."}),r.jsx(l,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})};export{h as default};
