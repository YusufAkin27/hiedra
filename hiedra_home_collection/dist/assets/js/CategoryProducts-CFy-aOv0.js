import{e,u as s,r as a,j as i,L as r}from"./react-vendor-DfawjiNX.js";import{u as t}from"./context-BaHiGFT-.js";import{L as c}from"./LazyImage-BHBceM3t.js";import{S as l}from"./SEO-COBDhSYn.js";import"./vendor-invariant-GfE-dftQ.js";import"./vendor-shallowequal-DDPVF0Lr.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BfCtOoOM.js";import"./index-Zimv_-Zl.js";const n=()=>{const{categoryName:n}=e(),o=s(),{addToCart:d}=t(),[h,x]=a.useState([]),[p,m]=a.useState(!0),[j,u]=a.useState(null),[g,v]=a.useState(null);a.useEffect(()=>{n&&(async()=>{try{m(!0);const e=await fetch("http://localhost:8080/api/products");if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=(s.data||[]).filter(e=>(e.quantity||0)>0).map(e=>({id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",detailImages:e.detailImageUrl?[e.detailImageUrl]:[],description:e.description||"",category:e.category?.name||"Genel",color:e.color||"",inStock:(e.quantity||0)>0,productCode:e.productCode||e.code||"",quantity:e.quantity||0,mountingType:e.mountingType||"",material:e.material||"",lightTransmittance:e.lightTransmittance||"",pieceCount:e.pieceCount||null,usageArea:e.usageArea||"",reviewCount:e.reviewCount||0,averageRating:e.averageRating||0,viewCount:e.viewCount||0})),a=decodeURIComponent(n||"").replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),i=e.filter(e=>{const s=e.category||"";return s.toLowerCase()===a.toLowerCase()||s.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(s.toLowerCase())});x(i),i.length>0&&u(i[0].id)}}}catch(e){}finally{m(!1)}})()},[n]);const y=a.useMemo(()=>{const e={};return h.forEach(s=>{if(s.color){const a=s.color.trim();e[a]||(e[a]=[]),e[a].push(s)}}),e},[h]),N=a.useMemo(()=>Object.keys(y).sort(),[y]),w=a.useMemo(()=>g&&y[g]&&y[g].length>0?y[g][0]:j?h.find(e=>e.id===j)||h[0]:h[0]||null,[j,g,h,y]),k=e=>{o("/product/"+e)};if(p)return i.jsx("div",{className:"category-products-container",children:i.jsxs("div",{className:"loading-state",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Ürünler yükleniyor..."})]})});if(0===h.length){const e=decodeURIComponent(n||"").replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());return i.jsx("div",{className:"category-products-container",children:i.jsxs("div",{className:"category-not-found",children:[i.jsxs("h2",{children:[e," kategorisinde ürün bulunamadı"]}),i.jsx("p",{children:"Bu kategoride henüz ürün bulunmamaktadır."}),i.jsx(r,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})}const C=decodeURIComponent(n||"").replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());return!w?.detailImages||(w.image,w.detailImages),i.jsxs("div",{className:"category-products-container",children:[i.jsx(l,{title:C+" - Perde Satış | Hiedra",description:C+" kategorisindeki tüm perde modelleri. Kaliteli kumaş, uygun fiyat, hızlı teslimat.",url:"/category/"+n}),i.jsxs("header",{className:"category-header",children:[i.jsx("h1",{children:C}),i.jsxs("p",{children:[h.length," ürün bulundu"]})]}),i.jsxs("div",{className:"category-products-content",children:[i.jsx("div",{className:"main-product-section",children:w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"main-product-image-wrapper",onClick:()=>k(w.id),children:[i.jsxs("div",{className:"product-badges-top",children:[i.jsx("span",{className:"badge badge-return",children:"14 Gün Koşulsuz İade"}),i.jsx("span",{className:"badge badge-shipping",children:"Ücretsiz Kargo"})]}),i.jsx(c,{src:w.image,alt:w.name,className:"main-product-image",width:600,height:600,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 600px"}),w.detailImages&&w.detailImages.length>0&&i.jsxs("div",{className:"detail-image-preview",children:[i.jsx(c,{src:w.detailImages[0],alt:w.name+" detay fotoğrafı",className:"detail-preview-image"}),i.jsxs("div",{className:"detail-preview-label",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("path",{d:"m21 21-4.35-4.35"}),i.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),i.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),i.jsx("span",{children:"Detay Fotoğrafı"})]})]})]}),i.jsxs("div",{className:"main-product-info",children:[i.jsxs("div",{className:"product-header",children:[i.jsx("div",{className:"product-category-badge",children:w.category}),i.jsx("h2",{className:"product-name",children:w.name}),w.productCode&&i.jsxs("div",{className:"product-code-display",children:[i.jsx("span",{className:"code-label",children:"Ürün Kodu:"}),i.jsx("span",{className:"code-value",children:w.productCode})]}),i.jsxs("div",{className:"product-price-section",children:[i.jsx("span",{className:"price-label",children:"Başlangıç:"}),i.jsxs("span",{className:"price-value",children:[w.price.toFixed(2)," ₺"]})]})]}),(w.averageRating&&w.averageRating>0||w.reviewCount&&w.reviewCount>0)&&i.jsxs("div",{className:"product-rating-section",children:[i.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(e=>{const s=w.averageRating||0,a=Math.floor(s)>=e;return i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:a?"#FFD700":"none",stroke:a?"#FFD700":"#ddd",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},e)}),w.averageRating>0&&i.jsx("span",{className:"rating-value",children:w.averageRating.toFixed(1)})]}),w.reviewCount>0&&i.jsxs("span",{className:"review-count",children:["(",w.reviewCount," ",(w.reviewCount,"yorum"),")"]})]}),w.description&&i.jsx("p",{className:"product-description",children:w.description}),i.jsxs("div",{className:"product-specifications",children:[i.jsx("h4",{className:"specifications-title",children:"Ürün Özellikleri"}),i.jsxs("div",{className:"specifications-grid",children:[w.mountingType&&i.jsxs("div",{className:"spec-item",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsxs("div",{className:"spec-content",children:[i.jsx("span",{className:"spec-label",children:"Takma Şekli"}),i.jsx("span",{className:"spec-value",children:w.mountingType})]})]}),w.material&&i.jsxs("div",{className:"spec-item",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),i.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),i.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),i.jsxs("div",{className:"spec-content",children:[i.jsx("span",{className:"spec-label",children:"Materyal"}),i.jsx("span",{className:"spec-value",children:w.material})]})]}),w.lightTransmittance&&i.jsxs("div",{className:"spec-item",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),i.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),i.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),i.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),i.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),i.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),i.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),i.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),i.jsxs("div",{className:"spec-content",children:[i.jsx("span",{className:"spec-label",children:"Işık Geçirgenliği"}),i.jsx("span",{className:"spec-value",children:w.lightTransmittance})]})]}),w.pieceCount&&i.jsxs("div",{className:"spec-item",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),i.jsxs("div",{className:"spec-content",children:[i.jsx("span",{className:"spec-label",children:"Parça Sayısı"}),i.jsxs("span",{className:"spec-value",children:[w.pieceCount," Adet"]})]})]}),w.usageArea&&i.jsxs("div",{className:"spec-item",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),i.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),i.jsxs("div",{className:"spec-content",children:[i.jsx("span",{className:"spec-label",children:"Kullanım Alanı"}),i.jsx("span",{className:"spec-value",children:w.usageArea})]})]})]})]}),i.jsxs("button",{className:"customize-btn",onClick:()=>k(w.id),children:[i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),i.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Özelleştir & Sipariş Ver"]})]})]})}),N.length>0&&i.jsxs("div",{className:"color-palette-section",children:[i.jsx("h3",{className:"color-palette-title",children:"Renk Seçenekleri"}),i.jsx("div",{className:"color-palette",children:N.map(e=>{const s=y[e],a=g===e,r=s.length;return i.jsxs("button",{className:"color-button "+(a?"active":""),onClick:()=>(e=>{v(e),y[e]&&y[e].length>0&&u(y[e][0].id)})(e),title:`${e} (${r} ürün)`,children:[i.jsxs("div",{className:"color-button-content",children:[i.jsx("div",{className:"color-name",children:e}),i.jsxs("div",{className:"color-count",children:[r," ürün"]})]}),a&&i.jsx("div",{className:"color-check",children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},e)})})]})]}),h.length>1&&i.jsxs("section",{className:"other-products-section",children:[i.jsx("h3",{className:"other-products-title",children:"Aynı Kategorideki Diğer Ürünler"}),i.jsx("div",{className:"other-products-grid",children:h.filter(e=>e.id!==w?.id).map(e=>i.jsxs("div",{className:"other-product-card",onClick:()=>(e=>{u(e);const s=h.find(s=>s.id===e);s&&s.color&&v(s.color.trim())})(e.id),children:[i.jsxs("div",{className:"other-product-image-wrapper",children:[i.jsx(c,{src:e.image,alt:e.name,className:"other-product-image"}),e.color&&i.jsx("div",{className:"other-product-color-badge",children:e.color})]}),i.jsxs("div",{className:"other-product-info",children:[i.jsx("h4",{children:e.name}),i.jsxs("p",{className:"other-product-price",children:[e.price.toFixed(2)," ₺"]})]})]},e.id))})]})]})};export{n as default};
