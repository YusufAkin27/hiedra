import{u as e,r as s,j as r}from"./react-vendor-2SZXphvN.js";import{a as i}from"./context-DM-lvtsQ.js";import{S as a}from"./SEO-BxBC3DWO.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const t=async e=>{if(e&&e.preventDefault&&e.preventDefault(),validateEmailForm()){setIsSendingCode(!0),setError("");try{const e=await fetch(m+"/lookup/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email.trim()})}),s=await e.json();if(!(s.success??s.isSuccess??e.ok))throw Error(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi.");showToast("DoÄŸrulama kodu e-posta adresinize gÃ¶nderildi.","success"),setVerificationCode(""),setLookupToken(""),setOrders([]),setOrderData(null),setSelectedOrderNumber(null),setStep("verify")}catch(s){setError(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi."),showToast(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi.","error")}finally{setIsSendingCode(!1)}}},n=async e=>{if(e&&e.preventDefault&&e.preventDefault(),verificationCode.trim()){setIsVerifying(!0),setError("");try{const e=await fetch(m+"/lookup/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email.trim(),code:verificationCode.trim()})}),s=await e.json();if(!(s.success??s.isSuccess??e.ok)||!s.data?.lookupToken)throw Error(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z.");const r=s.data.lookupToken;setLookupToken(r),showToast("DoÄŸrulama baÅŸarÄ±lÄ±. SipariÅŸleriniz yÃ¼kleniyor...","success"),await l(r)}catch(s){setError(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z oldu."),showToast(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z oldu.","error")}finally{setIsVerifying(!1)}}else showToast("LÃ¼tfen e-posta adresinize gelen doÄŸrulama kodunu giriniz.","error")},l=async e=>{const s=e||lookupToken;if(s){setIsLoading(!0),setError(""),setOrders([]);try{const e=await fetch(`${m}/lookup?token=${encodeURIComponent(s)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await e.json();if(!(r.success??r.isSuccess??e.ok))throw Error(r.message||"SipariÅŸler alÄ±namadÄ±.");setOrders(r.data||[]),setStep("list"),setOrderData(null),setSelectedOrderNumber(null),setShowAddressForm(!1),setShowCancelModal(!1),setShowRefundModal(!1)}catch(r){setError(r.message||"SipariÅŸler alÄ±nÄ±rken bir hata oluÅŸtu."),showToast(r.message||"SipariÅŸler alÄ±nÄ±rken bir hata oluÅŸtu.","error")}finally{setIsLoading(!1)}}},d=async()=>{await t()},o=()=>{setOrderData(null),setShowAddressForm(!1),setShowCancelModal(!1),setShowRefundModal(!1),setTrackingData(null),setStep("list")},c="http://localhost:8080",m=c+"/api/orders",u=c+"/api/shipping",p=()=>{const{isAuthenticated:c}=i(),p=e(),[h,x]=s.useState(""),[g,j]=s.useState(""),[y,b]=s.useState(""),[f,k]=s.useState(!1),[N,v]=s.useState(null),[S,w]=s.useState(""),[C,D]=s.useState(!1),[E,T]=s.useState(!1),[A,z]=s.useState(!1),[I,R]=s.useState("MÃ¼ÅŸteri isteÄŸi"),[L,P]=s.useState("Ä°ade talebi"),[B,O]=s.useState(!1),[q,U]=s.useState({show:!1,message:"",type:"success"}),[G,K]=s.useState(null),[F,$]=s.useState(!1),[W,V]=s.useState([]),[M,Y]=s.useState(""),[H,_]=s.useState(""),[X,J]=s.useState("request"),[Q,Z]=s.useState(!1),[ee,se]=s.useState(!1),[re,ie]=s.useState(null),ae=s.useRef(null),te=()=>{const e={"Content-Type":"application/json"};return H&&(e["X-Order-Lookup-Token"]=H),e};s.useEffect(()=>{c&&p("/siparislerim")},[c,p]);const ne=(e,s="success")=>{U({show:!0,message:e,type:s}),setTimeout(()=>{U({show:!1,message:"",type:"success"})},4e3)},[le,de]=s.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:""}),oe=()=>{let e="";for(let s=0;5>s;s++)e+="ABCDEFGHJKLMNPQRSTUVWXYZ23456789".charAt(Math.floor(32*Math.random()));return e};s.useEffect(()=>{j(oe())},[]);const ce=()=>{j(oe()),b(""),ae.current&&ae.current.focus()},me=async(e,s)=>{if(!e)return;const r=H;if(r){k(!0),w("");try{const s=await fetch(`${m}/lookup/${e}?token=${encodeURIComponent(r)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await s.json();if(!s.ok||!(i.success??i.isSuccess))throw Error(i.message||"SipariÅŸ bulunamadÄ±");const a=i.data;if(!a)throw Error("SipariÅŸ bulunamadÄ±");v({...a,shippingAddress:a.addresses&&a.addresses.length>0?a.addresses[0]:{}});const t=a.addresses&&a.addresses.length>0?a.addresses[0]:{};de({fullName:a.customerName||"",phone:a.customerPhone||"",addressLine:t.addressLine||"",addressDetail:t.addressDetail||"",city:t.city||"",district:t.district||""}),ie(a.orderNumber),D(!1),T(!1),z(!1),J("detail"),a.trackingNumber?ue(a.orderNumber,h.trim()):K(null)}catch(i){w(i.message||"SipariÅŸ detaylarÄ± alÄ±nÄ±rken bir hata oluÅŸtu")}finally{k(!1)}}else ne("LÃ¼tfen Ã¶nce doÄŸrulama iÅŸlemini tamamlayÄ±n.","error")},ue=async(e,s)=>{if(e&&s)try{$(!0);const r=new URL(u+"/track-by-order");r.searchParams.append("orderNumber",e),r.searchParams.append("email",s);const i=await fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await i.json();a.isSuccess||a.success?K(a.data):K(null)}catch(r){K(null)}finally{$(!1)}},pe=e=>{if(!e)return"";try{return new Date(e).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},he=()=>{x(""),b(""),v(null),V([]),w(""),D(!1),T(!1),z(!1),K(null),_(""),Y(""),ie(null),J("request"),ce()},xe=e=>{de({...le,[e.target.name]:e.target.value})},ge=()=>{if(!N||!N.status)return!1;const e=N.status.toUpperCase();return"SHIPPED"===e||"DELIVERED"===e},je=()=>{if(!N||!N.status)return!1;const e=N.status.toUpperCase();return"PAID"===e||"PROCESSING"===e};s.useEffect(()=>{!je()&&C&&D(!1)},[N]);const ye=e=>e?{PENDING:"Beklemede",PAID:"Ã–dendi",PROCESSING:"HazÄ±rlanÄ±yor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"Ä°ptal Edildi",REFUNDED:"Ä°ade Edildi"}[e.toUpperCase()]||e:"Bilinmiyor",be={"@context":"https://schema.org","@type":"WebPage",name:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi",description:"Perde satÄ±ÅŸ sipariÅŸ durumu sorgulama sayfasÄ±. SipariÅŸ numaranÄ±z ile sipariÅŸinizin durumunu takip edin.",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/siparis-sorgula"},fe=e=>{if(!e)return"/images/perde1kapak.jpg";let s=e.productImageUrl||e.coverImageUrl||"/images/perde1kapak.jpg";return s&&""!==s&&"null"!==s&&"undefined"!==s||(s="/images/perde1kapak.jpg"),s.startsWith("http")||s.startsWith("/")||(s="/"+s),s};return r.jsxs("div",{className:"order-lookup-container",children:[r.jsx(a,{title:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi | Hiedra Perde",description:"Perde satÄ±ÅŸ sipariÅŸ sorgulama sayfasÄ±. SipariÅŸinizin durumunu Ã¶ÄŸrenmek iÃ§in sipariÅŸ numaranÄ±zÄ± ve e-posta adresinizi giriniz. Hiedra Perde sipariÅŸ takip sistemi.",keywords:"sipariÅŸ sorgula, sipariÅŸ takip, perde satÄ±ÅŸ sipariÅŸ sorgulama, sipariÅŸ durumu, kargo takip, perde sipariÅŸ takibi",url:"/siparis-sorgula",structuredData:be}),r.jsxs("header",{className:"lookup-header",children:[r.jsx("h1",{children:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi"}),r.jsx("p",{children:"Perde satÄ±ÅŸ sipariÅŸinizin durumunu takip etmek iÃ§in bilgilerinizi giriniz"})]}),"request"===X&&r.jsxs("div",{className:"lookup-form-container",children:[S&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:S}),r.jsxs("form",{className:"lookup-form",onSubmit:t,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["E-posta Adresi ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"email",id:"email",value:h,onChange:e=>x(e.target.value),placeholder:"siparis@email.com",required:!0}),r.jsx("p",{className:"form-hint",children:"SipariÅŸ verdiÄŸiniz e-posta adresini giriniz"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"captcha",children:["GÃ¼venlik Kodu ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{className:"captcha-container",children:[r.jsxs("div",{className:"captcha-display",onClick:ce,children:[r.jsx("span",{className:"captcha-text",children:g}),r.jsx("button",{type:"button",className:"captcha-refresh",onClick:e=>{e.preventDefault(),ce()},title:"Yenile",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("polyline",{points:"23 4 23 10 17 10"}),r.jsx("polyline",{points:"1 20 1 14 7 14"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),r.jsx("input",{ref:ae,type:"text",id:"captcha",value:y,onChange:e=>b(e.target.value.toUpperCase()),placeholder:"YukarÄ±daki kodu giriniz",required:!0,maxLength:"5",className:"captcha-input"})]}),r.jsx("p",{className:"form-hint",children:"YukarÄ±daki kodu giriniz (bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k harf duyarsÄ±z)"})]}),r.jsx("button",{type:"submit",className:"lookup-btn",disabled:Q,children:Q?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Kod GÃ¶nderiliyor..."]}):"DoÄŸrulama Kodunu GÃ¶nder"})]})]}),"verify"===X&&r.jsxs("div",{className:"lookup-form-container",children:[S&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:S}),r.jsxs("div",{className:"verification-info",children:[r.jsx("h3",{children:"Kodunuzu Girin"}),r.jsxs("p",{children:[h," adresine gÃ¶nderdiÄŸimiz 6 haneli kodu girerek sipariÅŸlerinizi gÃ¶rÃ¼ntÃ¼leyebilirsiniz."]})]}),r.jsxs("form",{className:"lookup-form",onSubmit:n,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"verificationCode",children:["DoÄŸrulama Kodu ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"verificationCode",value:M,onChange:e=>Y(e.target.value.toUpperCase()),placeholder:"Ã–rn: 123456",required:!0,maxLength:"6"}),r.jsx("p",{className:"form-hint",children:"Kod gelmediyse birkaÃ§ dakika bekleyip tekrar gÃ¶nderebilirsiniz."})]}),r.jsx("button",{type:"submit",className:"lookup-btn",disabled:ee,children:ee?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"DoÄŸrulanÄ±yor..."]}):"Kodumu DoÄŸrula"})]}),r.jsx("button",{className:"link-button",type:"button",onClick:d,disabled:Q,children:"Kod gelmedi mi? Tekrar gÃ¶nder"})]}),"list"===X&&r.jsxs("div",{className:"order-list-container",children:[S&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:S}),r.jsxs("div",{className:"order-list-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:[h," adresine ait sipariÅŸler"]}),r.jsx("p",{children:"Detay gÃ¶rmek istediÄŸiniz sipariÅŸi seÃ§in."})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("button",{className:"new-lookup-btn",onClick:()=>l(),children:"SipariÅŸleri Yenile"}),r.jsx("button",{className:"new-lookup-btn",onClick:he,children:"â† Yeni E-posta ile Sorgula"})]})]}),0===W.length?r.jsx("div",{className:"empty-orders",children:r.jsx("p",{children:"Bu e-posta ile iliÅŸkili sipariÅŸ bulunamadÄ±."})}):r.jsx("div",{className:"order-list",children:W.map(e=>r.jsxs("div",{className:"order-card",children:[r.jsxs("div",{className:"order-card-header",children:[r.jsxs("h4",{children:["SipariÅŸ No: ",e.orderNumber]}),r.jsx("span",{className:"status-badge "+(e.status||"").toLowerCase().replace(/\s+/g,"-"),children:ye(e.status)})]}),r.jsxs("div",{className:"order-card-body",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Tarih:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString("tr-TR"):"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Toplam:"})," ",e.totalAmount?parseFloat(e.totalAmount).toFixed(2):"0.00"," â‚º"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"ÃœrÃ¼n:"})," ",e.orderItems&&e.orderItems[0]?.productName||"N/A"]})]}),r.jsx("button",{type:"button",className:"new-lookup-btn",onClick:()=>(async e=>{const s="string"==typeof e?e:e?.orderNumber;s&&await fetchOrderDetail(s)})(e.orderNumber),children:"DetayÄ± GÃ¶r"})]},e.orderNumber))})]}),"detail"===X&&N&&r.jsxs("div",{className:"order-details-container",children:[S&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:S}),r.jsxs("div",{className:"order-header-actions",children:[r.jsxs("div",{className:"action-buttons",style:{gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("button",{onClick:he,className:"new-lookup-btn",children:"â† Yeni E-posta ile Sorgula"}),H&&r.jsx("button",{onClick:o,className:"new-lookup-btn",children:"â† SipariÅŸ Listesine DÃ¶n"})]}),r.jsxs("div",{className:"action-buttons",children:[(()=>{if(!N||!N.status)return!1;const e=N.status.toUpperCase();return"PENDING"===e||"PAID"===e||"PROCESSING"===e})()&&r.jsx("button",{onClick:()=>T(!0),className:"cancel-btn",disabled:B,children:"SipariÅŸi Ä°ptal Et"}),ge()&&r.jsx("button",{onClick:()=>z(!0),className:"refund-btn",disabled:B,children:"Ä°ade Talep Et"}),je()&&r.jsx("button",{onClick:()=>D(!C),className:"update-address-btn",children:C?"Adres Formunu Kapat":"Adresi GÃ¼ncelle"})]})]}),r.jsx("div",{className:"order-status-card",children:r.jsxs("div",{className:"status-header",children:[r.jsxs("div",{className:"status-info",children:[r.jsxs("h3",{children:["SipariÅŸ No: ",N.orderNumber]}),r.jsx("span",{className:"status-badge "+(N.status||"").toLowerCase().replace(/\s+/g,"-"),children:ye(N.status)})]}),r.jsxs("div",{className:"order-date",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),N.createdAt?new Date(N.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]})}),C&&je()&&r.jsxs("div",{className:"order-section address-form-section",children:[r.jsx("h3",{children:"Adres GÃ¼ncelle"}),r.jsxs("div",{className:"address-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Ad Soyad ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"fullName",value:le.fullName,onChange:xe,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Telefon ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"phone",value:le.phone,onChange:xe,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Adres SatÄ±rÄ± ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"addressLine",value:le.addressLine,onChange:xe,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Adres DetayÄ±"}),r.jsx("input",{type:"text",name:"addressDetail",value:le.addressDetail,onChange:xe})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Åžehir ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"city",value:le.city,onChange:xe,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Ä°lÃ§e ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"district",value:le.district,onChange:xe,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),r.jsx("button",{onClick:async()=>{if(le.fullName&&le.phone&&le.addressLine&&le.city&&le.district){O(!0),w("");try{const e=await fetch(`${m}/${N.orderNumber}/address?email=${encodeURIComponent(h)}`,{method:"PUT",headers:te(),body:JSON.stringify({orderNumber:N.orderNumber,fullName:le.fullName,phone:le.phone,addressLine:le.addressLine,addressDetail:le.addressDetail||"",city:le.city,district:le.district})});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"Adres gÃ¼ncellenemedi");s.success&&(ne("Adres baÅŸarÄ±yla gÃ¼ncellendi!","success"),D(!1),await me(N.orderNumber))}catch(e){w(e.message||"Adres gÃ¼ncellenirken bir hata oluÅŸtu")}finally{O(!1)}}else ne("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurunuz.","error")},className:"lookup-btn",disabled:B,children:B?"GÃ¼ncelleniyor...":"Adresi GÃ¼ncelle"})]})]}),r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"SipariÅŸ DetaylarÄ±"}),r.jsx("div",{className:"order-items",children:N.orderItems&&N.orderItems.length>0?N.orderItems.map((e,s)=>r.jsxs("div",{className:"order-item",children:[r.jsx("div",{className:"item-image",children:r.jsx("img",{src:fe(e),alt:e.productName||"SipariÅŸ Ã¼rÃ¼nÃ¼",loading:"lazy"})}),r.jsxs("div",{className:"item-info",children:[r.jsx("h4",{children:e.productName||"ÃœrÃ¼n"}),r.jsxs("div",{className:"item-customizations",children:[e.width&&r.jsxs("span",{children:["En: ",e.width," cm"]}),e.height&&r.jsxs("span",{children:["Boy: ",e.height," cm"]}),e.pleatType&&r.jsxs("span",{children:["Pile: ","pilesiz"===e.pleatType?"Pilesiz":e.pleatType]})]}),r.jsxs("span",{className:"item-quantity",children:["Adet: ",e.quantity||1]})]})]},s)):r.jsx("p",{children:"SipariÅŸ detayÄ± bulunamadÄ±"})}),ge()&&r.jsx("button",{type:"button",className:"inline-refund-btn",onClick:()=>z(!0),children:"Bu ÃœrÃ¼n Ä°Ã§in Ä°ade Talebi OluÅŸtur"}),r.jsxs("div",{className:"order-total",children:[r.jsx("span",{children:"Toplam:"}),r.jsxs("span",{children:[N.totalAmount?parseFloat(N.totalAmount).toFixed(2):"0.00"," â‚º"]})]})]}),r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Teslimat Adresi"}),r.jsxs("div",{className:"address-details",children:[N.shippingAddress&&r.jsxs(r.Fragment,{children:[N.shippingAddress.addressLine&&r.jsx("p",{children:N.shippingAddress.addressLine}),N.shippingAddress.addressDetail&&r.jsx("p",{children:N.shippingAddress.addressDetail}),(N.shippingAddress.district||N.shippingAddress.city)&&r.jsxs("p",{children:[N.shippingAddress.district||""," ",N.shippingAddress.district&&N.shippingAddress.city?"/":""," ",N.shippingAddress.city||""]})]}),(!N.shippingAddress||!N.shippingAddress.addressLine&&!N.shippingAddress.city)&&r.jsx("p",{children:"Adres bilgisi bulunamadÄ±"})]})]}),N.cancelReason&&r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Ä°ptal Bilgisi"}),r.jsxs("div",{className:"address-details",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Sebep:"})," ",N.cancelReason]}),N.cancelledAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Ä°ptal Tarihi:"})," ",new Date(N.cancelledAt).toLocaleDateString("tr-TR")]})]})]}),N.refundedAt&&r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Ä°ade Bilgisi"}),r.jsx("div",{className:"address-details",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Ä°ade Tarihi:"})," ",new Date(N.refundedAt).toLocaleDateString("tr-TR")]})})]}),N.trackingNumber&&r.jsxs("div",{className:"order-section tracking-section",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",border:"1px solid #e0e0e0"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0},children:"ðŸ“¦ Kargo Takip Bilgileri"}),r.jsx("button",{onClick:()=>ue(N.orderNumber,h),disabled:F,style:{padding:"0.5rem 1rem",background:F?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:F?"not-allowed":"pointer",fontSize:"0.9rem",opacity:F?.6:1},children:F?"YÃ¼kleniyor...":"ðŸ”„ GÃ¼ncelle"})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Takip NumarasÄ±:"})," ",N.trackingNumber]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Kargo FirmasÄ±:"})," ",N.carrier||"DHL"]}),N.shippedAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Kargoya Verilme:"})," ",new Date(N.shippedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),F?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:r.jsx("p",{children:"Kargo bilgileri yÃ¼kleniyor..."})}):G?r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"600",backgroundColor:"DELIVERED"===G.status?"#d4edda":"IN_TRANSIT"===G.status?"#d1ecf1":"EXCEPTION"===G.status?"#f8d7da":"#fff3cd",color:"DELIVERED"===G.status?"#155724":"IN_TRANSIT"===G.status?"#0c5460":"EXCEPTION"===G.status?"#721c24":"#856404"},children:(ke=G.status,ke?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo AlÄ±ndÄ±",OUT_FOR_DELIVERY:"Teslimat Ä°Ã§in Yola Ã‡Ä±ktÄ±"}[ke.toUpperCase()]||ke:"Bilinmiyor")}),G.statusDescription&&r.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:G.statusDescription})]}),G.events&&G.events.length>0&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"1rem"},children:"Kargo Hareketleri"}),r.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[G.events.slice(0,5).map((e,s)=>r.jsxs("div",{style:{padding:"0.75rem",marginBottom:"0.5rem",background:"white",borderRadius:"6px",borderLeft:"4px solid #667eea",fontSize:"0.9rem"},children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",color:"#333"},children:pe(e.timestamp)}),e.location&&r.jsxs("div",{style:{color:"#64748b",marginBottom:"0.25rem"},children:["ðŸ“ ",e.location]}),e.description&&r.jsx("div",{style:{color:"#333"},children:e.description})]},s)),G.events.length>5&&r.jsxs("p",{style:{textAlign:"center",color:"#64748b",fontSize:"0.85rem",marginTop:"0.5rem"},children:["+",G.events.length-5," hareket daha"]})]})]}),r.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:r.jsx("a",{href:`/kargo-takip?trackingNumber=${N.trackingNumber}&orderNumber=${N.orderNumber}`,style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"600"},children:"â†’ DetaylÄ± Takip Bilgisi"})})]}):r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:r.jsx("p",{children:'Kargo takip bilgisi henÃ¼z gÃ¼ncellenmedi. "GÃ¼ncelle" butonuna tÄ±klayarak en gÃ¼ncel bilgileri alabilirsiniz.'})})]}),E&&r.jsx("div",{className:"modal-overlay",onClick:()=>!B&&T(!1),children:r.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{children:"SipariÅŸi Ä°ptal Et"}),r.jsx("p",{children:"SipariÅŸinizi iptal etmek istediÄŸinizden emin misiniz?"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Ä°ptal Sebebi"}),r.jsx("textarea",{value:I,onChange:e=>R(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>T(!1),disabled:B,children:"Ä°ptal"}),r.jsx("button",{onClick:async()=>{O(!0),w("");try{const e=await fetch(`${m}/${N.orderNumber}/cancel?email=${encodeURIComponent(h)}&reason=${encodeURIComponent(I)}`,{method:"POST",headers:te()});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"SipariÅŸ iptal edilemedi");s.success&&(ne("SipariÅŸ iptal talebiniz alÄ±ndÄ±!","success"),T(!1),await me(N.orderNumber))}catch(e){w(e.message||"SipariÅŸ iptal edilirken bir hata oluÅŸtu")}finally{O(!1)}},disabled:B,className:"confirm-btn",children:B?"Ä°ÅŸleniyor...":"Onayla"})]})]})}),A&&r.jsx("div",{className:"modal-overlay",onClick:()=>!B&&z(!1),children:r.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{children:"Ä°ade Talebi OluÅŸtur"}),r.jsx("p",{children:"Ä°ade talebi oluÅŸturmak istediÄŸinizden emin misiniz?"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Ä°ade Sebebi"}),r.jsx("textarea",{value:L,onChange:e=>P(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>z(!1),disabled:B,children:"Ä°ptal"}),r.jsx("button",{onClick:async()=>{O(!0),w("");try{const e=await fetch(`${m}/${N.orderNumber}/refund?email=${encodeURIComponent(h)}&reason=${encodeURIComponent(L)}`,{method:"POST",headers:te()});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"Ä°ade talebi oluÅŸturulamadÄ±");s.success&&(ne("Ä°ade talebiniz alÄ±ndÄ±!","success"),z(!1),await me(N.orderNumber))}catch(e){w(e.message||"Ä°ade talebi oluÅŸturulurken bir hata oluÅŸtu")}finally{O(!1)}},disabled:B,className:"confirm-btn",children:B?"Ä°ÅŸleniyor...":"Onayla"})]})]})})]}),q.show&&r.jsxs("div",{className:"toast-notification toast-"+q.type,children:[r.jsxs("div",{className:"toast-content",children:["success"===q.type&&r.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"error"===q.type&&r.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),r.jsx("span",{className:"toast-message",children:q.message})]}),r.jsx("button",{className:"toast-close",onClick:()=>U({show:!1,message:"",type:"success"}),"aria-label":"Kapat",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]});var ke};export{p as default};
