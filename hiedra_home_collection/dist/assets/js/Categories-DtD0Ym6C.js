import{u as e,r as a,j as r}from"./react-vendor-DfawjiNX.js";import{L as s}from"./LazyImage-J0pJk_Wc.js";import{L as i}from"./index-CIuOb_9n.js";import{S as t}from"./SEO-COBDhSYn.js";import"./vendor-invariant-GfE-dftQ.js";import"./vendor-shallowequal-DDPVF0Lr.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BfCtOoOM.js";import"./context-BBxaqZSG.js";const c="http://localhost:8080/api",n=()=>{const n=e(),[o,l]=a.useState([]),[d,m]=a.useState(!0),[g,p]=a.useState("");return a.useEffect(()=>{(async()=>{try{m(!0),p("");const e=await fetch(c+"/categories");if(e.ok){const a=await e.json();if(a.isSuccess||a.success){const e=a.data||[],r=await fetch(c+"/products?page=0&size=1000");if(r.ok){const a=await r.json();let s=[];(a.isSuccess||a.success)&&a.data&&(a.data.content&&Array.isArray(a.data.content)?s=a.data.content:Array.isArray(a.data)&&(s=a.data));const i=e.map(e=>{const a=s.filter(a=>a.category&&a.category.id===e.id);return{id:e.id,name:e.name,description:e.description||"",productCount:a.length,image:a.length>0&&a[0].coverImageUrl?a[0].coverImageUrl:null}});l(i)}else{const a=e.map(e=>({id:e.id,name:e.name,description:e.description||"",productCount:0,image:null}));l(a)}}else p(a.message||"Kategoriler yüklenemedi")}else p("Kategoriler yüklenirken bir hata oluştu")}catch(e){p("Kategoriler yüklenirken bir hata oluştu")}finally{m(!1)}})()},[]),d?r.jsx("div",{className:"categories-page",children:r.jsx("div",{className:"categories-container",children:r.jsx(i,{size:"large",text:"Kategoriler yükleniyor...",variant:"page"})})}):g?r.jsx("div",{className:"categories-page",children:r.jsx("div",{className:"categories-container",children:r.jsxs("div",{className:"error-state",children:[r.jsx("p",{children:g}),r.jsx("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Tekrar Dene"})]})})}):r.jsxs(r.Fragment,{children:[r.jsx(t,{title:"Kategorilerimiz - Hiedra Home Collection",description:"Hiedra Home Collection'daki tüm perde kategorilerini keşfedin. Tül perde, zebra perde, klasik perde ve daha fazlası."}),r.jsx("div",{className:"categories-page",children:r.jsxs("div",{className:"categories-container",children:[r.jsxs("header",{className:"categories-header",children:[r.jsx("h1",{children:"Kategorilerimiz"}),r.jsx("p",{children:"Geniş ürün yelpazemizdeki kategorileri keşfedin"})]}),0===o.length?r.jsx("div",{className:"no-categories",children:r.jsx("p",{children:"Henüz kategori bulunmamaktadır."})}):r.jsx("div",{className:"categories-grid",children:o.map(e=>r.jsxs("div",{className:"category-card",onClick:()=>((e,a)=>{const r=a.toLowerCase().replace(/\s+/g,"-");n(`/kategori/${e}/${r}`)})(e.id,e.name),children:[r.jsxs("div",{className:"category-image-wrapper",children:[r.jsx(s,{src:e.image||"",alt:e.name,className:"category-image"}),r.jsx("div",{className:"category-overlay",children:r.jsxs("span",{className:"category-product-count",children:[e.productCount," Ürün"]})})]}),r.jsxs("div",{className:"category-info",children:[r.jsx("h2",{className:"category-name",children:e.name}),e.description&&r.jsx("p",{className:"category-description",children:e.description})]})]},e.id))})]})})]})};export{n as default};
