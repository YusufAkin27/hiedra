import{u as e,r as i,j as s}from"./react-vendor-DfawjiNX.js";import{a as n}from"./context-BBxaqZSG.js";import{L as r}from"./LazyImage-C7TWGQFV.js";import{L as a}from"./index-CWeyrpi3.js";import{S as l}from"./SEO-COBDhSYn.js";import"./vendor-invariant-GfE-dftQ.js";import"./vendor-shallowequal-DDPVF0Lr.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BfCtOoOM.js";const o=()=>{const o=e(),[c,t]=i.useState([]),[d,p]=i.useState(!0),[u,h]=i.useState(""),[m,x]=i.useState(null),{accessToken:j}=n();i.useEffect(()=>{v()},[j]);const v=async()=>{try{p(!0),h("");const e={"Content-Type":"application/json"};j&&(e.Authorization="Bearer "+j);const i=await fetch("http://localhost:8080/api/coupons",{headers:e}),s=await i.json();i.ok&&(s.isSuccess||s.success)?t(s.data||[]):h(s.message||"Kuponlar yüklenemedi")}catch(e){h("Kuponlar yüklenirken bir hata oluştu")}finally{p(!1)}},k=e=>"YUZDE"===e.type?"%"+e.discountValue:"SABIT_TUTAR"===e.type?e.discountValue+" ₺":""+e.discountValue,y={"@context":"https://schema.org","@type":"WebPage",name:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/kuponlar"};return d?s.jsxs("div",{className:"coupons-container",children:[s.jsx(l,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın.",url:"/kuponlar"}),s.jsx(a,{size:"large",text:"Kuponlar yükleniyor...",variant:"page"})]}):s.jsxs("div",{className:"coupons-container",children:[s.jsx(l,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",keywords:"kupon, indirim kuponu, kupon kodu, perde indirimi, kampanya, özel fırsat",url:"/kuponlar",structuredData:y}),u&&s.jsxs("div",{className:"error-message",children:[s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),s.jsx("span",{children:u})]}),!u&&0===c.length&&s.jsxs("div",{className:"no-coupons",children:[s.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),s.jsx("h2",{children:"Şu anda geçerli kupon bulunmuyor"}),s.jsx("p",{children:"Yeni kampanyalar ve özel fırsatlar için bizi takip edin!"}),s.jsx("button",{className:"back-to-shop-btn",onClick:()=>o("/"),children:"Alışverişe Dön"})]}),!u&&c.length>0&&s.jsx("div",{className:"coupons-grid",children:c.map(e=>{const i=(e=>{if(!e)return null;const i=Math.ceil((new Date(e)-new Date)/864e5);return i>0?i:0})(e.validUntil),n=null!==i&&7>=i&&i>0,a=!0===e.isPersonal;return s.jsxs("div",{className:"coupon-card-simple "+(a?"personal-coupon":""),onClick:()=>o("/kupon/"+e.id),children:[e.coverImageUrl?s.jsxs("div",{className:"coupon-cover-image-simple",children:[s.jsx(r,{src:e.coverImageUrl,alt:e.name}),a&&s.jsxs("div",{className:"personal-badge-simple",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),s.jsx("span",{children:"Size Özel"})]}),n&&s.jsxs("div",{className:"expiring-badge-simple",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),s.jsx("span",{children:"Yakında bitiyor"})]}),s.jsx("div",{className:"coupon-overlay",children:s.jsxs("div",{className:"coupon-discount-overlay",children:[s.jsx("span",{className:"discount-value-overlay",children:k(e)}),s.jsx("span",{className:"discount-label-overlay",children:"İndirim"})]})})]}):s.jsxs("div",{className:"coupon-header-simple",children:[s.jsxs("div",{className:"coupon-discount-badge-simple",children:[s.jsx("span",{className:"discount-value-simple",children:k(e)}),s.jsx("span",{className:"discount-label-simple",children:"İndirim"})]}),a&&s.jsxs("div",{className:"personal-badge-header-simple",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),s.jsx("span",{children:"Size Özel"})]}),n&&s.jsxs("div",{className:"expiring-badge-header-simple",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),s.jsx("span",{children:"Yakında bitiyor"})]})]}),s.jsx("div",{className:"coupon-body-simple",children:s.jsx("h3",{className:"coupon-name-simple",children:e.name})})]},e.id)})})]})};export{o as default};
