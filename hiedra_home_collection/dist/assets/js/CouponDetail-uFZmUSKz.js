import{e,u as s,r as a,j as l}from"./react-vendor-2SZXphvN.js";import{a as i}from"./context-DM-lvtsQ.js";import{L as n}from"./LazyImage-CfhoafY7.js";import{L as t}from"./index-DbqS-Y-U.js";import{S as c}from"./SEO-BxBC3DWO.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const r=()=>{const{id:r}=e(),d=s(),[o,h]=a.useState(null),[u,x]=a.useState(!0),[m,j]=a.useState(""),[p,v]=a.useState(!1),{accessToken:g}=i();a.useEffect(()=>{k()},[r,g]);const k=async()=>{try{x(!0),j("");const e={"Content-Type":"application/json"};g&&(e.Authorization="Bearer "+g);const s=await fetch("http://localhost:8080/api/coupons",{headers:e}),a=await s.json();if(s.ok&&(a.isSuccess||a.success)){const e=(a.data||[]).find(e=>e.id===parseInt(r));e?h(e):j("Kupon bulunamadı")}else j(a.message||"Kupon yüklenemedi")}catch(e){j("Kupon yüklenirken bir hata oluştu")}finally{x(!1)}},N=e=>e?new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"";if(u)return l.jsxs("div",{className:"coupon-detail-container",children:[l.jsx(c,{title:"Kupon Detayı | Hiedra Perde",description:"Kupon detaylarını görüntüleyin.",url:"/kupon/"+r}),l.jsx(t,{size:"large",text:"Kupon yükleniyor...",variant:"page"})]});if(m||!o)return l.jsxs("div",{className:"coupon-detail-container",children:[l.jsx(c,{title:"Kupon Bulunamadı | Hiedra Perde",description:"Kupon bulunamadı.",url:"/kupon/"+r}),l.jsxs("div",{className:"error-state",children:[l.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),l.jsx("h2",{children:m||"Kupon bulunamadı"}),l.jsx("button",{className:"back-btn",onClick:()=>d("/kuponlar"),children:"Kuponlara Dön"})]})]});const y=(e=>{if(!e)return null;const s=Math.ceil((new Date(e)-new Date)/864e5);return s>0?s:0})(o.validUntil),w=null!==y&&7>=y&&y>0,b=!0===o.isPersonal,f=o.maxUsageCount>0?o.maxUsageCount-o.currentUsageCount:null,C=o.maxUsageCount>0,K=null!==f&&f>0&&10>=f,B=o.maxUsageCount>0?Math.round(o.currentUsageCount/o.maxUsageCount*100):0;return l.jsxs("div",{className:"coupon-detail-container",children:[l.jsx(c,{title:o.name+" - Kupon Detayı | Hiedra Perde",description:o.description||"Özel indirim kuponu: "+o.name,url:"/kupon/"+r}),l.jsxs("button",{className:"back-to-coupons-btn",onClick:()=>d("/kuponlar"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Kuponlara Dön"]}),l.jsxs("div",{className:"coupon-detail-card",children:[o.coverImageUrl&&l.jsxs("div",{className:"coupon-detail-cover",children:[l.jsx(n,{src:o.coverImageUrl,alt:o.name}),b&&l.jsxs("div",{className:"personal-badge-detail",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),l.jsx("span",{children:"Size Özel"})]})]}),l.jsxs("div",{className:"coupon-detail-header",children:[l.jsxs("div",{className:"coupon-detail-discount",children:[l.jsx("span",{className:"discount-value-large",children:(U=o,"YUZDE"===U.type?"%"+U.discountValue:"SABIT_TUTAR"===U.type?U.discountValue+" ₺":""+U.discountValue)}),l.jsx("span",{className:"discount-label-large",children:"İndirim"})]}),l.jsxs("div",{className:"coupon-detail-badges",children:[w&&l.jsxs("div",{className:"expiring-badge-detail",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),l.jsxs("span",{children:["Yakında bitiyor (",y," gün kaldı)"]})]}),C&&l.jsxs("div",{className:"limited-usage-badge-detail",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),l.jsx("span",{children:"Sınırlı Kullanım"})]})]})]}),l.jsxs("div",{className:"coupon-detail-body",children:[l.jsx("h1",{className:"coupon-detail-name",children:o.name}),o.description&&l.jsx("p",{className:"coupon-detail-description",children:o.description}),l.jsxs("div",{className:"coupon-detail-code-section",children:[l.jsx("label",{className:"coupon-code-label-detail",children:"Kupon Kodu"}),l.jsxs("div",{className:"coupon-code-detail",children:[l.jsx("span",{className:"code-text-detail",children:o.code}),l.jsx("button",{className:"copy-btn-detail",onClick:()=>{return e=o.code,void navigator.clipboard.writeText(e).then(()=>{v(!0),setTimeout(()=>v(!1),2e3)});var e},title:"Kopyala",children:p?l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})}):l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),p&&l.jsx("div",{className:"copy-success-detail",children:"Kupon kodu kopyalandı!"})]}),l.jsxs("div",{className:"coupon-detail-info",children:[l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{className:"detail-section-title",children:"Geçerlilik Tarihleri"}),l.jsxs("div",{className:"detail-item-detail",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),l.jsxs("div",{className:"detail-content-detail",children:[l.jsx("span",{className:"detail-label-detail",children:"Başlangıç:"}),l.jsx("span",{className:"detail-value-detail",children:N(o.validFrom)})]})]}),l.jsxs("div",{className:"detail-item-detail",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),l.jsxs("div",{className:"detail-content-detail",children:[l.jsx("span",{className:"detail-label-detail",children:"Bitiş:"}),l.jsx("span",{className:"detail-value-detail",children:N(o.validUntil)}),null!==y&&y>0&&l.jsxs("span",{className:"remaining-days-detail",children:["(",y," gün kaldı)"]})]})]})]}),o.minimumPurchaseAmount&&l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{className:"detail-section-title",children:"Kullanım Koşulları"}),l.jsxs("div",{className:"detail-item-detail",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),l.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),l.jsxs("div",{className:"detail-content-detail",children:[l.jsx("span",{className:"detail-label-detail",children:"Minimum Alışveriş Tutarı:"}),l.jsxs("span",{className:"detail-value-detail",children:[parseFloat(o.minimumPurchaseAmount).toFixed(2)," ₺"]})]})]})]}),C&&l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{className:"detail-section-title",children:"Kullanım Bilgileri"}),l.jsxs("div",{className:"detail-item-detail",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),l.jsxs("div",{className:"detail-content-detail",children:[l.jsx("span",{className:"detail-label-detail",children:"Kalan Kullanım:"}),l.jsx("span",{className:"detail-value-detail "+(K?"low-stock":""),children:null!==f&&f>0?l.jsxs(l.Fragment,{children:[l.jsx("strong",{children:f})," kullanım hakkı kaldı",K&&l.jsx("span",{className:"low-stock-badge-detail",children:"Az kaldı!"})]}):l.jsx("span",{className:"out-of-stock-detail",children:"Kullanım hakkı kalmadı"})}),l.jsxs("div",{className:"usage-info-detail",children:[l.jsxs("span",{className:"usage-text-detail",children:[o.currentUsageCount," / ",o.maxUsageCount," kullanıldı"]}),l.jsx("div",{className:"usage-bar-detail",children:l.jsx("div",{className:"usage-bar-fill-detail "+(K?"low-stock-bar":""),style:{width:B+"%"}})})]})]})]})]})]}),l.jsx("div",{className:"coupon-detail-actions",children:l.jsxs("button",{className:"use-coupon-btn-detail",onClick:()=>d("/cart"),children:[l.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),l.jsx("circle",{cx:"7",cy:"20",r:"2"}),l.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),"Sepete Git ve Kullan"]})})]})]})]});var U};export{r as default};
