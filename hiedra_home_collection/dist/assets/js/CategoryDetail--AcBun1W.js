import{e,u as a,r as i,j as s}from"./react-vendor-DfawjiNX.js";import{u as t}from"./context-BBxaqZSG.js";import{L as r}from"./LazyImage-C7TWGQFV.js";import{L as n}from"./index-CWeyrpi3.js";import{S as l}from"./SEO-COBDhSYn.js";import"./vendor-invariant-GfE-dftQ.js";import"./vendor-shallowequal-DDPVF0Lr.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BfCtOoOM.js";const c="http://localhost:8080/api",o=()=>{const{categoryId:o,categorySlug:d}=e(),h=a(),{addToCart:x}=t(),[g,m]=i.useState(null),[p,u]=i.useState([]),[j,y]=i.useState(null),[v,k]=i.useState(!0),[f,N]=i.useState(""),[w,C]=i.useState(!1);return i.useEffect(()=>{o&&(async()=>{try{k(!0),N("");const e=await fetch(`${c}/products/category/${o}?page=0&size=1000`);if(e.ok){const a=await e.json();if(a.isSuccess||a.success){let e=[];a.data&&(a.data.content&&Array.isArray(a.data.content)?e=a.data.content:Array.isArray(a.data)&&(e=a.data));const i=await fetch(`${c}/categories/${o}`);if(i.ok){const a=await i.json();a.isSuccess||a.success?m({id:a.data.id,name:a.data.name,description:a.data.description||""}):e.length>0&&e[0].category&&m({id:e[0].category.id,name:e[0].category.name,description:e[0].category.description||""})}else e.length>0&&e[0].category&&m({id:e[0].category.id,name:e[0].category.name,description:e[0].category.description||""});const s=e.filter(e=>(e.quantity||0)>0).map(e=>({id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",detailImages:e.detailImageUrl?[e.detailImageUrl]:[],description:e.description||e.shortDescription||"",shortDescription:e.shortDescription||"",category:e.category?.name||"Genel",color:e.color||"",inStock:(e.quantity||0)>0,productCode:e.productCode||e.code||e.sku||"",quantity:e.quantity||0,mountingType:e.mountingType||"",material:e.material||"",lightTransmittance:e.lightTransmittance||"",pieceCount:e.pieceCount||null,usageArea:e.usageArea||"",reviewCount:e.reviewCount||0,averageRating:e.averageRating||0,viewCount:e.viewCount||0}));u(s),s.length>0&&y(s[0])}else N(a.message||"Ürünler yüklenemedi")}else N("Ürünler yüklenirken bir hata oluştu")}catch(e){N("Ürünler yüklenirken bir hata oluştu")}finally{k(!1)}})()},[o]),v?s.jsx("div",{className:"category-detail-page",children:s.jsx("div",{className:"category-detail-container",children:s.jsx(n,{size:"large",text:"Ürünler yükleniyor...",variant:"page"})})}):f?s.jsx("div",{className:"category-detail-page",children:s.jsx("div",{className:"category-detail-container",children:s.jsxs("div",{className:"error-state",children:[s.jsx("p",{children:f}),s.jsx("button",{onClick:()=>h("/kategoriler"),className:"back-btn",children:"Kategorilere Dön"})]})})}):g&&0!==p.length?s.jsxs(s.Fragment,{children:[s.jsx(l,{title:g.name+" - Hiedra Home Collection",description:`${g.name} kategorisindeki tüm ürünleri keşfedin. ${p.length} ürün bulunmaktadır.`}),s.jsx("div",{className:"category-detail-page",children:s.jsxs("div",{className:"category-detail-container",children:[s.jsxs("div",{className:"category-header",children:[s.jsxs("button",{onClick:()=>h("/kategoriler"),className:"back-to-categories",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Kategorilere Dön"]}),s.jsx("h1",{children:g.name}),g.description&&s.jsx("p",{className:"category-description",children:g.description}),s.jsxs("p",{className:"product-count",children:[p.length," ürün bulundu"]})]}),j&&s.jsxs("div",{className:"category-product-showcase",children:[s.jsx("div",{className:"product-image-section",children:s.jsxs("div",{className:"main-product-image-wrapper",children:[s.jsx(r,{src:j.image||"",alt:j.name,className:"main-product-image"}),j.detailImages&&j.detailImages.length>0&&j.detailImages[0]&&s.jsxs("div",{className:"detail-image-preview",onClick:()=>C(!0),title:"Detay fotoğrafını görüntüle",children:[s.jsx("div",{className:"detail-image-preview-overlay",children:s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("path",{d:"m21 21-4.35-4.35"})]})}),s.jsx(r,{src:j.detailImages[0],alt:j.name+" detay",className:"detail-image-preview-img"})]})]})}),s.jsxs("div",{className:"product-details-section",children:[s.jsxs("div",{className:"product-header-info",children:[s.jsx("h2",{className:"product-title",children:j.name}),j.productCode&&s.jsxs("p",{className:"product-code",children:["Kod: ",j.productCode]}),(j.averageRating>0||j.reviewCount>0)&&s.jsxs("div",{className:"product-rating-section",children:[s.jsx("div",{className:"product-rating-stars",children:[1,2,3,4,5].map(e=>{const a=e<=Math.floor(j.averageRating),i=!a&&e-.5<=j.averageRating,t=`half-gradient-${j.id}-${e}`;return s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:a?"#FFD700":i?`url(#${t})`:"none",stroke:a||i?"#FFD700":"#ddd",strokeWidth:"2",children:[i&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:t,children:[s.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),s.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})]},e)})}),j.averageRating>0&&s.jsx("span",{className:"product-rating-value",children:j.averageRating.toFixed(1)}),j.reviewCount>0&&s.jsxs("span",{className:"product-review-count",children:["(",j.reviewCount," değerlendirme)"]})]}),s.jsxs("div",{className:"product-price-large",children:[s.jsx("span",{className:"price-label",children:"Başlangıç:"}),s.jsxs("span",{className:"price-value",children:[j.price.toFixed(2)," ₺"]})]})]}),p.length>0&&s.jsxs("div",{className:"color-selection-section",children:[s.jsx("h3",{className:"color-selection-title",children:"RENK SEÇİMİ"}),s.jsx("div",{className:"color-options",children:p.map(e=>{const a=(e=>{if(!e)return null;const a=e.trim();return a.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a)?a:{beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF","yeşil":"#008000",green:"#008000","kırmızı":"#FF0000",red:"#FF0000","sarı":"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"}[a.toLowerCase()]||a})(e.color);return s.jsxs("button",{className:"color-option "+(j.id===e.id?"active":""),onClick:()=>(e=>{y(e)})(e),title:e.color||e.name,children:[s.jsx("div",{className:"color-swatch",style:{backgroundColor:a||"#ccc"},children:j.id===e.id&&s.jsx("div",{className:"color-checkmark",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),e.color&&s.jsx("span",{className:"color-name",children:e.color})]},e.id)})})]}),(j.mountingType||j.material||j.lightTransmittance||j.usageArea||j.pieceCount||j.color)&&s.jsxs("div",{className:"product-features",children:[j.mountingType&&s.jsxs("div",{className:"feature-tag",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),s.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),s.jsxs("span",{children:["Takma Şekli: ",j.mountingType]})]}),j.material&&s.jsxs("div",{className:"feature-tag",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),s.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),s.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),s.jsxs("span",{children:["Materyal: ",j.material]})]}),j.lightTransmittance&&s.jsxs("div",{className:"feature-tag",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),s.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),s.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),s.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),s.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),s.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),s.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),s.jsxs("span",{children:["Işık Geçirgenliği: ",j.lightTransmittance]})]}),j.usageArea&&s.jsxs("div",{className:"feature-tag",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),s.jsxs("span",{children:["Kullanım Alanı: ",j.usageArea]})]}),j.pieceCount&&j.pieceCount>0&&s.jsxs("div",{className:"feature-tag",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),s.jsxs("span",{children:["Parça Sayısı: ",j.pieceCount," Adet"]})]})]}),j.description&&s.jsx("div",{className:"product-description",children:s.jsx("p",{children:j.description})}),s.jsxs("button",{className:"view-product-detail-btn",onClick:()=>{return e=j.id,void h("/product/"+e);var e},children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),s.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Ürün Detayını Görüntüle"]})]})]})]})}),w&&j&&j.detailImages&&j.detailImages.length>0&&s.jsx("div",{className:"detail-modal-overlay",onClick:()=>C(!1),children:s.jsxs("div",{className:"detail-modal-content",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{className:"detail-modal-close",onClick:()=>C(!1),"aria-label":"Kapat",children:s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),s.jsx(r,{src:j.detailImages[0],alt:j.name+" detay",className:"detail-modal-image"})]})})]}):s.jsx("div",{className:"category-detail-page",children:s.jsx("div",{className:"category-detail-container",children:s.jsxs("div",{className:"no-products",children:[s.jsx("p",{children:"Bu kategoride henüz ürün bulunmamaktadır."}),s.jsx("button",{onClick:()=>h("/kategoriler"),className:"back-btn",children:"Kategorilere Dön"})]})})})};export{o as default};
