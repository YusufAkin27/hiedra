import{u as e,r as s,j as r}from"./react-vendor-2SZXphvN.js";import{a as i}from"./context-DM-lvtsQ.js";import{S as a}from"./SEO-BxBC3DWO.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const t="http://localhost:8080",n=t+"/api/orders",l=t+"/api/shipping",d=()=>{const{isAuthenticated:t}=i(),d=e(),[o,c]=s.useState(""),[m,u]=s.useState(""),[p,h]=s.useState(""),[x,g]=s.useState(!1),[j,y]=s.useState(null),[b,f]=s.useState(""),[k,N]=s.useState(!1),[v,S]=s.useState(!1),[w,C]=s.useState(!1),[D,E]=s.useState("MÃ¼ÅŸteri isteÄŸi"),[T,A]=s.useState("Ä°ade talebi"),[z,R]=s.useState(!1),[I,L]=s.useState({show:!1,message:"",type:"success"}),[P,B]=s.useState(null),[U,q]=s.useState(!1),[G,K]=s.useState([]),[O,$]=s.useState(""),[W,F]=s.useState(""),[V,Y]=s.useState("request"),[H,M]=s.useState(!1),[_,X]=s.useState(!1),[J,Q]=s.useState(null),Z=s.useRef(null),ee=()=>{const e={"Content-Type":"application/json"};return W&&(e["X-Order-Lookup-Token"]=W),e};s.useEffect(()=>{t&&d("/siparislerim")},[t,d]);const se=(e,s="success")=>{L({show:!0,message:e,type:s}),setTimeout(()=>{L({show:!1,message:"",type:"success"})},4e3)},[re,ie]=s.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:""}),ae=()=>{let e="";for(let s=0;5>s;s++)e+="ABCDEFGHJKLMNPQRSTUVWXYZ23456789".charAt(Math.floor(32*Math.random()));return e};s.useEffect(()=>{u(ae())},[]);const te=()=>{u(ae()),h(""),Z.current&&Z.current.focus()},ne=async e=>{if(e&&e.preventDefault&&e.preventDefault(),o.trim()&&o.includes("@")?p.trim()?p.toUpperCase()===m.toUpperCase()||(se("GÃ¼venlik kodu hatalÄ±! LÃ¼tfen tekrar deneyiniz.","error"),te(),0):(se("LÃ¼tfen gÃ¼venlik kodunu giriniz.","error"),0):(se("LÃ¼tfen geÃ§erli bir e-posta adresi giriniz.","error"),0)){M(!0),f("");try{const e=await fetch(n+"/lookup/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim()})}),s=await e.json();if(!(s.success??s.isSuccess??e.ok))throw Error(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi.");se("DoÄŸrulama kodu e-posta adresinize gÃ¶nderildi.","success"),$(""),F(""),K([]),y(null),Q(null),Y("verify")}catch(s){f(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi."),se(s.message||"DoÄŸrulama kodu gÃ¶nderilemedi.","error")}finally{M(!1)}}},le=async e=>{const s=e||W;if(s){g(!0),f(""),K([]);try{const e=await fetch(`${n}/lookup?token=${encodeURIComponent(s)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await e.json();if(!(r.success??r.isSuccess??e.ok))throw Error(r.message||"SipariÅŸler alÄ±namadÄ±.");K(r.data||[]),Y("list"),y(null),Q(null),N(!1),S(!1),C(!1)}catch(r){f(r.message||"SipariÅŸler alÄ±nÄ±rken bir hata oluÅŸtu."),se(r.message||"SipariÅŸler alÄ±nÄ±rken bir hata oluÅŸtu.","error")}finally{g(!1)}}},de=async(e,s)=>{if(!e)return;const r=W;if(r){g(!0),f("");try{const s=await fetch(`${n}/lookup/${e}?token=${encodeURIComponent(r)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await s.json();if(!s.ok||!(i.success??i.isSuccess))throw Error(i.message||"SipariÅŸ bulunamadÄ±");const a=i.data;if(!a)throw Error("SipariÅŸ bulunamadÄ±");y({...a,shippingAddress:a.addresses&&a.addresses.length>0?a.addresses[0]:{}});const t=a.addresses&&a.addresses.length>0?a.addresses[0]:{};ie({fullName:a.customerName||"",phone:a.customerPhone||"",addressLine:t.addressLine||"",addressDetail:t.addressDetail||"",city:t.city||"",district:t.district||""}),Q(a.orderNumber),N(!1),S(!1),C(!1),Y("detail"),a.trackingNumber?oe(a.orderNumber,o.trim()):B(null)}catch(i){f(i.message||"SipariÅŸ detaylarÄ± alÄ±nÄ±rken bir hata oluÅŸtu")}finally{g(!1)}}else se("LÃ¼tfen Ã¶nce doÄŸrulama iÅŸlemini tamamlayÄ±n.","error")},oe=async(e,s)=>{if(e&&s)try{q(!0);const r=new URL(l+"/track-by-order");r.searchParams.append("orderNumber",e),r.searchParams.append("email",s);const i=await fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await i.json();a.isSuccess||a.success?B(a.data):B(null)}catch(r){B(null)}finally{q(!1)}},ce=e=>{if(!e)return"";try{return new Date(e).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},me=()=>{c(""),h(""),y(null),K([]),f(""),N(!1),S(!1),C(!1),B(null),F(""),$(""),Q(null),Y("request"),te()},ue=e=>{ie({...re,[e.target.name]:e.target.value})},pe=()=>{if(!j||!j.status)return!1;const e=j.status.toUpperCase();return"SHIPPED"===e||"DELIVERED"===e},he=()=>{if(!j||!j.status)return!1;const e=j.status.toUpperCase();return"PAID"===e||"PROCESSING"===e};s.useEffect(()=>{!he()&&k&&N(!1)},[j]);const xe=e=>e?{PENDING:"Beklemede",PAID:"Ã–dendi",PROCESSING:"HazÄ±rlanÄ±yor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"Ä°ptal Edildi",REFUNDED:"Ä°ade Edildi"}[e.toUpperCase()]||e:"Bilinmiyor",ge={"@context":"https://schema.org","@type":"WebPage",name:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi",description:"Perde satÄ±ÅŸ sipariÅŸ durumu sorgulama sayfasÄ±. SipariÅŸ numaranÄ±z ile sipariÅŸinizin durumunu takip edin.",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/siparis-sorgula"},je=e=>{if(!e)return"/images/perde1kapak.jpg";let s=e.productImageUrl||e.coverImageUrl||"/images/perde1kapak.jpg";return s&&""!==s&&"null"!==s&&"undefined"!==s||(s="/images/perde1kapak.jpg"),s.startsWith("http")||s.startsWith("/")||(s="/"+s),s};return r.jsxs("div",{className:"order-lookup-container",children:[r.jsx(a,{title:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi | Hiedra Perde",description:"Perde satÄ±ÅŸ sipariÅŸ sorgulama sayfasÄ±. SipariÅŸinizin durumunu Ã¶ÄŸrenmek iÃ§in sipariÅŸ numaranÄ±zÄ± ve e-posta adresinizi giriniz. Hiedra Perde sipariÅŸ takip sistemi.",keywords:"sipariÅŸ sorgula, sipariÅŸ takip, perde satÄ±ÅŸ sipariÅŸ sorgulama, sipariÅŸ durumu, kargo takip, perde sipariÅŸ takibi",url:"/siparis-sorgula",structuredData:ge}),r.jsxs("header",{className:"lookup-header",children:[r.jsx("h1",{children:"SipariÅŸ Sorgula - Perde SatÄ±ÅŸ SipariÅŸ Takibi"}),r.jsx("p",{children:"Perde satÄ±ÅŸ sipariÅŸinizin durumunu takip etmek iÃ§in bilgilerinizi giriniz"})]}),"request"===V&&r.jsxs("div",{className:"lookup-form-container",children:[b&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:b}),r.jsxs("form",{className:"lookup-form",onSubmit:ne,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["E-posta Adresi ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"email",id:"email",value:o,onChange:e=>c(e.target.value),placeholder:"siparis@email.com",required:!0}),r.jsx("p",{className:"form-hint",children:"SipariÅŸ verdiÄŸiniz e-posta adresini giriniz"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"captcha",children:["GÃ¼venlik Kodu ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{className:"captcha-container",children:[r.jsxs("div",{className:"captcha-display",onClick:te,children:[r.jsx("span",{className:"captcha-text",children:m}),r.jsx("button",{type:"button",className:"captcha-refresh",onClick:e=>{e.preventDefault(),te()},title:"Yenile",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("polyline",{points:"23 4 23 10 17 10"}),r.jsx("polyline",{points:"1 20 1 14 7 14"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),r.jsx("input",{ref:Z,type:"text",id:"captcha",value:p,onChange:e=>h(e.target.value.toUpperCase()),placeholder:"YukarÄ±daki kodu giriniz",required:!0,maxLength:"5",className:"captcha-input"})]}),r.jsx("p",{className:"form-hint",children:"YukarÄ±daki kodu giriniz (bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k harf duyarsÄ±z)"})]}),r.jsx("button",{type:"submit",className:"lookup-btn",disabled:H,children:H?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Kod GÃ¶nderiliyor..."]}):"DoÄŸrulama Kodunu GÃ¶nder"})]})]}),"verify"===V&&r.jsxs("div",{className:"lookup-form-container",children:[b&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:b}),r.jsxs("div",{className:"verification-info",children:[r.jsx("h3",{children:"Kodunuzu Girin"}),r.jsxs("p",{children:[o," adresine gÃ¶nderdiÄŸimiz 6 haneli kodu girerek sipariÅŸlerinizi gÃ¶rÃ¼ntÃ¼leyebilirsiniz."]})]}),r.jsxs("form",{className:"lookup-form",onSubmit:async e=>{if(e&&e.preventDefault&&e.preventDefault(),O.trim()){X(!0),f("");try{const e=await fetch(n+"/lookup/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim(),code:O.trim()})}),s=await e.json();if(!(s.success??s.isSuccess??e.ok)||!s.data?.lookupToken)throw Error(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z.");const r=s.data.lookupToken;F(r),se("DoÄŸrulama baÅŸarÄ±lÄ±. SipariÅŸleriniz yÃ¼kleniyor...","success"),await le(r)}catch(s){f(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z oldu."),se(s.message||"DoÄŸrulama baÅŸarÄ±sÄ±z oldu.","error")}finally{X(!1)}}else se("LÃ¼tfen e-posta adresinize gelen doÄŸrulama kodunu giriniz.","error")},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"verificationCode",children:["DoÄŸrulama Kodu ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"verificationCode",value:O,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"Ã–rn: 123456",required:!0,maxLength:"6"}),r.jsx("p",{className:"form-hint",children:"Kod gelmediyse birkaÃ§ dakika bekleyip tekrar gÃ¶nderebilirsiniz."})]}),r.jsx("button",{type:"submit",className:"lookup-btn",disabled:_,children:_?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"DoÄŸrulanÄ±yor..."]}):"Kodumu DoÄŸrula"})]}),r.jsx("button",{className:"link-button",type:"button",onClick:async()=>{await ne()},disabled:H,children:"Kod gelmedi mi? Tekrar gÃ¶nder"})]}),"list"===V&&r.jsxs("div",{className:"order-list-container",children:[b&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:b}),r.jsxs("div",{className:"order-list-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:[o," adresine ait sipariÅŸler"]}),r.jsx("p",{children:"Detay gÃ¶rmek istediÄŸiniz sipariÅŸi seÃ§in."})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("button",{className:"new-lookup-btn",onClick:()=>le(),children:"SipariÅŸleri Yenile"}),r.jsx("button",{className:"new-lookup-btn",onClick:me,children:"â† Yeni E-posta ile Sorgula"})]})]}),0===G.length?r.jsx("div",{className:"empty-orders",children:r.jsx("p",{children:"Bu e-posta ile iliÅŸkili sipariÅŸ bulunamadÄ±."})}):r.jsx("div",{className:"order-list",children:G.map(e=>r.jsxs("div",{className:"order-card",children:[r.jsxs("div",{className:"order-card-header",children:[r.jsxs("h4",{children:["SipariÅŸ No: ",e.orderNumber]}),r.jsx("span",{className:"status-badge "+(e.status||"").toLowerCase().replace(/\s+/g,"-"),children:xe(e.status)})]}),r.jsxs("div",{className:"order-card-body",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Tarih:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString("tr-TR"):"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Toplam:"})," ",e.totalAmount?parseFloat(e.totalAmount).toFixed(2):"0.00"," â‚º"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"ÃœrÃ¼n:"})," ",e.orderItems&&e.orderItems[0]?.productName||"N/A"]})]}),r.jsx("button",{type:"button",className:"new-lookup-btn",onClick:()=>(async e=>{const s="string"==typeof e?e:e?.orderNumber;s&&await de(s)})(e.orderNumber),children:"DetayÄ± GÃ¶r"})]},e.orderNumber))})]}),"detail"===V&&j&&r.jsxs("div",{className:"order-details-container",children:[b&&r.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:b}),r.jsxs("div",{className:"order-header-actions",children:[r.jsxs("div",{className:"action-buttons",style:{gap:"0.5rem",flexWrap:"wrap"},children:[r.jsx("button",{onClick:me,className:"new-lookup-btn",children:"â† Yeni E-posta ile Sorgula"}),W&&r.jsx("button",{onClick:()=>{y(null),N(!1),S(!1),C(!1),B(null),Y("list")},className:"new-lookup-btn",children:"â† SipariÅŸ Listesine DÃ¶n"})]}),r.jsxs("div",{className:"action-buttons",children:[(()=>{if(!j||!j.status)return!1;const e=j.status.toUpperCase();return"PENDING"===e||"PAID"===e||"PROCESSING"===e})()&&r.jsx("button",{onClick:()=>S(!0),className:"cancel-btn",disabled:z,children:"SipariÅŸi Ä°ptal Et"}),pe()&&r.jsx("button",{onClick:()=>C(!0),className:"refund-btn",disabled:z,children:"Ä°ade Talep Et"}),he()&&r.jsx("button",{onClick:()=>N(!k),className:"update-address-btn",children:k?"Adres Formunu Kapat":"Adresi GÃ¼ncelle"})]})]}),r.jsx("div",{className:"order-status-card",children:r.jsxs("div",{className:"status-header",children:[r.jsxs("div",{className:"status-info",children:[r.jsxs("h3",{children:["SipariÅŸ No: ",j.orderNumber]}),r.jsx("span",{className:"status-badge "+(j.status||"").toLowerCase().replace(/\s+/g,"-"),children:xe(j.status)})]}),r.jsxs("div",{className:"order-date",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),j.createdAt?new Date(j.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]})}),k&&he()&&r.jsxs("div",{className:"order-section address-form-section",children:[r.jsx("h3",{children:"Adres GÃ¼ncelle"}),r.jsxs("div",{className:"address-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Ad Soyad ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"fullName",value:re.fullName,onChange:ue,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Telefon ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"phone",value:re.phone,onChange:ue,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Adres SatÄ±rÄ± ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"addressLine",value:re.addressLine,onChange:ue,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Adres DetayÄ±"}),r.jsx("input",{type:"text",name:"addressDetail",value:re.addressDetail,onChange:ue})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Åžehir ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"city",value:re.city,onChange:ue,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Ä°lÃ§e ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",name:"district",value:re.district,onChange:ue,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),r.jsx("button",{onClick:async()=>{if(re.fullName&&re.phone&&re.addressLine&&re.city&&re.district){R(!0),f("");try{const e=await fetch(`${n}/${j.orderNumber}/address?email=${encodeURIComponent(o)}`,{method:"PUT",headers:ee(),body:JSON.stringify({orderNumber:j.orderNumber,fullName:re.fullName,phone:re.phone,addressLine:re.addressLine,addressDetail:re.addressDetail||"",city:re.city,district:re.district})});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"Adres gÃ¼ncellenemedi");s.success&&(se("Adres baÅŸarÄ±yla gÃ¼ncellendi!","success"),N(!1),await de(j.orderNumber))}catch(e){f(e.message||"Adres gÃ¼ncellenirken bir hata oluÅŸtu")}finally{R(!1)}}else se("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurunuz.","error")},className:"lookup-btn",disabled:z,children:z?"GÃ¼ncelleniyor...":"Adresi GÃ¼ncelle"})]})]}),r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"SipariÅŸ DetaylarÄ±"}),r.jsx("div",{className:"order-items",children:j.orderItems&&j.orderItems.length>0?j.orderItems.map((e,s)=>r.jsxs("div",{className:"order-item",children:[r.jsx("div",{className:"item-image",children:r.jsx("img",{src:je(e),alt:e.productName||"SipariÅŸ Ã¼rÃ¼nÃ¼",loading:"lazy"})}),r.jsxs("div",{className:"item-info",children:[r.jsx("h4",{children:e.productName||"ÃœrÃ¼n"}),r.jsxs("div",{className:"item-customizations",children:[e.width&&r.jsxs("span",{children:["En: ",e.width," cm"]}),e.height&&r.jsxs("span",{children:["Boy: ",e.height," cm"]}),e.pleatType&&r.jsxs("span",{children:["Pile: ","pilesiz"===e.pleatType?"Pilesiz":e.pleatType]})]}),r.jsxs("span",{className:"item-quantity",children:["Adet: ",e.quantity||1]})]})]},s)):r.jsx("p",{children:"SipariÅŸ detayÄ± bulunamadÄ±"})}),pe()&&r.jsx("button",{type:"button",className:"inline-refund-btn",onClick:()=>C(!0),children:"Bu ÃœrÃ¼n Ä°Ã§in Ä°ade Talebi OluÅŸtur"}),r.jsxs("div",{className:"order-total",children:[r.jsx("span",{children:"Toplam:"}),r.jsxs("span",{children:[j.totalAmount?parseFloat(j.totalAmount).toFixed(2):"0.00"," â‚º"]})]})]}),r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Teslimat Adresi"}),r.jsxs("div",{className:"address-details",children:[j.shippingAddress&&r.jsxs(r.Fragment,{children:[j.shippingAddress.addressLine&&r.jsx("p",{children:j.shippingAddress.addressLine}),j.shippingAddress.addressDetail&&r.jsx("p",{children:j.shippingAddress.addressDetail}),(j.shippingAddress.district||j.shippingAddress.city)&&r.jsxs("p",{children:[j.shippingAddress.district||""," ",j.shippingAddress.district&&j.shippingAddress.city?"/":""," ",j.shippingAddress.city||""]})]}),(!j.shippingAddress||!j.shippingAddress.addressLine&&!j.shippingAddress.city)&&r.jsx("p",{children:"Adres bilgisi bulunamadÄ±"})]})]}),j.cancelReason&&r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Ä°ptal Bilgisi"}),r.jsxs("div",{className:"address-details",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Sebep:"})," ",j.cancelReason]}),j.cancelledAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Ä°ptal Tarihi:"})," ",new Date(j.cancelledAt).toLocaleDateString("tr-TR")]})]})]}),j.refundedAt&&r.jsxs("div",{className:"order-section",children:[r.jsx("h3",{children:"Ä°ade Bilgisi"}),r.jsx("div",{className:"address-details",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Ä°ade Tarihi:"})," ",new Date(j.refundedAt).toLocaleDateString("tr-TR")]})})]}),j.trackingNumber&&r.jsxs("div",{className:"order-section tracking-section",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",border:"1px solid #e0e0e0"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0},children:"ðŸ“¦ Kargo Takip Bilgileri"}),r.jsx("button",{onClick:()=>oe(j.orderNumber,o),disabled:U,style:{padding:"0.5rem 1rem",background:U?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:U?"not-allowed":"pointer",fontSize:"0.9rem",opacity:U?.6:1},children:U?"YÃ¼kleniyor...":"ðŸ”„ GÃ¼ncelle"})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Takip NumarasÄ±:"})," ",j.trackingNumber]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Kargo FirmasÄ±:"})," ",j.carrier||"DHL"]}),j.shippedAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Kargoya Verilme:"})," ",new Date(j.shippedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),U?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:r.jsx("p",{children:"Kargo bilgileri yÃ¼kleniyor..."})}):P?r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"600",backgroundColor:"DELIVERED"===P.status?"#d4edda":"IN_TRANSIT"===P.status?"#d1ecf1":"EXCEPTION"===P.status?"#f8d7da":"#fff3cd",color:"DELIVERED"===P.status?"#155724":"IN_TRANSIT"===P.status?"#0c5460":"EXCEPTION"===P.status?"#721c24":"#856404"},children:(ye=P.status,ye?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo AlÄ±ndÄ±",OUT_FOR_DELIVERY:"Teslimat Ä°Ã§in Yola Ã‡Ä±ktÄ±"}[ye.toUpperCase()]||ye:"Bilinmiyor")}),P.statusDescription&&r.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:P.statusDescription})]}),P.events&&P.events.length>0&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"1rem"},children:"Kargo Hareketleri"}),r.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[P.events.slice(0,5).map((e,s)=>r.jsxs("div",{style:{padding:"0.75rem",marginBottom:"0.5rem",background:"white",borderRadius:"6px",borderLeft:"4px solid #667eea",fontSize:"0.9rem"},children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",color:"#333"},children:ce(e.timestamp)}),e.location&&r.jsxs("div",{style:{color:"#64748b",marginBottom:"0.25rem"},children:["ðŸ“ ",e.location]}),e.description&&r.jsx("div",{style:{color:"#333"},children:e.description})]},s)),P.events.length>5&&r.jsxs("p",{style:{textAlign:"center",color:"#64748b",fontSize:"0.85rem",marginTop:"0.5rem"},children:["+",P.events.length-5," hareket daha"]})]})]}),r.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:r.jsx("a",{href:`/kargo-takip?trackingNumber=${j.trackingNumber}&orderNumber=${j.orderNumber}`,style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"600"},children:"â†’ DetaylÄ± Takip Bilgisi"})})]}):r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:r.jsx("p",{children:'Kargo takip bilgisi henÃ¼z gÃ¼ncellenmedi. "GÃ¼ncelle" butonuna tÄ±klayarak en gÃ¼ncel bilgileri alabilirsiniz.'})})]}),v&&r.jsx("div",{className:"modal-overlay",onClick:()=>!z&&S(!1),children:r.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{children:"SipariÅŸi Ä°ptal Et"}),r.jsx("p",{children:"SipariÅŸinizi iptal etmek istediÄŸinizden emin misiniz?"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Ä°ptal Sebebi"}),r.jsx("textarea",{value:D,onChange:e=>E(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>S(!1),disabled:z,children:"Ä°ptal"}),r.jsx("button",{onClick:async()=>{R(!0),f("");try{const e=await fetch(`${n}/${j.orderNumber}/cancel?email=${encodeURIComponent(o)}&reason=${encodeURIComponent(D)}`,{method:"POST",headers:ee()});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"SipariÅŸ iptal edilemedi");s.success&&(se("SipariÅŸ iptal talebiniz alÄ±ndÄ±!","success"),S(!1),await de(j.orderNumber))}catch(e){f(e.message||"SipariÅŸ iptal edilirken bir hata oluÅŸtu")}finally{R(!1)}},disabled:z,className:"confirm-btn",children:z?"Ä°ÅŸleniyor...":"Onayla"})]})]})}),w&&r.jsx("div",{className:"modal-overlay",onClick:()=>!z&&C(!1),children:r.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{children:"Ä°ade Talebi OluÅŸtur"}),r.jsx("p",{children:"Ä°ade talebi oluÅŸturmak istediÄŸinizden emin misiniz?"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Ä°ade Sebebi"}),r.jsx("textarea",{value:T,onChange:e=>A(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>C(!1),disabled:z,children:"Ä°ptal"}),r.jsx("button",{onClick:async()=>{R(!0),f("");try{const e=await fetch(`${n}/${j.orderNumber}/refund?email=${encodeURIComponent(o)}&reason=${encodeURIComponent(T)}`,{method:"POST",headers:ee()});let s;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanÄ±t formatÄ±");if(s=await e.json(),!e.ok)throw Error(s.message||"Ä°ade talebi oluÅŸturulamadÄ±");s.success&&(se("Ä°ade talebiniz alÄ±ndÄ±!","success"),C(!1),await de(j.orderNumber))}catch(e){f(e.message||"Ä°ade talebi oluÅŸturulurken bir hata oluÅŸtu")}finally{R(!1)}},disabled:z,className:"confirm-btn",children:z?"Ä°ÅŸleniyor...":"Onayla"})]})]})})]}),I.show&&r.jsxs("div",{className:"toast-notification toast-"+I.type,children:[r.jsxs("div",{className:"toast-content",children:["success"===I.type&&r.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"error"===I.type&&r.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),r.jsx("span",{className:"toast-message",children:I.message})]}),r.jsx("button",{className:"toast-close",onClick:()=>L({show:!1,message:"",type:"success"}),"aria-label":"Kapat",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]});var ye};export{d as default};
