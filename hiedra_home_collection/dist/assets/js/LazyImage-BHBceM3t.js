import{r as e,j as i}from"./react-vendor-DfawjiNX.js";import{L as t}from"./index-Zimv_-Zl.js";const r=(e,i=null)=>{if(!e)return e;if(e.includes("res.cloudinary.com")){const t=[];if(i&&t.push("w_"+i),t.push("q_auto","f_webp","c_limit"),e.includes("/image/upload/")){const i=e.split("/image/upload/");if(2===i.length)return`${i[0]}/image/upload/${t.join(",")}/${i[1]}`}if(e.includes("/image/upload"))return e.replace("/image/upload","/image/upload/"+t.join(","))}return e},s=({src:s,alt:a,className:l="",placeholder:o=null,onLoad:n=null,sizes:c=null,srcSet:d=null,isLCP:h=!1,...u})=>{const[g,m]=e.useState(!1),[p,x]=e.useState(!1),[j,w]=e.useState(!1),y=e.useRef(null);e.useEffect(()=>{const e=new IntersectionObserver(i=>{i.forEach(i=>{i.isIntersecting&&(x(!0),y.current&&e.unobserve(y.current))})},{rootMargin:"100px",threshold:.01}),i=y.current;return i&&e.observe(i),()=>{i&&e.unobserve(i),e.disconnect()}},[]);const f=o||i.jsx("div",{className:"lazy-image-placeholder",children:i.jsx(t,{size:"small",variant:"image"})}),v=u.width&&u.height?{aspectRatio:`${u.width} / ${u.height}`}:{},z=r(s,u.width),b=d||(s?((e,i=[400,800,1200,1920])=>e?e.includes("res.cloudinary.com")?i.map(i=>`${r(e,i)} ${i}w`).join(", "):e:"")(s):""),$=c||(u.width?u.width+"px":"100vw"),L=h?"high":u.fetchPriority||"auto",N=h?"eager":"lazy";return i.jsxs("div",{ref:y,className:"lazy-image-wrapper "+l,style:v,...u,children:[!g&&!j&&f,p||h?i.jsx(i.Fragment,{children:j?i.jsxs("div",{className:"lazy-image-error",children:[i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),i.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),i.jsx("path",{d:"M21 15l-5-5L5 21"})]}),i.jsx("span",{children:"Görsel yüklenemedi"})]}):i.jsx("img",{src:z,srcSet:b||void 0,sizes:$||void 0,alt:a,className:"lazy-image "+(g?"lazy-image-loaded":"lazy-image-loading"),onLoad:()=>{m(!0),n&&n()},onError:()=>{w(!0)},loading:N,decoding:"async",fetchpriority:L,width:u.width,height:u.height,style:{width:u.width?u.width+"px":"100%",height:u.height?u.height+"px":"auto",objectFit:u.objectFit||"cover"}})}):f]})};export{s as L};
