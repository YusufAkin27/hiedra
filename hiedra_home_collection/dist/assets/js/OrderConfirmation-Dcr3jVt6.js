import{a as s,u as e,f as i,d as a,r,j as n,L as t}from"./react-vendor-2SZXphvN.js";import{S as o}from"./SEO-BxBC3DWO.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const c=()=>{const c=s(),d=e(),[l]=i(),[m,h]=a.useState(null),[p,f]=a.useState(!0);if(r.useEffect(()=>{if("/payment-success"===c.pathname)return void d("/",{replace:!0});const s=l.get("order");let e=c.state?.orderData||null;if(!e)try{const s=sessionStorage.getItem("lastOrderData");s&&(e=JSON.parse(s),sessionStorage.removeItem("lastOrderData"))}catch(i){}if(s&&!e)try{const i=sessionStorage.getItem("checkoutData");if(i){const a=JSON.parse(i);e={orderNumber:s,contactInfo:a.contactInfo||{},addressInfo:a.addressInfo||{},cardInfo:a.cardInfo||{},items:a.items||[],totalPrice:a.totalPrice||0},sessionStorage.removeItem("checkoutData")}else e={orderNumber:s,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0}}catch(i){e={orderNumber:s,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0}}s&&!e&&(e={orderNumber:s,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0}),e?(h(e),f(!1)):d("/",{replace:!0})},[l,c,d]),p||!m)return n.jsxs("div",{className:"order-confirmation-container",style:{padding:"3rem",textAlign:"center"},children:[n.jsxs("div",{className:"loading-spinner",style:{margin:"2rem auto"},children:[n.jsx("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto"}}),n.jsx("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]}),n.jsx("p",{children:"Yükleniyor..."})]});const x=m.orderNumber||"ORD-"+Date.now(),j=(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),u={"@context":"https://schema.org","@type":"Order",orderNumber:x,orderDate:(new Date).toISOString(),customer:{"@type":"Person",name:`${m.contactInfo.firstName} ${m.contactInfo.lastName}`,email:m.contactInfo.email,telephone:m.contactInfo.phone},totalPrice:m.totalPrice};return n.jsxs("div",{className:"order-confirmation-container",children:[n.jsx(o,{title:"Sipariş Onayı",description:"Siparişiniz başarıyla alındı. Sipariş numaranız ve detayları.",keywords:"sipariş onayı, sipariş numarası, perde sipariş, sipariş teşekkür",url:"/siparis-onayi",structuredData:u}),n.jsxs("div",{className:"confirmation-content",children:[n.jsx("div",{className:"success-icon",children:n.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),n.jsxs("header",{className:"confirmation-header",children:[n.jsx("h1",{children:"Siparişiniz Alındı!"}),n.jsx("p",{className:"confirmation-subtitle",children:"Siparişiniz için teşekkür ederiz"})]}),n.jsxs("div",{className:"order-details-card",children:[n.jsxs("div",{className:"order-number-section",children:[n.jsx("h2",{children:"Sipariş Numarası"}),n.jsx("p",{className:"order-number",children:x}),n.jsxs("p",{className:"order-date",children:["Sipariş Tarihi: ",j]})]}),n.jsxs("div",{className:"order-info-grid",children:[(m.contactInfo.firstName||m.contactInfo.email||m.contactInfo.phone)&&n.jsxs("div",{className:"info-section",children:[n.jsx("h3",{children:"Fatura Bilgileri"}),n.jsxs("div",{className:"info-content",children:[(m.contactInfo.firstName||m.contactInfo.lastName)&&n.jsxs("p",{children:[n.jsx("strong",{children:"Ad Soyad:"})," ",m.contactInfo.firstName||""," ",m.contactInfo.lastName||""]}),m.contactInfo.email&&n.jsxs("p",{children:[n.jsx("strong",{children:"E-posta:"})," ",m.contactInfo.email]}),m.contactInfo.phone&&n.jsxs("p",{children:[n.jsx("strong",{children:"Telefon:"})," ",m.contactInfo.phone]})]})]}),(m.addressInfo.address||m.addressInfo.city)&&n.jsxs("div",{className:"info-section",children:[n.jsx("h3",{children:"Teslimat Adresi"}),n.jsxs("div",{className:"info-content",children:[m.addressInfo.address&&n.jsx("p",{children:m.addressInfo.address}),(m.addressInfo.district||m.addressInfo.city)&&n.jsxs("p",{children:[m.addressInfo.district||"",m.addressInfo.district&&m.addressInfo.city?", ":"",m.addressInfo.city||""]}),m.addressInfo.addressDetail&&n.jsxs("p",{children:[n.jsx("strong",{children:"Adres Detayı:"})," ",m.addressInfo.addressDetail]})]})]}),(m.cardInfo.cardNumber||m.totalPrice>0)&&n.jsxs("div",{className:"info-section",children:[n.jsx("h3",{children:"Ödeme Bilgileri"}),n.jsxs("div",{className:"info-content",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Ödeme Yöntemi:"})," Kredi Kartı"]}),m.cardInfo.cardNumber&&m.cardInfo.cardNumber.length>=4&&n.jsxs("p",{children:[n.jsx("strong",{children:"Kart:"})," •••• •••• •••• ",m.cardInfo.cardNumber.slice(-4)]}),m.totalPrice>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Toplam Tutar:"})," ",m.totalPrice.toFixed(2)," ₺"]})]})]}),m.items&&m.items.length>0&&n.jsxs("div",{className:"info-section full-width",children:[n.jsx("h3",{children:"Sipariş Detayları"}),n.jsx("div",{className:"order-items-list",children:m.items.map((s,e)=>n.jsxs("div",{className:"confirmation-item",children:[n.jsxs("div",{className:"item-info",children:[n.jsx("span",{className:"item-name",children:s.name}),s.customizations&&n.jsxs("div",{className:"item-customizations",children:[n.jsxs("span",{children:["En: ",s.customizations.en," cm"]}),n.jsxs("span",{children:["Boy: ",s.customizations.boy," cm"]}),n.jsxs("span",{children:["Pile: ","pilesiz"===s.customizations.pileSikligi?"Pilesiz":s.customizations.pileSikligi]})]}),n.jsxs("span",{className:"item-quantity",children:["Adet: ",s.quantity]})]}),n.jsxs("div",{className:"item-price",children:[((s.customizations?.calculatedPrice||s.price)*s.quantity).toFixed(2)," ₺"]})]},e))}),m.totalPrice>0&&n.jsxs("div",{className:"order-summary",children:[n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Ara Toplam:"}),n.jsxs("span",{children:[m.totalPrice.toFixed(2)," ₺"]})]}),n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Kargo:"}),n.jsx("span",{className:"free-shipping",children:"Ücretsiz"})]}),n.jsxs("div",{className:"summary-row total",children:[n.jsx("span",{children:"Toplam:"}),n.jsxs("span",{children:[m.totalPrice.toFixed(2)," ₺"]})]})]})]})]})]}),n.jsxs("div",{className:"confirmation-actions",children:[n.jsxs("p",{className:"info-text",children:["Sipariş durumunuzu ",n.jsx(t,{to:"/siparis-sorgula",children:"Sipariş Sorgula"})," sayfasından takip edebilirsiniz."]}),n.jsxs("div",{className:"action-buttons",children:[n.jsx(t,{to:"/",className:"btn-primary",children:"Ana Sayfaya Dön"}),n.jsx("button",{onClick:()=>window.print(),className:"btn-secondary",children:"Yazdır"})]})]})]})]})};export{c as default};
