import{j as e,a as r,u as s,r as t,d as a}from"./react-vendor-DfawjiNX.js";import{u as i,a as n}from"./context-BaHiGFT-.js";import{u as o,L as l}from"./index-Zimv_-Zl.js";import{L as c}from"./LazyImage-BHBceM3t.js";import{S as d}from"./SEO-COBDhSYn.js";import"./vendor-invariant-GfE-dftQ.js";import"./vendor-shallowequal-DDPVF0Lr.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BfCtOoOM.js";const m=({title:r,subtitle:s,className:t=""})=>e.jsxs("div",{className:"category-header-home "+t,children:[e.jsx("h2",{className:"category-title-home",children:r}),s&&e.jsx("p",{className:"category-subtitle-home",children:s})]}),h=()=>{const h=r(),u=s(),{addToCart:p,refreshCart:x}=i(),{accessToken:g}=n(),j=o(),[y,v]=t.useState([]),[f,w]=t.useState(!0),[k,N]=t.useState({}),[C,b]=t.useState({}),[F,S]=t.useState(!1),[L,E]=t.useState(null),[T,z]=t.useState(""),[B,A]=t.useState([]),[D,M]=t.useState(!1),[I,P]=t.useState(!1),[W,R]=t.useState({}),[$,q]=t.useState({}),[O,K]=t.useState({}),[U,H]=t.useState({}),[G,J]=t.useState({}),_=[{value:"1x1",label:"Seyrek (1x1)"},{value:"1x2",label:"1x2"},{value:"1x3",label:"1x3"}],V="http://localhost:8080/api",Y=new URLSearchParams(h.search).get("search")||"";t.useEffect(()=>{Y&&z(Y)},[Y]),t.useEffect(()=>{(async()=>{try{w(!0);const[r,s]=await Promise.all([fetch(V+"/products?page=0&size=100"),fetch(V+"/categories")]);if(r.ok){const e=await r.json();if(e.isSuccess||e.success){let r=[];e.data&&(e.data.content&&Array.isArray(e.data.content)?r=e.data.content:Array.isArray(e.data)&&(r=e.data)),Array.isArray(r)||(r=[]);let t={};if(s.ok){const e=await s.json();(e.isSuccess||e.success)&&(e.data||[]).forEach(e=>{t[e.id]={id:e.id,name:e.name,slug:e.slug||e.name?.toLowerCase().replace(/\s+/g,"-")||""}})}const a=r.filter(e=>(e.quantity||0)>0).map(e=>{const r=e.category?.id||null,s=r&&t[r]?t[r]:{id:r,name:e.category?.name||"Genel",slug:e.category?.slug||e.category?.name?.toLowerCase().replace(/\s+/g,"-")||""};return{id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",detailImages:e.detailImageUrl?[e.detailImageUrl]:[],description:e.description||e.shortDescription||"",shortDescription:e.shortDescription||"",category:s.name,categoryId:s.id,categorySlug:s.slug,color:e.color||"",inStock:(e.quantity||0)>0,productCode:e.productCode||e.code||e.sku||"",quantity:e.quantity||0,mountingType:e.mountingType||"",material:e.material||"",lightTransmittance:e.lightTransmittance||"",pieceCount:e.pieceCount||null,usageArea:e.usageArea||"",reviewCount:e.reviewCount||0,averageRating:e.averageRating||0,viewCount:e.viewCount||0}});v(a)}}else try{await response.json().catch(()=>({}))}catch(e){}}catch(r){}finally{w(!1)}})()},[]);const Z=t.useMemo(()=>{const e={};return y.forEach(r=>{const s=r.category;e[s]||(e[s]={name:s,id:r.categoryId,slug:r.categorySlug,products:[]}),e[s].products.push(r)}),Object.values(e).sort((e,r)=>e.name.localeCompare(r.name)).map(e=>({...e,products:e.products.sort((e,r)=>e.name.localeCompare(r.name))})).filter(e=>e.products.length>0)},[y]),Q=t.useCallback((e,r)=>{if(!r||""===r.trim())return!1;const s=r.toLowerCase().trim().split(/\s+/).filter(e=>e.length>0);if(1===s.length){const r=s[0];return e.name&&e.name.toLowerCase().includes(r)||e.description&&e.description.toLowerCase().includes(r)||e.shortDescription&&e.shortDescription.toLowerCase().includes(r)||e.category&&e.category.toLowerCase().includes(r)||e.productCode&&e.productCode.toLowerCase().includes(r)||e.color&&e.color.toLowerCase().includes(r)||e.material&&e.material.toLowerCase().includes(r)||e.mountingType&&e.mountingType.toLowerCase().includes(r)||e.usageArea&&e.usageArea.toLowerCase().includes(r)||e.lightTransmittance&&e.lightTransmittance.toLowerCase().includes(r)}const t=[e.name,e.description,e.shortDescription,e.category,e.productCode,e.color,e.material,e.mountingType,e.usageArea,e.lightTransmittance].filter(Boolean).join(" ").toLowerCase();return s.every(e=>t.includes(e))},[]),X=t.useMemo(()=>{if(!Y||""===Y.trim())return y;const e=Y.toLowerCase().trim();return y.filter(e=>Q(e,Y)).sort((r,s)=>{const t=r.name.toLowerCase().includes(e),a=s.name.toLowerCase().includes(e);if(t&&!a)return-1;if(!t&&a)return 1;const i=r.productCode&&r.productCode.toLowerCase().includes(e),n=s.productCode&&s.productCode.toLowerCase().includes(e);if(i&&!n)return-1;if(!i&&n)return 1;const o=r.name.toLowerCase().startsWith(e),l=s.name.toLowerCase().startsWith(e);return o&&!l?-1:!o&&l?1:r.name.localeCompare(s.name)})},[y,Y,Q]),ee=t.useMemo(()=>{if(!T||2>T.trim().length)return[];const e=T.toLowerCase().trim(),r=new Set,s=y.slice(0,50);return s.forEach(s=>{s.name&&s.name.toLowerCase().includes(e)&&s.name.split(/\s+/).forEach(s=>{s.toLowerCase().startsWith(e)&&s.length>e.length&&r.add(s)})}),s.forEach(s=>{s.category&&s.category.toLowerCase().includes(e)&&r.add(s.category)}),s.forEach(s=>{s.color&&s.color.toLowerCase().includes(e)&&r.add(s.color)}),s.forEach(s=>{s.productCode&&s.productCode.toLowerCase().includes(e)&&r.add(s.productCode)}),Array.from(r).slice(0,8)},[T,y]);t.useEffect(()=>{if(2>T.trim().length)return A([]),void M(!1);const e=setTimeout(()=>{A(ee),M(!0)},300);return()=>clearTimeout(e)},[T,ee]);const re=a.useCallback(async(e,r,s,t)=>{if(!r||!s||!t)return K(r=>{const s={...r};return delete s[e],s}),Promise.resolve();const a=k[e];if(!a||!a.id)return K(r=>{const s={...r};return delete s[e],s}),Promise.resolve();const i=parseFloat(r),n=parseFloat(s);if(isNaN(i)||isNaN(n)||0>=i||0>=n)return K(r=>{const s={...r};return delete s[e],s}),Promise.resolve();let o=1;try{const e=t.split("x");2===e.length&&(o=parseFloat(e[1]),isNaN(o)&&(o=1))}catch(m){o=1}const l=i/100;let c=0;void 0!==a.price&&null!==a.price&&("number"==typeof a.price?c=a.price:"string"==typeof a.price&&(c=parseFloat(a.price)||0));const d=c*l*o;return K(r=>({...r,[e]:Math.round(100*d)/100})),Promise.resolve(d)},[k]),se=e=>{R(r=>{const s={...r,[e]:!1};return Object.values(s).some(e=>e)||(document.body.style.overflow=""),s}),q(r=>{const s={...r};return delete s[e],s}),K(r=>{const s={...r};return delete s[e],s})};t.useEffect(()=>()=>{document.body.style.overflow=""},[]),t.useEffect(()=>{const e=e=>{"Escape"===e.key&&Object.keys(W).forEach(e=>{W[e]&&se(e)})};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[W]);const te=(e,r,s)=>{const t=s||"";q(s=>({...s,[e]:{...s[e],[r]:t}}))};t.useEffect(()=>{const e={};return Object.keys($).forEach(r=>{const s=$[r],t=k[r];e[r]&&clearTimeout(e[r]);const a=s?.pileSikligi||"1x1";s&&s.en&&s.boy&&a&&t&&t.id?(H(e=>({...e,[r]:!0})),e[r]=setTimeout(async()=>{try{await re(r,s.en,s.boy,a)}catch(e){}finally{H(e=>({...e,[r]:!1}))}},300)):(K(e=>{const s={...e};return delete s[r],s}),H(e=>({...e,[r]:!1})))}),()=>{Object.values(e).forEach(e=>clearTimeout(e))}},[$,k,re]);const ae=(r,s)=>{if(!s||!r)return r;const t=RegExp(`(${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),a=r.split(t);return e.jsx("span",{children:a.map((r,s)=>t.test(r)?e.jsx("mark",{className:"search-highlight",children:r},s):r)})};return Y?e.jsxs("div",{className:"product-list-container",children:[e.jsx(d,{title:`"${Y}" Arama Sonuçları`,description:`"${Y}" için ${X.length} ürün bulundu`,url:"/?search="+encodeURIComponent(Y)}),e.jsx("header",{className:"product-list-header-premium",children:e.jsxs("div",{className:"section-header-content-premium",children:[e.jsxs("div",{className:"section-header-badge-premium",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),e.jsx("span",{children:"Arama Sonuçları"})]}),e.jsxs("h1",{className:"section-header-title-premium",children:['"',Y,'" için ',X.length," sonuç bulundu"]}),e.jsx("p",{className:"section-header-subtitle-premium",children:"Aradığınız kriterlere uygun ürünler aşağıda listelenmiştir"})]})}),0===X.length?e.jsxs("div",{className:"no-products-search",children:[e.jsx("div",{className:"no-products-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})}),e.jsx("h2",{children:"Ürün Bulunamadı"}),e.jsxs("p",{children:['"',Y,'" için aradığınız kriterlere uygun ürün bulunamadı.']}),e.jsxs("div",{className:"no-products-suggestions",children:[e.jsx("p",{children:"Öneriler:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Farklı anahtar kelimeler deneyin"}),e.jsx("li",{children:"Yazım hatalarını kontrol edin"}),e.jsx("li",{children:"Daha genel terimler kullanın"}),e.jsx("li",{children:"Ürün kodunu doğrudan arayın"})]})]})]}):e.jsx("div",{className:"product-grid-search",children:X.map(r=>e.jsxs("div",{className:"product-card-search",onClick:()=>{return e=r.id,void u("/product/"+e);var e},children:[e.jsxs("div",{className:"product-card-search-image",children:[e.jsx(c,{src:r.image,alt:r.name}),r.inStock&&e.jsxs("div",{className:"product-stock-badge-search",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Stokta"]})]}),e.jsxs("div",{className:"product-card-info",children:[e.jsx("div",{className:"product-card-category",children:r.category}),e.jsx("h3",{children:ae(r.name,Y)}),r.productCode&&e.jsxs("div",{className:"product-card-code",children:["Kod: ",ae(r.productCode,Y)]}),r.color&&e.jsxs("div",{className:"product-card-color",children:["Renk: ",r.color]}),e.jsxs("p",{className:"product-price",children:["Başlangıç: ",r.price.toFixed(2)," ₺"]}),r.averageRating>0&&e.jsxs("div",{className:"product-card-rating",children:[e.jsx("div",{className:"rating-stars-small",children:[1,2,3,4,5].map(s=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:s>Math.floor(r.averageRating)?"none":"#FFD700",stroke:s>Math.floor(r.averageRating)?"#ddd":"#FFD700",strokeWidth:"2",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},s))}),e.jsx("span",{className:"rating-value-small",children:r.averageRating.toFixed(1)}),r.reviewCount>0&&e.jsxs("span",{className:"review-count-small",children:["(",r.reviewCount,")"]})]})]})]},r.id))})]}):(t.useEffect(()=>{const e=e=>{e.target.closest(".hero-search-form")||e.target.closest(".search-suggestions")||M(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),f?e.jsx("div",{className:"product-list-container",children:e.jsx(l,{size:"large",text:"Ürünler yükleniyor...",variant:"page"})}):e.jsxs("div",{className:"product-list-container",children:[e.jsx(d,{title:"Perde Satış - Online Perde Satın Al | Bingöl Perde Satışı | Hiedra Perde",description:"Bingöl ve Türkiye'nin en kaliteli perde satış sitesi. Zebra perde, Klasik perde, Stor perde ve Jaluzi perde modelleri. Bingöl perde satışı, Erzurum perde satışı. Hızlı teslimat, uygun fiyat garantisi.",keywords:"bingöl perde, bingöl perde satışı, erzurum perde, erzurum perde satışı, perde satış, online perde satış, perde satın al, perdeler, zebra perde satış, klasik perde, stor perde, jaluzi perde, perde fiyatları, uygun perde, kaliteli perde satış",url:"/"}),e.jsx("section",{className:"hero-section-modern",children:e.jsxs("div",{className:"hero-content-modern",children:[e.jsx("h1",{className:"hero-title-modern",children:"Modern, Minimalist Perde Modelleri"}),e.jsx("h2",{className:"hero-subtitle-modern",children:"Toptan Fiyatına Perakende Satış"}),e.jsxs("form",{className:"hero-search-form",onSubmit:e=>{e.preventDefault();const r=T.trim();r&&(P(!0),M(!1),u("/?search="+encodeURIComponent(r)),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>P(!1),500))},children:[e.jsx("input",{type:"text",className:"hero-search-input",placeholder:"Ürünün ismini, kodunu veya etiketini yazınız.",value:T,onChange:e=>z(e.target.value)}),e.jsx("button",{type:"submit",className:"hero-search-btn",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})})]}),e.jsxs("div",{className:"hero-statistics",children:[e.jsx("div",{className:"stat-number",children:"53.000+"}),e.jsx("div",{className:"stat-label",children:"Mutlu Müşteri Siparişi"})]}),e.jsxs("div",{className:"hero-description",children:[e.jsx("h3",{className:"description-title",children:"Özelleştirilebilir Perde Modelleri"}),e.jsx("p",{className:"description-text",children:"En, boy, Pile ve bir çok ayrıntılı seçenek ile kendi perdenizi oluşturun. Türkiye'de ilk defa Villa, tiny house, bungalov ve benzeri yerler için Çatı eğimli perdeler ile size özel seçenekler."})]})]})}),e.jsx("header",{className:"product-list-header-premium",children:e.jsxs("div",{className:"section-header-content-premium",children:[e.jsx("div",{className:"section-header-badge-premium",children:e.jsx("span",{children:"Koleksiyonlarımız"})}),e.jsx("h1",{className:"section-header-title-premium",children:"Özenle Seçilmiş Ürünler"}),e.jsx("p",{className:"section-header-subtitle-premium",children:"Her biri özenle tasarlanmış, kaliteli malzemelerden üretilmiş perde koleksiyonlarımızı keşfedin"})]})}),e.jsx("div",{className:"categories-showcase-home",children:Z.map(r=>{const s=k[r.name]||r.products[0];return e.jsxs("div",{className:"category-section-home",children:[e.jsx(m,{title:r.name,subtitle:r.products.length+" ürün"}),e.jsxs("div",{className:"category-product-showcase-home",children:[e.jsx("div",{className:"product-image-section-home",children:e.jsxs("div",{className:"main-product-image-wrapper-home "+(C[r.name]?"fade-out":"fade-in"),children:[e.jsx(c,{src:s.image||"",alt:s.name,className:"main-product-image-home",isLCP:r.name===Z[0]?.name,fetchPriority:r.name===Z[0]?.name?"high":"auto",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 600px",width:600,height:600}),s.detailImages&&s.detailImages.length>0&&s.detailImages[0]&&e.jsxs("div",{className:"detail-image-preview-home",onClick:()=>{E(s.detailImages[0]),S(!0)},title:"Detay fotoğrafını görüntüle",children:[e.jsx("div",{className:"detail-image-preview-overlay-home",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})}),e.jsx(c,{src:s.detailImages[0],alt:s.name+" detay",className:"detail-image-preview-img-home"})]})]})}),e.jsxs("div",{className:"product-details-section-home "+(C[r.name]?"fade-out":"fade-in"),children:[e.jsxs("div",{className:"product-header-info-home",children:[e.jsx("h2",{className:"product-title-home",children:s.name}),s.productCode&&e.jsxs("p",{className:"product-code-home",children:["Kod: ",s.productCode]}),(s.averageRating>0||s.reviewCount>0)&&e.jsxs("div",{className:"product-rating-section-home",children:[e.jsx("div",{className:"product-rating-stars-home",children:[1,2,3,4,5].map(r=>{const t=r<=Math.floor(s.averageRating),a=!t&&r-.5<=s.averageRating,i=`half-gradient-home-${s.id}-${r}`;return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:t?"#FFD700":a?`url(#${i})`:"none",stroke:t||a?"#FFD700":"#ddd",strokeWidth:"2",children:[a&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:i,children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})]},r)})}),s.averageRating>0&&e.jsx("span",{className:"product-rating-value-home",children:s.averageRating.toFixed(1)}),s.reviewCount>0&&e.jsxs("span",{className:"product-review-count-home",children:["(",s.reviewCount," değerlendirme)"]})]}),e.jsxs("div",{className:"product-price-large-home",children:[e.jsx("span",{className:"price-label-home",children:"Metre Fiyatı:"}),e.jsxs("span",{className:"price-value-home",children:[s.price.toFixed(2)," ₺"]})]})]}),r.products.length>0&&e.jsxs("div",{className:"color-selection-section-home",children:[e.jsx("h3",{className:"color-selection-title-home",children:"RENK SEÇİMİ"}),e.jsx("div",{className:"color-options-home",children:r.products.map(t=>{const a=(e=>{if(!e)return null;const r=e.trim();return r.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(r)?r:{beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF","yeşil":"#008000",green:"#008000","kırmızı":"#FF0000",red:"#FF0000","sarı":"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"}[r.toLowerCase()]||r})(t.color);return e.jsx("button",{className:"color-option-home "+(s.id===t.id?"active":""),onClick:()=>((e,r)=>{N(s=>({...s,[r]:e})),b(e=>({...e,[r]:!0})),setTimeout(()=>{b(e=>({...e,[r]:!1}))},150)})(t,r.name),title:t.color||t.name,children:e.jsx("div",{className:"color-swatch-home",style:{backgroundColor:a||"#ccc"},children:s.id===t.id&&e.jsx("div",{className:"color-checkmark-home",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})})},t.id)})})]}),(s.mountingType||s.material||s.lightTransmittance||s.usageArea||s.pieceCount||s.color)&&e.jsxs("div",{className:"product-features-home",children:[s.mountingType&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsxs("span",{children:["Takma Şekli: ",s.mountingType]})]}),s.material&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),e.jsxs("span",{children:["Materyal: ",s.material]})]}),s.lightTransmittance&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),e.jsxs("span",{children:["Işık Geçirgenliği: ",s.lightTransmittance]})]}),s.usageArea&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{children:["Kullanım Alanı: ",s.usageArea]})]}),s.pieceCount&&s.pieceCount>0&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),e.jsxs("span",{children:["Parça Sayısı: ",s.pieceCount," Adet"]})]})]}),e.jsx("div",{className:"product-actions-home",children:e.jsxs("button",{className:"open-pricing-modal-btn-home",onClick:()=>(e=>{const r=Z.find(r=>r.name===e);r&&r.products&&r.products.length>0&&(k[e]&&k[e].id||N(s=>({...s,[e]:r.products[0]}))),R(r=>({...r,[e]:!0})),q(r=>({...r,[e]:{en:"",boy:"",pileSikligi:"1x1"}})),document.body.style.overflow="hidden",setTimeout(()=>{const r=document.getElementById("modal-en-"+e);r&&r.focus()},100)})(r.name),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Sepete Ekle"]})})]})]})]},r.name)})}),Z.map(r=>{const s=k[r.name]||r.products[0];return W[r.name]&&s?e.jsx("div",{className:"pricing-modal-overlay-home",onClick:()=>se(r.name),children:e.jsxs("div",{className:"pricing-modal-content-home",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"pricing-modal-close-home",onClick:()=>se(r.name),"aria-label":"Kapat",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"pricing-modal-header-home",children:[e.jsx("h3",{className:"pricing-modal-title-home",children:"Özel Fiyatlandırma"}),e.jsx("p",{className:"pricing-modal-subtitle-home",children:s.name})]}),e.jsxs("div",{className:"pricing-modal-form-home",children:[e.jsxs("div",{className:"measurement-inputs-home",children:[e.jsxs("div",{className:"measurement-input-group-home",children:[e.jsxs("label",{htmlFor:"modal-en-"+r.name,children:["En (cm) ",e.jsx("span",{className:"required",children:"*"}),e.jsx("span",{className:"form-hint",children:"Max: 30000 cm"})]}),e.jsx("input",{id:"modal-en-"+r.name,type:"number",min:"0",max:"30000",step:"0.1",placeholder:"Örn: 200",value:$[r.name]?.en||"",onChange:e=>{const s=e.target.value;""!==s&&(0>parseFloat(s)||parseFloat(s)>3e4)||te(r.name,"en",s)},className:"measurement-input-home",required:!0})]}),e.jsxs("div",{className:"measurement-input-group-home",children:[e.jsxs("label",{htmlFor:"modal-boy-"+r.name,children:["Boy (cm) ",e.jsx("span",{className:"required",children:"*"}),e.jsx("span",{className:"form-hint",children:"Max: 500 cm"})]}),e.jsx("input",{id:"modal-boy-"+r.name,type:"number",min:"0",max:"500",step:"0.1",placeholder:"Örn: 250",value:$[r.name]?.boy||"",onChange:e=>{const s=e.target.value;""!==s&&(0>parseFloat(s)||parseFloat(s)>500)||te(r.name,"boy",s)},className:"measurement-input-home",required:!0})]}),e.jsxs("div",{className:"measurement-input-group-home",children:[e.jsxs("label",{htmlFor:"modal-pile-"+r.name,children:["Pile Sıklığı ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"custom-dropdown-home",children:[e.jsxs("button",{type:"button",className:"dropdown-trigger-home",onClick:()=>J(e=>({...e,[r.name]:!e[r.name]})),onBlur:()=>setTimeout(()=>J(e=>({...e,[r.name]:!1})),200),children:[e.jsx("span",{className:"dropdown-selected-home",children:_.find(e=>e.value===($[r.name]?.pileSikligi||"1x1"))?.label||_[0].label}),e.jsx("svg",{className:"dropdown-arrow-home "+(G[r.name]?"open":""),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),G[r.name]&&e.jsx("div",{className:"dropdown-menu-home",children:_.map(s=>e.jsx("button",{type:"button",className:"dropdown-option-home "+(($[r.name]?.pileSikligi||"1x1")===s.value?"selected":""),onClick:()=>{te(r.name,"pileSikligi",s.value),J(e=>({...e,[r.name]:!1}))},children:e.jsx("span",{className:"option-label-home",children:s.label})},s.value))})]}),e.jsx("p",{className:"form-info-home",children:"Pile sıklığı fiyatlandırmayı etkiler: 1x1 (x1), 1x2 (x2), 1x3 (x3)"})]})]}),e.jsxs("button",{className:"add-to-cart-btn-home",onClick:()=>(async e=>{const r=Z.find(r=>r.name===e);if(!r||!r.products||0===r.products.length)return void j.error("Kategori veya ürün bulunamadı.");let s=k[e];if(s&&s.id||(s=r.products[0]),!s||!s.id)return void j.error("Ürün bilgisi bulunamadı.");const t=$[e],a=O[e],i=t?.pileSikligi||"1x1";if(!t||!t.en||!t.boy)return void j.warning("Lütfen en ve boy değerlerini girin!");const n=parseFloat(t.en),o=parseFloat(t.boy);if(isNaN(n)||isNaN(o))return void j.warning("Lütfen geçerli sayısal değerler giriniz.");if(0>=n||n>3e4)return void j.warning("En değeri 0 ile 30000 cm arasında olmalıdır.");if(0>=o||o>500)return void j.warning("Boy değeri 0 ile 500 cm arasında olmalıdır.");let l=a;if(!l||0>=l){let e=1;try{const r=i.split("x");2===r.length&&(e=parseFloat(r[1]),isNaN(e)&&(e=1))}catch(c){e=1}let r=0;if(void 0!==s.price&&null!==s.price&&("number"==typeof s.price?r=s.price:"string"==typeof s.price&&(r=parseFloat(s.price)||0)),l=r*(n/100)*e,0>=l)return void j.error("Fiyat hesaplanamadı. Lütfen ürün fiyatının doğru olduğundan emin olun.")}try{let r=null;g||(r=localStorage.getItem("guestUserId"),r||(r="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",r)));const t=`${V}/cart/items${r?"?guestUserId="+r:""}`,a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",...g&&{Authorization:"Bearer "+g}},body:JSON.stringify({productId:s.id,quantity:1,width:n,height:o,pleatType:i})});let l;try{const e=await a.text();l=e?JSON.parse(e):{}}catch(d){throw Error("Sunucudan geçersiz yanıt alındı")}if(!a.ok){const e=l.message||l.error||`Sunucu hatası: ${a.status} ${a.statusText}`;throw Error(e)}if(!(!0===l.isSuccess||!0===l.success||l.data&&l.data.id)){const e=l.message||l.error||"Ürün sepete eklenemedi";throw Error(e)}if(x)try{await x()}catch(m){}j.success("Ürün sepete başarıyla eklendi!"),se(e)}catch(h){const e=h.message||"Ürün sepete eklenirken bir hata oluştu. Lütfen tekrar deneyin.";j.error(e)}})(r.name),disabled:!$[r.name]?.en||!$[r.name]?.boy||!$[r.name]?.pileSikligi,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Sepete Ekle"]})]})]})},"pricing-modal-"+r.name):null}),F&&L&&e.jsx("div",{className:"detail-modal-overlay-home",onClick:()=>S(!1),children:e.jsxs("div",{className:"detail-modal-content-home",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"detail-modal-close-home",onClick:()=>S(!1),"aria-label":"Kapat",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx(c,{src:L,alt:"Ürün detay",className:"detail-modal-image-home"})]})})]}))};export{h as default};
