import{e,u as s,a,r as i,d as r,j as t,L as l}from"./react-vendor-2SZXphvN.js";import{u as n,a as c}from"./context-2p1VoVIE.js";import{L as o}from"./LazyImage-BrNm0_mL.js";import{S as d}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";import"./index-C6qThFP1.js";const m="http://localhost:8080/api",h=()=>{const{id:h}=e();s();const{refreshCart:p}=n(),{accessToken:u}=c(),x=a(),g=i.useRef(null),j=i.useRef(null),[v,y]=i.useState(1),[w,N]=i.useState(null),[f,b]=i.useState(!0),[k,F]=i.useState(!1),[S,C]=i.useState(""),[T,M]=i.useState(!1),[E,z]=i.useState(""),[B,D]=i.useState(""),[P,R]=i.useState("1x1"),[$,A]=i.useState(0),[I,W]=i.useState(!1),[L,O]=i.useState(!1),[U,V]=i.useState(!0),[G,Y]=i.useState([]),[q,H]=i.useState({en:"",boy:""}),[K]=i.useState(0),[_,J]=i.useState([]),[Q,X]=i.useState(null),[Z,ee]=i.useState({page:0,size:6,hasNext:!0,totalElements:0,totalPages:0}),[se,ae]=i.useState(!1),[ie,re]=i.useState("LATEST"),[te,le]=i.useState(!1),[ne,ce]=i.useState(""),[oe,de]=i.useState(!1),[me,he]=i.useState(null),pe=i.useMemo(()=>{if(!w)return[];const e=[];return w.image&&e.push(w.image),Array.isArray(w.detailImages)&&w.detailImages.filter(Boolean).forEach(s=>e.push(s)),e.filter(Boolean).filter((e,s,a)=>a.indexOf(e)===s)},[w]),ue=pe[K]||pe[0]||w?.image||"/images/perde1kapak.jpg",xe=pe.length>1?pe[1]:null;i.useEffect(()=>(document.body.style.overflow=oe?"hidden":"",()=>{document.body.style.overflow=""}),[oe]);const ge=i.useCallback(e=>{e&&(he(e),de(!0))},[]),je=i.useCallback(()=>{de(!1),he(null)},[]),ve=[{value:"1x1",label:"Pilesiz (1x1)"},{value:"1x2",label:"1x2"},{value:"1x3",label:"1x3"}],ye=e=>{if(!e)return null;const s=e.trim();return s.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(s)?s:{beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF","yeşil":"#008000",green:"#008000","kırmızı":"#FF0000",red:"#FF0000","sarı":"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"}[s.toLowerCase()]||s};i.useEffect(()=>{(async()=>{if(h)try{b(!0),N(null);const e="string"==typeof h?parseInt(h,10):h;if(isNaN(e))return void b(!1);const s=await fetch(`${m}/products/${e}`);if(s.ok){const a=await s.json();if(a.isSuccess||a.success){const s=a.data||a,i="number"==typeof s.price?s.price:parseFloat(s.price)||0;N({...s,id:s.id||e,name:s.name||"Ürün",price:i,image:s.coverImageUrl||s.image||"/images/perde1kapak.jpg",detailImages:s.detailImageUrl?Array.isArray(s.detailImageUrl)?s.detailImageUrl:[s.detailImageUrl]:[],inStock:(s.quantity||0)>0,category:s.category?.name||s.category||"Genel",mountingType:s.mountingType||"",material:s.material||"",lightTransmittance:s.lightTransmittance||"",pieceCount:s.pieceCount||null,usageArea:s.usageArea||"",color:s.color||"",reviewCount:s.reviewCount||0,averageRating:s.averageRating||0,viewCount:s.viewCount||0})}else N(null)}else s.status,N(null)}catch(e){N(null)}finally{b(!1)}else b(!1)})()},[h]),i.useEffect(()=>{w&&"#reviews"===x.hash&&g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"})},[x.hash,w]);const we=i.useCallback(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Ne=i.useCallback(e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("tr-TR")},[]),fe=i.useCallback(async({page:e=0,reset:s=!1}={})=>{if(w?.id){ae(!0),s&&ce("");try{const a=new URLSearchParams({page:e.toString(),size:"6",sort:ie,withImagesOnly:te?"true":"false"}),i=await fetch(`${m}/reviews/product/${w.id}/page?${a.toString()}`);if(!i.ok)throw Error("Yorumlar getirilemedi.");const r=await i.json();if(!r?.isSuccess&&!r?.success)throw Error(r?.message||"Yorumlar getirilemedi.");const t=r?.data||{};J(e=>s?t.items||[]:[...e,...t.items||[]]),X(t.summary||null),ee({page:t.page??e,size:t.size??6,hasNext:t.hasNext??!1,totalElements:t.totalElements??0,totalPages:t.totalPages??0})}catch(a){ce(a.message||"Yorumlar yüklenirken bir hata oluştu.")}finally{ae(!1)}}},[w?.id,ie,te]);i.useEffect(()=>{w?.id&&(J([]),X(null),ee(e=>({...e,page:0,hasNext:!0,totalElements:0,totalPages:0})),fe({page:0,reset:!0}))},[w?.id,ie,te,fe]),i.useEffect(()=>{const e=j.current;if(!e||!Z.hasNext)return;const s=new IntersectionObserver(e=>{e[0]?.isIntersecting&&!se&&fe({page:Z.page+1,reset:!1})},{rootMargin:"200px"});return s.observe(e),()=>s.disconnect()},[Z.hasNext,Z.page,se,fe]),i.useEffect(()=>{(async()=>{try{const e=await fetch(m+"/products");if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=(s.data||[]).map(e=>({id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",description:e.description||"",category:e.category?.name||"Genel",inStock:(e.quantity||0)>0}));Y(e)}}}catch(e){}})()},[]);const be=r.useCallback((e,s)=>{if(!w||!w.price)return void A(0);let a=1;try{const e=s.split("x");2===e.length&&(a=parseFloat(e[1]),isNaN(a)&&(a=1))}catch(t){a=1}const i=e/100,r="number"==typeof w.price?w.price:parseFloat(w.price)||0;A(Math.round(r*i*a*100)/100)},[w]),ke=r.useCallback(async(e,s,a)=>{if(!(e&&s&&a&&w&&w.id))return void A(0);const i=parseFloat(e),r=parseFloat(s);if(!isNaN(i)&&!isNaN(r)&&i>0&&r>0){O(!0);try{const e=await fetch(`${m}/products/${w.id}/calculate-price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:i,height:r,pleatType:a,price:w.price})});if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=parseFloat(s.data.calculatedPrice);A(isNaN(e)?0:e)}else be(i,a)}else be(i,a)}catch(t){be(i,a)}finally{O(!1)}}else A(0)},[w,be]),Fe=(e,s)=>{if(!s||""===s.trim())return{isValid:!1,message:""};const a=parseFloat(s);if(isNaN(a))return{isValid:!1,message:"Lütfen geçerli bir sayı giriniz."};if("en"===e){if(50>a)return{isValid:!1,message:"Genişlik en az 50 cm olmalıdır."};if(a>1e3)return{isValid:!1,message:"Genişlik en fazla 1000 cm olabilir."}}else if("boy"===e){if(30>a)return{isValid:!1,message:"Yükseklik en az 30 cm olmalıdır."};if(a>270)return{isValid:!1,message:"Yükseklik en fazla 270 cm olabilir."}}return{isValid:!0,message:""}};i.useEffect(()=>{const e=Fe("en",E),s=Fe("boy",B);if(H({en:e.message,boy:s.message}),w&&w.id&&E&&B&&P&&e.isValid&&s.isValid){const e=setTimeout(()=>{ke(E,B,P)},500);return()=>clearTimeout(e)}A(0)},[E,B,P,w?.id,w?.price,ke]);const Se=Q?.totalReviewCount??w?.reviewCount??0,Ce=Q?.averageRating??w?.averageRating??0,Te=Q?.imageReviewCount??0;i.useMemo(()=>{const e=Q?.breakdown||{},s=[{label:"5",count:e.fiveStars||0},{label:"4",count:e.fourStars||0},{label:"3",count:e.threeStars||0},{label:"2",count:e.twoStars||0},{label:"1",count:e.oneStar||0}],a=s.reduce((e,s)=>e+s.count,0)||Se;return s.map(e=>({...e,percentage:a?Math.round(e.count/a*100):0}))},[Q,Se]);const Me=i.useMemo(()=>w&&w.id&&w.name&&w.price?{"@context":"https://schema.org","@type":"Product",name:(w.name||"Ürün")+" - Perde Satış",description:(w.description||"")+" Perde satış için Hiedra'yı ziyaret edin. Kaliteli kumaş, uygun fiyat, hızlı teslimat.",image:w.image?w.image.startsWith("http")?w.image:`${"undefined"!=typeof window?window.location.origin:"https://hiedra.com"}${w.image}`:"/images/perde1kapak.jpg",sku:"PROD-"+w.id,mpn:"HIEDRA-"+w.id,category:(w.category||"Genel")+" Perde",brand:{"@type":"Brand",name:"Hiedra Perde"},manufacturer:{"@type":"Organization",name:"Hiedra Perde"},offers:{"@type":"Offer",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/product/"+w.id,priceCurrency:"TRY",price:("number"==typeof w.price?w.price:parseFloat(w.price)||0).toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:w.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Hiedra Perde"},priceSpecification:{"@type":"UnitPriceSpecification",priceCurrency:"TRY",price:("number"==typeof w.price?w.price:parseFloat(w.price)||0).toString(),unitCode:"MTR",unitText:"metre"}},aggregateRating:{"@type":"AggregateRating",ratingValue:(w.averageRating||Ce||4.8).toString(),reviewCount:(w.reviewCount||Se||0).toString(),bestRating:"5",worstRating:"1"},review:w.reviewCount>0?[{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:(w.averageRating||5).toString(),bestRating:"5"},author:{"@type":"Person",name:"Müşteri"},reviewBody:(w.name||"Ürün")+" ürünü kaliteli ve hızlı teslimat ile memnun kaldık."}]:[]}:null,[w]),Ee=r.useCallback(async e=>{if(e.preventDefault(),C(""),M(!1),!E||!B)return void C("Lütfen en ve boy değerlerini giriniz.");const s=parseFloat(E),a=parseFloat(B);if(isNaN(s)||isNaN(a))C("Lütfen geçerli sayısal değerler giriniz.");else if(50>s||s>1e3)C("Genişlik değeri 50 ile 1000 cm arasında olmalıdır.");else if(30>a||a>270)C("Yükseklik değeri 30 ile 270 cm arasında olmalıdır.");else if(w&&w.id){F(!0);try{let e=null;u||(e=localStorage.getItem("guestUserId"),e||(e="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",e)));const i=await fetch(`${m}/cart/items${e?"?guestUserId="+e:""}`,{method:"POST",headers:{"Content-Type":"application/json",...u&&{Authorization:"Bearer "+u}},body:JSON.stringify({productId:w.id,quantity:v,width:s,height:a,pleatType:P})}),r=await i.json();if(!i.ok||!r.isSuccess&&!r.success)throw Error(r.message||"Ürün sepete eklenemedi");p&&await p(),M(!0)}catch(i){C(i.message||"Ürün sepete eklenirken bir hata oluştu. Lütfen tekrar deneyin.")}finally{F(!1)}}else C("Ürün bilgisi bulunamadı.")},[w,v,E,B,P,$,u,p]);return f?t.jsx("div",{className:"product-detail-container",children:t.jsxs("div",{className:"loading-state",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Ürün bilgileri yükleniyor..."})]})}):w?t.jsxs("div",{className:"product-detail-container",children:[w&&t.jsx(d,{title:`${w.name} - ${w.category} Perde Satış | Fiyat: ${w.price} ₺`,description:`${w.description} ${w.category} perde satış için en uygun fiyat: ${w.price} ₺. Kaliteli kumaş, hızlı teslimat. Perde satın al.`,keywords:`${w.name}, ${w.category} perde satış, ${w.category.toLowerCase()} perde, perde satış, online perde satış, ${w.price} TL perde, kaliteli perde`,image:w.image,url:"/product/"+w.id,type:"product",structuredData:Me}),w&&t.jsxs("div",{className:"product-detail-wrapper",children:[t.jsx("div",{className:"product-category-top",children:t.jsx("span",{className:"product-category-top-text",children:w.category||"Genel"})}),t.jsx("div",{className:"product-name-top",children:t.jsx("h1",{className:"product-name-top-text",children:w.name})}),t.jsxs("div",{className:"product-detail-content",children:[t.jsxs("section",{className:"product-detail-images",children:[t.jsx("div",{className:"product-image-section-home",children:t.jsx("div",{className:"product-image-wrapper",children:t.jsxs("div",{className:"main-product-image-wrapper-home fade-in",children:[t.jsx(o,{src:ue,alt:`${w.name} - ${w.category} perde modeli - Görsel ${K+1}`,className:"main-product-image-home",isLCP:!0,fetchPriority:"high",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 800px",width:800,height:800}),xe&&t.jsx("button",{type:"button",className:"product-image-thumb",onClick:()=>ge(xe),"aria-label":"Detay fotoğrafını görüntüle",children:t.jsx(o,{src:xe,alt:w.name+" detay fotoğrafı",className:"product-image-thumb-img"})})]})})}),w.description&&t.jsx("div",{className:"product-description-section",children:t.jsx("p",{className:"product-description",children:w.description})}),(w.mountingType||w.material||w.lightTransmittance||w.pieceCount||w.color||w.usageArea||w.pleatType||w.width&&w.height)&&t.jsxs("div",{className:"product-specifications-below-images",children:[t.jsxs("h3",{className:"specifications-title-below",children:[t.jsx("span",{className:"spec-category-name",children:w.category||"Genel"}),t.jsx("span",{className:"spec-title-text",children:"Ürün Özellikleri"})]}),t.jsxs("div",{className:"specifications-grid-below",children:[w.mountingType&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Takma Şekli"}),t.jsx("span",{className:"spec-value-below",children:w.mountingType})]})]}),w.material&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),t.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Materyal"}),t.jsx("span",{className:"spec-value-below",children:w.material})]})]}),w.pleatType&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Pile"}),t.jsx("span",{className:"spec-value-below",children:w.pleatType})]})]}),w.lightTransmittance&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"5"}),t.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),t.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),t.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),t.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),t.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),t.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),t.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),t.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Işık Geçirgenliği"}),t.jsx("span",{className:"spec-value-below",children:w.lightTransmittance})]})]}),w.pieceCount&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),t.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Parça Sayısı"}),t.jsxs("span",{className:"spec-value-below",children:[w.pieceCount," Adet"]})]})]}),w.color&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 2v4M12 18v4M2 12h4M18 12h4"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Renk"}),t.jsx("div",{className:"spec-color-display-below",children:t.jsx("div",{className:"color-swatch-below",style:{backgroundColor:ye(w.color)||"#ccc",border:"2px solid "+(ye(w.color)||"#ccc")},title:w.color})})]})]}),w.width&&w.height&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Beden"}),t.jsxs("span",{className:"spec-value-below",children:[w.width," x ",w.height," cm"]})]})]}),w.usageArea&&t.jsxs("div",{className:"spec-item-below",children:[t.jsx("div",{className:"spec-icon-wrapper",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),t.jsxs("div",{className:"spec-content-below",children:[t.jsx("span",{className:"spec-label-below",children:"Kullanım Alanı"}),t.jsx("span",{className:"spec-value-below",children:w.usageArea})]})]})]})]})]}),t.jsxs("article",{className:"product-detail-info",children:[t.jsxs("div",{className:"product-header-info",children:[w.productCode&&t.jsxs("span",{className:"product-code",children:["Ürün Kodu: ",t.jsx("strong",{children:w.productCode})]}),Se>0&&t.jsxs("div",{className:"product-rating-section",children:[t.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(e=>{const s=Math.floor(Ce||0)>=e;return t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:s?"#FFD700":"none",stroke:s?"#FFD700":"#ddd",strokeWidth:"2",children:t.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},e)}),Ce>0&&t.jsx("span",{className:"rating-value",children:Ce.toFixed(1)})]}),t.jsxs("span",{className:"review-count",children:["(",Se," ","yorum",")"]}),t.jsx("button",{type:"button",className:"reviews-anchor-btn",onClick:we,children:"Yorumları Gör"})]}),t.jsx("div",{className:"detail-price-section-top",children:t.jsxs("div",{className:"price-info-top",children:[t.jsx("span",{className:"price-label-top",children:"Metre Fiyatı:"}),t.jsxs("span",{className:"detail-price-top",children:[w.price.toFixed(2)," ₺"]})]})})]}),t.jsxs("div",{className:"product-features",children:[t.jsxs("div",{className:"feature-item",children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),t.jsx("span",{children:"Kaliteli Kumaş"})]}),t.jsxs("div",{className:"feature-item",children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),t.jsx("span",{children:"Hızlı Teslimat"})]}),t.jsxs("div",{className:"feature-item",children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),t.jsx("span",{children:"Uygun Fiyat"})]})]}),t.jsxs("div",{className:"pricing-form-wrapper",children:[t.jsxs("button",{type:"button",className:"pricing-form-toggle",onClick:()=>V(!U),children:[t.jsx("h2",{className:"form-title",children:"Özel Fiyatlandırma"}),t.jsx("svg",{className:"form-toggle-arrow "+(U?"open":""),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),t.jsxs("form",{className:"pricing-form "+(U?"open":""),onSubmit:Ee,children:[t.jsxs("div",{className:"form-section",children:[t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"en",children:["Genişlik (cm) ",t.jsx("span",{className:"required",children:"*"}),t.jsx("span",{className:"form-hint",children:"Min: 50 cm, Max: 1000 cm"})]}),t.jsx("input",{type:"number",id:"en",value:E,onChange:e=>{const s=e.target.value;z(s)},min:"50",max:"1000",step:"0.1",placeholder:"Örn: 200",className:q.en?"input-error":"",required:!0}),q.en&&t.jsx("span",{className:"error-message",children:q.en})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"boy",children:["Yükseklik (cm) ",t.jsx("span",{className:"required",children:"*"}),t.jsx("span",{className:"form-hint",children:"Min: 30 cm, Max: 270 cm"})]}),t.jsx("input",{type:"number",id:"boy",value:B,onChange:e=>{const s=e.target.value;D(s)},min:"30",max:"270",step:"0.1",placeholder:"Örn: 250",className:q.boy?"input-error":"",required:!0}),q.boy&&t.jsx("span",{className:"error-message",children:q.boy})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"pileSikligi",children:["Pile Sıklığı ",t.jsx("span",{className:"required",children:"*"})]}),t.jsxs("div",{className:"custom-dropdown",children:[t.jsxs("button",{type:"button",className:"dropdown-trigger",onClick:()=>W(!I),onBlur:()=>setTimeout(()=>W(!1),200),children:[t.jsx("span",{className:"dropdown-selected",children:ve.find(e=>e.value===P)?.label}),t.jsx("svg",{className:"dropdown-arrow "+(I?"open":""),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:t.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),I&&t.jsx("div",{className:"dropdown-menu",children:ve.map(e=>t.jsx("button",{type:"button",className:"dropdown-option "+(P===e.value?"selected":""),onClick:()=>{R(e.value),W(!1)},children:t.jsx("span",{className:"option-label",children:e.label})},e.value))})]}),t.jsx("p",{className:"form-info",children:"Pile sıklığı fiyatlandırmayı etkiler: 1x1 (x1), 1x2 (x2), 1x3 (x3)"})]}),$>0&&t.jsx("div",{className:"calculated-price-section",children:t.jsxs("div",{className:"price-breakdown",children:[t.jsxs("div",{className:"breakdown-item",children:[t.jsx("span",{children:"Metre Fiyatı:"}),t.jsxs("span",{children:[w.price," ₺"]})]}),t.jsxs("div",{className:"breakdown-item",children:[t.jsx("span",{children:"En:"}),t.jsxs("span",{children:[E," cm (",parseFloat(E)/100," m)"]})]}),t.jsxs("div",{className:"breakdown-item",children:[t.jsx("span",{children:"Pile Çarpanı:"}),t.jsx("span",{children:P})]}),t.jsxs("div",{className:"breakdown-item total",children:[t.jsx("span",{children:"Toplam Fiyat:"}),t.jsx("span",{className:"total-price",children:L?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"spinner",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",display:"inline-block",marginRight:"0.5rem",verticalAlign:"middle"},children:t.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Hesaplanıyor..."]}):$.toFixed(2)+" ₺"})]})]})})]}),t.jsxs("div",{className:"quantity-section",children:[t.jsx("label",{children:"Adet:"}),t.jsxs("div",{className:"quantity-controls",children:[t.jsx("button",{type:"button",onClick:()=>y(Math.max(1,v-1)),children:"-"}),t.jsx("span",{children:v}),t.jsx("button",{type:"button",onClick:()=>y(v+1),children:"+"})]})]}),S&&t.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:S}),T&&t.jsx("div",{className:"success-message",style:{padding:"1rem",backgroundColor:"#efe",color:"#3c3",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #cfc"},children:"✓ Ürün sepete başarıyla eklendi!"}),t.jsx("button",{type:"submit",className:"add-to-cart-btn",disabled:!E||!B||0===$||k||!!q.en||!!q.boy,children:k?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",marginRight:"0.5rem"},children:t.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Ekleniyor..."]}):"Sepete Ekle"})]})]})]})]})]}),w&&(()=>{const e=G.filter(e=>e.id!==w.id&&e.category===(w.category||"Genel"));return 0===e.length?null:t.jsxs("section",{className:"similar-products-widget",children:[t.jsxs("div",{className:"similar-products-header",children:[t.jsx("h2",{className:"similar-products-title",children:"Benzer Ürünler"}),t.jsxs("p",{className:"similar-products-subtitle",children:[w.category||"Genel"," kategorisindeki diğer ürünler"]})]}),t.jsx("div",{className:"similar-products-scroll-container",children:t.jsx("div",{className:"similar-products-scroll",children:e.map(e=>t.jsxs(l,{to:"/product/"+e.id,className:"similar-product-item",children:[t.jsx("div",{className:"similar-product-image-wrapper",children:t.jsx(o,{src:e.image,alt:e.name,className:"similar-product-image"})}),t.jsx("div",{className:"similar-product-name",children:e.name})]},e.id))})})]})})(),w&&t.jsxs("section",{id:"reviews-section",ref:g,className:"product-reviews-section",children:[t.jsxs("div",{className:"reviews-header",children:[t.jsx("h2",{className:"reviews-title",children:"Ürün Yorumları"}),t.jsx("p",{className:"reviews-subtitle",children:"Gerçek müşteri deneyimleri ve puanlamalar"})]}),t.jsxs("div",{className:"reviews-summary-card",children:[t.jsxs("div",{className:"reviews-score",children:[t.jsx("span",{className:"reviews-score-value",children:(Ce||0).toFixed(1)}),t.jsx("span",{className:"reviews-score-max",children:"/ 5"}),t.jsx("span",{className:"reviews-score-text",children:"puan"}),t.jsx("div",{className:"reviews-score-stars",children:[1,2,3,4,5].map(e=>t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:e>Math.round(Ce)?"none":"#FFD700",stroke:e>Math.round(Ce)?"#ddd":"#FFD700",strokeWidth:"2",children:t.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},"summary-star-"+e))})]}),t.jsxs("div",{className:"reviews-meta",children:[t.jsx("span",{className:"reviews-count-text",children:Se>0?Se+" değerlendirme":"Henüz yorum bulunmuyor"}),Te>0&&t.jsxs("span",{className:"reviews-image-count",children:[Te," fotoğraflı yorum"]}),t.jsx("button",{type:"button",className:"reviews-anchor-btn secondary",onClick:we,children:"Başa Dön"})]})]}),t.jsx("div",{className:"reviews-summary-extras",children:t.jsxs("div",{className:"reviews-filters",children:[t.jsx("label",{className:"reviews-sort-label",htmlFor:"review-sort-select",children:"Sırala"}),t.jsxs("select",{id:"review-sort-select",className:"reviews-sort-select",value:ie,onChange:e=>re(e.target.value),children:[t.jsx("option",{value:"LATEST",children:"En Yeni"}),t.jsx("option",{value:"OLDEST",children:"En Eski"}),t.jsx("option",{value:"HIGHEST_RATED",children:"En Yüksek Puan"}),t.jsx("option",{value:"LOWEST_RATED",children:"En Düşük Puan"}),t.jsx("option",{value:"MOST_HELPFUL",children:"En Faydalı"})]}),t.jsxs("label",{className:"reviews-checkbox",children:[t.jsx("input",{type:"checkbox",checked:te,onChange:e=>le(e.target.checked)}),t.jsxs("span",{children:["Sadece görselli (",Te,")"]})]})]})}),ne&&t.jsx("div",{className:"reviews-error",children:ne}),se&&0===_.length?t.jsx("div",{className:"reviews-loading",children:"Yorumlar yükleniyor..."}):_.length>0?t.jsxs("div",{className:"reviews-list",children:[_.map((e,s)=>{const a=+e.rating||0,i=Ne(e.createdAt||e.updatedAt),r=e.reviewer||{},l=e.id??`${s}-${r.email||"review"}`;return t.jsxs("article",{className:"review-card",children:[t.jsxs("div",{className:"review-card-header",children:[t.jsxs("div",{className:"review-author-meta",children:[t.jsx("span",{className:"review-author",children:r.name||"Müşteri"}),i&&t.jsx("time",{className:"review-date",children:i})]}),a>0&&t.jsxs("div",{className:"review-card-rating",children:[[1,2,3,4,5].map(s=>t.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:s>Math.round(a)?"none":"#FFD700",stroke:s>Math.round(a)?"#ddd":"#FFD700",strokeWidth:"2",children:t.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},`${e.id}-${s}`)),t.jsx("span",{children:a.toFixed(1)})]})]}),e.comment&&t.jsx("p",{className:"review-comment",children:e.comment}),e.imageUrls&&e.imageUrls.length>0&&t.jsx("div",{className:"review-image-grid",children:e.imageUrls.map((s,a)=>t.jsx("div",{className:"review-image-thumb","aria-label":"Yorum görseli "+(a+1),children:t.jsx(o,{src:s,alt:"Yorum görseli "+(a+1)})},`${e.id}-img-${a}`))})]},l)}),t.jsxs("div",{className:"reviews-load-more",ref:j,children:[se&&_.length>0&&t.jsx("span",{children:"Daha fazla yorum yükleniyor..."}),!Z.hasNext&&_.length>0&&t.jsx("span",{children:"Tüm yorumlar yüklendi."})]})]}):t.jsxs("div",{className:"no-reviews-card",children:[t.jsx("p",{children:te?"Fotoğraflı yorum bulunamadı.":"Bu ürün için henüz yorum paylaşılmadı."}),t.jsx("span",{children:"Satın alma sonrasında deneyiminizi paylaşarak diğer müşterilere destek olabilirsiniz."})]})]}),oe&&t.jsx("div",{className:"image-modal-backdrop",onClick:je,children:t.jsxs("div",{className:"image-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsx("button",{type:"button",className:"image-modal-close",onClick:je,"aria-label":"Modalı kapat",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),t.jsx(o,{src:me||xe||ue,alt:"Detay görsel",className:"image-modal-photo"})]})})]}):t.jsx("div",{className:"product-detail-container",children:t.jsxs("div",{className:"product-not-found",children:[t.jsx("h2",{children:"Ürün bulunamadı"}),t.jsx("p",{children:"Aradığınız ürün mevcut değil veya silinmiş olabilir."}),t.jsx(l,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})};export{h as default};
