var Ks=Object.defineProperty;var _s=(s,a,r)=>a in s?Ks(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r;var xe=(s,a,r)=>_s(s,typeof a!="symbol"?a+"":a,r);import{r as d,a as Ws,g as rs,R as oe,u as J,L as O,b as Fe,c as we,d as is,B as qs,e as Gs,f as W}from"./vendor-EZwzGwuc.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))t(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const v of l.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&t(v)}).observe(document,{childList:!0,subtree:!0});function r(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(c){if(c.ep)return;c.ep=!0;const l=r(c);fetch(c.href,l)}})();var As={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=d,Ys=Symbol.for("react.element"),Js=Symbol.for("react.fragment"),Xs=Object.prototype.hasOwnProperty,Zs=Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qs={key:!0,ref:!0,__self:!0,__source:!0};function Ds(s,a,r){var t,c={},l=null,v=null;r!==void 0&&(l=""+r),a.key!==void 0&&(l=""+a.key),a.ref!==void 0&&(v=a.ref);for(t in a)Xs.call(a,t)&&!Qs.hasOwnProperty(t)&&(c[t]=a[t]);if(s&&s.defaultProps)for(t in a=s.defaultProps,a)c[t]===void 0&&(c[t]=a[t]);return{$$typeof:Ys,type:s,key:l,ref:v,props:c,_owner:Zs.current}}Me.Fragment=Js;Me.jsx=Ds;Me.jsxs=Ds;As.exports=Me;var e=As.exports,Ze={},ls=Ws;Ze.createRoot=ls.createRoot,Ze.hydrateRoot=ls.hydrateRoot;var ea=typeof Element<"u",sa=typeof Map=="function",aa=typeof Set=="function",ta=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Re(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var r,t,c;if(Array.isArray(s)){if(r=s.length,r!=a.length)return!1;for(t=r;t--!==0;)if(!Re(s[t],a[t]))return!1;return!0}var l;if(sa&&s instanceof Map&&a instanceof Map){if(s.size!==a.size)return!1;for(l=s.entries();!(t=l.next()).done;)if(!a.has(t.value[0]))return!1;for(l=s.entries();!(t=l.next()).done;)if(!Re(t.value[1],a.get(t.value[0])))return!1;return!0}if(aa&&s instanceof Set&&a instanceof Set){if(s.size!==a.size)return!1;for(l=s.entries();!(t=l.next()).done;)if(!a.has(t.value[0]))return!1;return!0}if(ta&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(a)){if(r=s.length,r!=a.length)return!1;for(t=r;t--!==0;)if(s[t]!==a[t])return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof a.valueOf=="function")return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof a.toString=="function")return s.toString()===a.toString();if(c=Object.keys(s),r=c.length,r!==Object.keys(a).length)return!1;for(t=r;t--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[t]))return!1;if(ea&&s instanceof Element)return!1;for(t=r;t--!==0;)if(!((c[t]==="_owner"||c[t]==="__v"||c[t]==="__o")&&s.$$typeof)&&!Re(s[c[t]],a[c[t]]))return!1;return!0}return s!==s&&a!==a}var ra=function(a,r){try{return Re(a,r)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}};const ia=rs(ra);var na=function(s,a,r,t,c,l,v,f){if(!s){var n;if(a===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[r,t,c,l,v,f],k=0;n=new Error(a.replace(/%s/g,function(){return i[k++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}},la=na;const os=rs(la);var oa=function(a,r,t,c){var l=t?t.call(c,a,r):void 0;if(l!==void 0)return!!l;if(a===r)return!0;if(typeof a!="object"||!a||typeof r!="object"||!r)return!1;var v=Object.keys(a),f=Object.keys(r);if(v.length!==f.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(r),i=0;i<v.length;i++){var k=v[i];if(!n(k))return!1;var x=a[k],z=r[k];if(l=t?t.call(c,x,z,k):void 0,l===!1||l===void 0&&x!==z)return!1}return!0};const ca=rs(oa);var Is=(s=>(s.BASE="base",s.BODY="body",s.HEAD="head",s.HTML="html",s.LINK="link",s.META="meta",s.NOSCRIPT="noscript",s.SCRIPT="script",s.STYLE="style",s.TITLE="title",s.FRAGMENT="Symbol(react.fragment)",s))(Is||{}),Ke={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},cs=Object.values(Is),ns={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},da=Object.entries(ns).reduce((s,[a,r])=>(s[r]=a,s),{}),pe="data-rh",Ne={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},be=(s,a)=>{for(let r=s.length-1;r>=0;r-=1){const t=s[r];if(Object.prototype.hasOwnProperty.call(t,a))return t[a]}return null},ma=s=>{let a=be(s,"title");const r=be(s,Ne.TITLE_TEMPLATE);if(Array.isArray(a)&&(a=a.join("")),r&&a)return r.replace(/%s/g,()=>a);const t=be(s,Ne.DEFAULT_TITLE);return a||t||void 0},ha=s=>be(s,Ne.ON_CHANGE_CLIENT_STATE)||(()=>{}),_e=(s,a)=>a.filter(r=>typeof r[s]<"u").map(r=>r[s]).reduce((r,t)=>({...r,...t}),{}),ua=(s,a)=>a.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,t)=>{if(!r.length){const c=Object.keys(t);for(let l=0;l<c.length;l+=1){const f=c[l].toLowerCase();if(s.indexOf(f)!==-1&&t[f])return r.concat(t)}}return r},[]),pa=s=>console&&typeof console.warn=="function"&&console.warn(s),ze=(s,a,r)=>{const t={};return r.filter(c=>Array.isArray(c[s])?!0:(typeof c[s]<"u"&&pa(`Helmet: ${s} should be of type "Array". Instead found type "${typeof c[s]}"`),!1)).map(c=>c[s]).reverse().reduce((c,l)=>{const v={};l.filter(n=>{let i;const k=Object.keys(n);for(let z=0;z<k.length;z+=1){const m=k[z],h=m.toLowerCase();a.indexOf(h)!==-1&&!(i==="rel"&&n[i].toLowerCase()==="canonical")&&!(h==="rel"&&n[h].toLowerCase()==="stylesheet")&&(i=h),a.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(i=m)}if(!i||!n[i])return!1;const x=n[i].toLowerCase();return t[i]||(t[i]={}),v[i]||(v[i]={}),t[i][x]?!1:(v[i][x]=!0,!0)}).reverse().forEach(n=>c.push(n));const f=Object.keys(v);for(let n=0;n<f.length;n+=1){const i=f[n],k={...t[i],...v[i]};t[i]=k}return c},[]).reverse()},xa=(s,a)=>{if(Array.isArray(s)&&s.length){for(let r=0;r<s.length;r+=1)if(s[r][a])return!0}return!1},ga=s=>({baseTag:ua(["href"],s),bodyAttributes:_e("bodyAttributes",s),defer:be(s,Ne.DEFER),encode:be(s,Ne.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:_e("htmlAttributes",s),linkTags:ze("link",["rel","href"],s),metaTags:ze("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:ze("noscript",["innerHTML"],s),onChangeClientState:ha(s),scriptTags:ze("script",["src","innerHTML"],s),styleTags:ze("style",["cssText"],s),title:ma(s),titleAttributes:_e("titleAttributes",s),prioritizeSeoTags:xa(s,Ne.PRIORITIZE_SEO_TAGS)}),Es=s=>Array.isArray(s)?s.join(""):s,ja=(s,a)=>{const r=Object.keys(s);for(let t=0;t<r.length;t+=1)if(a[r[t]]&&a[r[t]].includes(s[r[t]]))return!0;return!1},We=(s,a)=>Array.isArray(s)?s.reduce((r,t)=>(ja(t,a)?r.priority.push(t):r.default.push(t),r),{priority:[],default:[]}):{default:s,priority:[]},ds=(s,a)=>({...s,[a]:void 0}),fa=["noscript","script","style"],Qe=(s,a=!0)=>a===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ps=s=>Object.keys(s).reduce((a,r)=>{const t=typeof s[r]<"u"?`${r}="${s[r]}"`:`${r}`;return a?`${a} ${t}`:t},""),ya=(s,a,r,t)=>{const c=Ps(r),l=Es(a);return c?`<${s} ${pe}="true" ${c}>${Qe(l,t)}</${s}>`:`<${s} ${pe}="true">${Qe(l,t)}</${s}>`},va=(s,a,r=!0)=>a.reduce((t,c)=>{const l=c,v=Object.keys(l).filter(i=>!(i==="innerHTML"||i==="cssText")).reduce((i,k)=>{const x=typeof l[k]>"u"?k:`${k}="${Qe(l[k],r)}"`;return i?`${i} ${x}`:x},""),f=l.innerHTML||l.cssText||"",n=fa.indexOf(s)===-1;return`${t}<${s} ${pe}="true" ${v}${n?"/>":`>${f}</${s}>`}`},""),Ls=(s,a={})=>Object.keys(s).reduce((r,t)=>{const c=ns[t];return r[c||t]=s[t],r},a),ka=(s,a,r)=>{const t={key:a,[pe]:!0},c=Ls(r,t);return[oe.createElement("title",c,a)]},$e=(s,a)=>a.map((r,t)=>{const c={key:t,[pe]:!0};return Object.keys(r).forEach(l=>{const f=ns[l]||l;if(f==="innerHTML"||f==="cssText"){const n=r.innerHTML||r.cssText;c.dangerouslySetInnerHTML={__html:n}}else c[f]=r[l]}),oe.createElement(s,c)}),he=(s,a,r=!0)=>{switch(s){case"title":return{toComponent:()=>ka(s,a.title,a.titleAttributes),toString:()=>ya(s,a.title,a.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Ls(a),toString:()=>Ps(a)};default:return{toComponent:()=>$e(s,a),toString:()=>va(s,a,r)}}},Na=({metaTags:s,linkTags:a,scriptTags:r,encode:t})=>{const c=We(s,Ke.meta),l=We(a,Ke.link),v=We(r,Ke.script);return{priorityMethods:{toComponent:()=>[...$e("meta",c.priority),...$e("link",l.priority),...$e("script",v.priority)],toString:()=>`${he("meta",c.priority,t)} ${he("link",l.priority,t)} ${he("script",v.priority,t)}`},metaTags:c.default,linkTags:l.default,scriptTags:v.default}},ba=s=>{const{baseTag:a,bodyAttributes:r,encode:t=!0,htmlAttributes:c,noscriptTags:l,styleTags:v,title:f="",titleAttributes:n,prioritizeSeoTags:i}=s;let{linkTags:k,metaTags:x,scriptTags:z}=s,m={toComponent:()=>{},toString:()=>""};return i&&({priorityMethods:m,linkTags:k,metaTags:x,scriptTags:z}=Na(s)),{priority:m,base:he("base",a,t),bodyAttributes:he("bodyAttributes",r,t),htmlAttributes:he("htmlAttributes",c,t),link:he("link",k,t),meta:he("meta",x,t),noscript:he("noscript",l,t),script:he("script",z,t),style:he("style",v,t),title:he("title",{title:f,titleAttributes:n},t)}},es=ba,Ee=[],Rs=!!(typeof window<"u"&&window.document&&window.document.createElement),ss=class{constructor(s,a){xe(this,"instances",[]);xe(this,"canUseDOM",Rs);xe(this,"context");xe(this,"value",{setHelmet:s=>{this.context.helmet=s},helmetInstances:{get:()=>this.canUseDOM?Ee:this.instances,add:s=>{(this.canUseDOM?Ee:this.instances).push(s)},remove:s=>{const a=(this.canUseDOM?Ee:this.instances).indexOf(s);(this.canUseDOM?Ee:this.instances).splice(a,1)}}});this.context=s,this.canUseDOM=a||!1,a||(s.helmet=es({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},wa={},$s=oe.createContext(wa),fe,Bs=(fe=class extends d.Component{constructor(r){super(r);xe(this,"helmetData");this.helmetData=new ss(this.props.context||{},fe.canUseDOM)}render(){return oe.createElement($s.Provider,{value:this.helmetData.value},this.props.children)}},xe(fe,"canUseDOM",Rs),fe),ke=(s,a)=>{const r=document.head||document.querySelector("head"),t=r.querySelectorAll(`${s}[${pe}]`),c=[].slice.call(t),l=[];let v;return a&&a.length&&a.forEach(f=>{const n=document.createElement(s);for(const i in f)if(Object.prototype.hasOwnProperty.call(f,i))if(i==="innerHTML")n.innerHTML=f.innerHTML;else if(i==="cssText")n.styleSheet?n.styleSheet.cssText=f.cssText:n.appendChild(document.createTextNode(f.cssText));else{const k=i,x=typeof f[k]>"u"?"":f[k];n.setAttribute(i,x)}n.setAttribute(pe,"true"),c.some((i,k)=>(v=k,n.isEqualNode(i)))?c.splice(v,1):l.push(n)}),c.forEach(f=>{var n;return(n=f.parentNode)==null?void 0:n.removeChild(f)}),l.forEach(f=>r.appendChild(f)),{oldTags:c,newTags:l}},as=(s,a)=>{const r=document.getElementsByTagName(s)[0];if(!r)return;const t=r.getAttribute(pe),c=t?t.split(","):[],l=[...c],v=Object.keys(a);for(const f of v){const n=a[f]||"";r.getAttribute(f)!==n&&r.setAttribute(f,n),c.indexOf(f)===-1&&c.push(f);const i=l.indexOf(f);i!==-1&&l.splice(i,1)}for(let f=l.length-1;f>=0;f-=1)r.removeAttribute(l[f]);c.length===l.length?r.removeAttribute(pe):r.getAttribute(pe)!==v.join(",")&&r.setAttribute(pe,v.join(","))},Sa=(s,a)=>{typeof s<"u"&&document.title!==s&&(document.title=Es(s)),as("title",a)},ms=(s,a)=>{const{baseTag:r,bodyAttributes:t,htmlAttributes:c,linkTags:l,metaTags:v,noscriptTags:f,onChangeClientState:n,scriptTags:i,styleTags:k,title:x,titleAttributes:z}=s;as("body",t),as("html",c),Sa(x,z);const m={baseTag:ke("base",r),linkTags:ke("link",l),metaTags:ke("meta",v),noscriptTags:ke("noscript",f),scriptTags:ke("script",i),styleTags:ke("style",k)},h={},j={};Object.keys(m).forEach(g=>{const{newTags:b,oldTags:o}=m[g];b.length&&(h[g]=b),o.length&&(j[g]=m[g].oldTags)}),a&&a(),n(s,h,j)},Te=null,Ca=s=>{Te&&cancelAnimationFrame(Te),s.defer?Te=requestAnimationFrame(()=>{ms(s,()=>{Te=null})}):(ms(s),Te=null)},za=Ca,hs=class extends d.Component{constructor(){super(...arguments);xe(this,"rendered",!1)}shouldComponentUpdate(a){return!ca(a,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:a}=this.props.context;a.remove(this),this.emitChange()}emitChange(){const{helmetInstances:a,setHelmet:r}=this.props.context;let t=null;const c=ga(a.get().map(l=>{const v={...l.props};return delete v.context,v}));Bs.canUseDOM?za(c):es&&(t=es(c)),r(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:a}=this.props.context;a.add(this),this.emitChange()}render(){return this.init(),null}},Xe,Ta=(Xe=class extends d.Component{shouldComponentUpdate(s){return!ia(ds(this.props,"helmetData"),ds(s,"helmetData"))}mapNestedChildrenToProps(s,a){if(!a)return null;switch(s.type){case"script":case"noscript":return{innerHTML:a};case"style":return{cssText:a};default:throw new Error(`<${s.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(s,a,r,t){return{...a,[s.type]:[...a[s.type]||[],{...r,...this.mapNestedChildrenToProps(s,t)}]}}mapObjectTypeChildren(s,a,r,t){switch(s.type){case"title":return{...a,[s.type]:t,titleAttributes:{...r}};case"body":return{...a,bodyAttributes:{...r}};case"html":return{...a,htmlAttributes:{...r}};default:return{...a,[s.type]:{...r}}}}mapArrayTypeChildrenToProps(s,a){let r={...a};return Object.keys(s).forEach(t=>{r={...r,[t]:s[t]}}),r}warnOnInvalidChildren(s,a){return os(cs.some(r=>s.type===r),typeof s.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${cs.join(", ")} are allowed. Helmet does not support rendering <${s.type}> elements. Refer to our API for more information.`),os(!a||typeof a=="string"||Array.isArray(a)&&!a.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${s.type}>. Did you forget to wrap your children in braces? ( <${s.type}>{\`\`}</${s.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(s,a){let r={};return oe.Children.forEach(s,t=>{if(!t||!t.props)return;const{children:c,...l}=t.props,v=Object.keys(l).reduce((n,i)=>(n[da[i]||i]=l[i],n),{});let{type:f}=t;switch(typeof f=="symbol"?f=f.toString():this.warnOnInvalidChildren(t,c),f){case"Symbol(react.fragment)":a=this.mapChildrenToProps(c,a);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(t,r,v,c);break;default:a=this.mapObjectTypeChildren(t,a,v,c);break}}),this.mapArrayTypeChildrenToProps(r,a)}render(){const{children:s,...a}=this.props;let r={...a},{helmetData:t}=a;if(s&&(r=this.mapChildrenToProps(s,r)),t&&!(t instanceof ss)){const c=t;t=new ss(c.context,!0),delete r.helmetData}return t?oe.createElement(hs,{...r,context:t.value}):oe.createElement($s.Consumer,null,c=>oe.createElement(hs,{...r,context:c}))}},xe(Xe,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Xe);const Os=d.createContext(),Be="hiedra_auth",Aa=()=>{try{const s=localStorage.getItem(Be);if(!s)return null;const a=JSON.parse(s);return a.expiry&&new Date().getTime()>a.expiry?(localStorage.removeItem(Be),null):a}catch(s){return console.error("Auth yüklenirken hata:",s),null}},us=s=>{try{const a=new Date().getTime()+2592e6,r={...s,expiry:a,savedAt:new Date().getTime()};localStorage.setItem(Be,JSON.stringify(r))}catch(a){console.error("Auth kaydedilirken hata:",a)}},ie=()=>{const s=d.useContext(Os);if(!s)throw new Error("useAuth must be used within AuthProvider");return s},Da=({children:s})=>{const[a,r]=d.useState(null),[t,c]=d.useState(!0),[l,v]=d.useState(null);d.useEffect(()=>{const m=Aa();m&&(r(m.user),v(m.accessToken)),c(!1)},[]);const f=async()=>{try{const m=(h,j=3e3)=>Promise.race([fetch(h,{method:"GET",headers:{Accept:"application/json"}}),new Promise((g,b)=>setTimeout(()=>b(new Error("Timeout")),j))]);try{const h=await m("https://api.ipify.org?format=json",3e3);if(h.ok){const j=await h.json();if(j.ip&&j.ip.trim()!==""&&j.ip!=="127.0.0.1"&&j.ip!=="::1")return console.log("IP adresi alındı (ipify):",j.ip),j.ip.trim()}}catch(h){console.warn("ipify servisi ile IP alınamadı, alternatif deneniyor:",h)}try{const h=await m("https://api.ipify.org?format=text",3e3);if(h.ok){const j=await h.text();if(j&&j.trim()!==""&&j.trim()!=="127.0.0.1"&&j.trim()!=="::1")return console.log("IP adresi alındı (ipify text):",j.trim()),j.trim()}}catch(h){console.warn("Alternatif IP servisi ile IP alınamadı:",h)}}catch(m){console.warn("IP servisi ile IP alınamadı:",m)}return null},z={user:a,accessToken:l,isLoading:t,isAuthenticated:!!a,login:async(m,h)=>({success:!1,error:"Lütfen e-posta doğrulama kodu ile giriş yapın"}),logout:()=>{r(null),v(null),localStorage.removeItem(Be)},requestCode:async m=>{try{const h="http://localhost:8080/api",j=await f(),g=await fetch(`${h}/auth/request-code`,{method:"POST",headers:{"Content-Type":"application/json",...j&&{"X-Client-IP":j}},body:JSON.stringify({email:m})}),b=await g.json();if(!g.ok)throw new Error(b.message||"Kod gönderilemedi");if(b.isSuccess||b.success)return{success:!0,message:b.message};throw new Error(b.message||"Kod gönderilemedi")}catch(h){return console.error("Request code error:",h),{success:!1,error:h.message||"Kod gönderilirken bir hata oluştu"}}},verifyCode:async(m,h)=>{var j,g,b;try{const o="http://localhost:8080/api",N=await f(),p=await fetch(`${o}/auth/verify-code`,{method:"POST",headers:{"Content-Type":"application/json",...N&&{"X-Client-IP":N}},body:JSON.stringify({email:m,code:h})});if(!p.ok){const A=await p.json().catch(()=>({}));throw new Error(A.message||"Doğrulama başarısız")}const C=await p.json();if(C.isSuccess||C.success){const A={user:((j=C.data)==null?void 0:j.user)||{email:m},accessToken:((g=C.data)==null?void 0:g.accessToken)||((b=C.data)==null?void 0:b.token)};return r(A.user),v(A.accessToken),us(A),{success:!0}}else throw new Error(C.message||"Doğrulama başarısız")}catch(o){return console.error("Verify code error:",o),{success:!1,error:o.message||"Doğrulama yapılırken bir hata oluştu"}}},setUser:r,setAccessToken:v,saveAuthToStorage:us};return e.jsx(Os.Provider,{value:z,children:s})},Fs=d.createContext(),Oe="hiedra_cart",Ia="guestUserId",Ea=30,Pa="http://localhost:8080/api",La=()=>{try{const s=localStorage.getItem(Oe);if(!s)return[];const a=JSON.parse(s);return a.expiry&&new Date().getTime()>a.expiry?(localStorage.removeItem(Oe),[]):a.items||[]}catch(s){return console.error("Sepet yüklenirken hata:",s),[]}},ps=s=>{try{const a=new Date().getTime()+Ea*24*60*60*1e3,r={items:s,expiry:a,savedAt:new Date().getTime()};localStorage.setItem(Oe,JSON.stringify(r))}catch(a){console.error("Sepet kaydedilirken hata:",a)}},ye=()=>{const s=d.useContext(Fs);if(!s)throw new Error("useCart must be used within CartProvider");return s},Ra=({children:s})=>{const{isAuthenticated:a,accessToken:r}=ie(),[t,c]=d.useState([]),[l,v]=d.useState(!1),f=async()=>{try{v(!0);let b=null;(!a||!r)&&(b=localStorage.getItem(Ia));const o=`${Pa}/cart${b?`?guestUserId=${b}`:""}`,N=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}});if(!N.ok)return console.warn("Sepet backend'den yüklenemedi, status:",N.status),c([]),[];const p=await N.json();if(p.isSuccess||p.success){const A=((p.data||p).items||[]).map(y=>{var R,B,T,P,M,D,$,F;const I=y.subtotal?typeof y.subtotal=="string"?parseFloat(y.subtotal):parseFloat(y.subtotal.toString()):0,S=y.unitPrice?typeof y.unitPrice=="string"?parseFloat(y.unitPrice):parseFloat(y.unitPrice.toString()):0,w=(R=y.product)!=null&&R.price?typeof y.product.price=="string"?parseFloat(y.product.price):parseFloat(y.product.price.toString()):0;return{id:((B=y.product)==null?void 0:B.id)||y.productId,name:((T=y.product)==null?void 0:T.name)||y.productName||"Ürün",price:S>0?S:w>0?w:0,image:((P=y.product)==null?void 0:P.coverImageUrl)||((M=y.product)==null?void 0:M.image)||"/images/perde1kapak.jpg",quantity:y.quantity||1,category:(($=(D=y.product)==null?void 0:D.category)==null?void 0:$.name)||((F=y.product)==null?void 0:F.category)||"Genel",customizations:y.width||y.height||y.pleatType?{en:y.width,boy:y.height,pileSikligi:y.pleatType,calculatedPrice:I>0?I:S>0?S*(y.quantity||1):0}:null,itemKey:y.id?`backend_${y.id}`:null,cartItemId:y.id}});return c(A),ps(A),A}else return console.warn("Sepet backend'den yüklenemedi:",p.message),c([]),[]}catch(b){return console.error("Sepet backend'den yüklenirken hata:",b),c([]),[]}finally{v(!1)}},n=d.useRef(!1),i=d.useRef({isAuthenticated:a,accessToken:r});d.useEffect(()=>{if(!n.current){const b=La();b&&b.length>0&&c(b),n.current=!0}},[]),d.useEffect(()=>{(i.current.isAuthenticated!==a||i.current.accessToken!==r)&&n.current?(f(),i.current={isAuthenticated:a,accessToken:r}):n.current||(i.current={isAuthenticated:a,accessToken:r})},[a,r]),d.useEffect(()=>{ps(t)},[t]);const k=(b,o={})=>{c(N=>{const p={...b,quantity:o.quantity||1,customizations:o.en||o.boy||o.pileSikligi?{en:o.en,boy:o.boy,pileSikligi:o.pileSikligi,calculatedPrice:o.calculatedPrice||b.price}:null},C=o.en||o.boy||o.pileSikligi?`${b.id}_${o.en}_${o.boy}_${o.pileSikligi}`:b.id;return N.find(y=>y.customizations&&p.customizations?y.id===b.id&&y.customizations.en===p.customizations.en&&y.customizations.boy===p.customizations.boy&&y.customizations.pileSikligi===p.customizations.pileSikligi:y.id===b.id&&!y.customizations&&!p.customizations)?N.map(y=>(y.customizations&&p.customizations?y.id===b.id&&y.customizations.en===p.customizations.en&&y.customizations.boy===p.customizations.boy&&y.customizations.pileSikligi===p.customizations.pileSikligi:y.id===b.id&&!y.customizations&&!p.customizations)?{...y,quantity:y.quantity+(o.quantity||1)}:y):[...N,{...p,itemKey:C}]})},x=(b,o=null)=>{c(N=>o?N.filter(p=>p.itemKey!==o):N.filter(p=>p.id!==b))},z=(b,o,N=null)=>{if(o<=0){x(b,N);return}c(p=>p.map(C=>N?C.itemKey===N?{...C,quantity:o}:C:C.id===b&&!C.itemKey?{...C,quantity:o}:C))},m=()=>{c([]),localStorage.removeItem(Oe)},h=()=>t.reduce((b,o)=>{var p;const N=((p=o.customizations)==null?void 0:p.calculatedPrice)||o.price;return b+N*o.quantity},0),j=()=>t.reduce((b,o)=>b+o.quantity,0),g=async()=>await f();return e.jsx(Fs.Provider,{value:{cartItems:t,addToCart:k,removeFromCart:x,updateQuantity:z,clearCart:m,getCartTotal:h,getCartItemsCount:j,refreshCart:g,isLoadingCart:l},children:s})},$a=()=>{var b;const s=J(),{getCartItemsCount:a}=ye(),{user:r,isAuthenticated:t,logout:c}=ie(),[l,v]=d.useState(!1),[f,n]=d.useState(!1),[i,k]=d.useState(!1),[x,z]=d.useState(!0),m=d.useRef(0),h=10,j=()=>{v(!l)},g=()=>{v(!1),n(!1),k(!1)};return d.useEffect(()=>{const o=N=>{f&&!N.target.closest(".user-menu-wrapper")&&n(!1),i&&!N.target.closest(".more-menu-wrapper")&&k(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[f,i]),d.useEffect(()=>{const o=()=>{const C=window.scrollY;if(C<h){z(!0),m.current=C;return}const A=C-m.current;A>h?z(!1):A<-h&&z(!0),m.current=C};let N=!1;const p=()=>{N||(window.requestAnimationFrame(()=>{o(),N=!1}),N=!0)};return window.addEventListener("scroll",p,{passive:!0}),()=>{window.removeEventListener("scroll",p)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"promotion-bar",children:e.jsxs("div",{className:"promotion-bar-container",children:[e.jsx("div",{className:"promotion-text",children:e.jsx("span",{children:"2000 TL ve üzeri alışverişlerinizde ÜCRETSİZ kargo"})}),e.jsxs("div",{className:"promotion-phone",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),e.jsx("span",{children:"(507) 205-4460"})]})]})}),e.jsx("header",{className:`header ${x?"header-visible":"header-hidden"}`,role:"banner",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"nav-left",children:[e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Tül Perde"}),e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Fon Perde"}),e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Mekanik Perde"})]}),e.jsx(O,{to:"/",className:"logo logo-center",onClick:g,children:e.jsx("div",{className:"logo-wrapper",children:e.jsx("h1",{className:"logo-title-center",children:"HIEDRA"})})}),e.jsxs("div",{className:"nav-right",children:[e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Aksesuar"}),e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Ev Tekstili"}),e.jsx(O,{to:"/kategoriler",className:"nav-link",onClick:g,children:"Kumaş"})]}),e.jsxs("nav",{className:`nav ${l?"nav-open":""}`,role:"navigation","aria-label":"Ana navigasyon",children:[e.jsx("button",{className:"nav-icon-btn",onClick:()=>s("/?search="),"aria-label":"Ara",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})}),e.jsxs("button",{className:"nav-icon-btn",onClick:()=>s("/kuponlar"),"aria-label":"Favoriler",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),e.jsx("span",{className:"icon-badge",children:"0"})]}),e.jsxs("div",{className:"more-menu-wrapper",children:[e.jsxs("button",{className:`nav-link more-link ${i?"active":""}`,onClick:()=>k(!i),"aria-label":"Daha fazla menü",children:["Daha Fazla",e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),i&&e.jsxs("div",{className:"more-dropdown",children:[e.jsxs(O,{to:"/hakkimizda",className:"more-dropdown-item",onClick:()=>{k(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Hakkımızda"]}),e.jsxs(O,{to:"/iletisim",className:"more-dropdown-item",onClick:()=>{k(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"İletişim"]}),e.jsxs(O,{to:"/sss",className:"more-dropdown-item",onClick:()=>{k(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"SSS"]}),!t&&e.jsxs(O,{to:"/siparis-sorgula",className:"more-dropdown-item",onClick:()=>{k(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sipariş Sorgula"]}),t&&e.jsxs(O,{to:"/siparislerim",className:"more-dropdown-item",onClick:()=>{k(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),e.jsx("circle",{cx:"7",cy:"20",r:"2"}),e.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),"Siparişlerim"]})]})]}),t?e.jsxs("div",{className:"user-menu-wrapper",children:[e.jsxs("button",{className:"nav-link user-link",onClick:()=>n(!f),"aria-label":"Kullanıcı menüsü",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{className:"user-email",children:(r==null?void 0:r.email)||"Kullanıcı"})]}),f&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs("div",{className:"user-dropdown-header",children:[e.jsx("div",{className:"user-avatar",children:((b=r==null?void 0:r.email)==null?void 0:b.charAt(0).toUpperCase())||"U"}),e.jsx("div",{className:"user-info",children:e.jsx("div",{className:"user-name",children:(r==null?void 0:r.email)||"Kullanıcı"})})]}),e.jsx("div",{className:"user-dropdown-divider"}),e.jsxs(O,{to:"/siparislerim",className:"user-dropdown-item",onClick:()=>{n(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),e.jsx("circle",{cx:"7",cy:"20",r:"2"}),e.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),"Siparişlerim"]}),e.jsxs(O,{to:"/profil",className:"user-dropdown-item",onClick:()=>{n(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Profilim"]}),e.jsxs(O,{to:"/adreslerim",className:"user-dropdown-item",onClick:()=>{n(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Adreslerim"]}),e.jsxs(O,{to:"/yorumlarim",className:"user-dropdown-item",onClick:()=>{n(!1),g()},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Yorumlarım"]}),e.jsxs("button",{className:"user-dropdown-item",onClick:()=>{c(),n(!1),g()},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Çıkış Yap"]})]})]}):e.jsxs(O,{to:"/giris",className:"nav-link login-link",onClick:g,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),e.jsx("polyline",{points:"10 17 15 12 10 7"}),e.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),"Giriş Yap"]}),e.jsxs(O,{to:"/cart",className:"nav-link cart-link",onClick:g,children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),e.jsx("circle",{cx:"7",cy:"20",r:"2"}),e.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),a()>0&&e.jsx("span",{className:"cart-count",children:a()})]})]}),e.jsxs("button",{className:"menu-toggle",onClick:j,"aria-label":"Menü",children:[e.jsx("span",{className:l?"active":""}),e.jsx("span",{className:l?"active":""}),e.jsx("span",{className:l?"active":""})]})]})})]})},Se=({size:s="medium",text:a=null,fullScreen:r=!1,variant:t="default"})=>{const c=`loading-${s}`,l=`loading-${t}`,v=r?"loading-fullscreen":"loading-container";return e.jsxs("div",{className:`${v} ${l}`,children:[e.jsxs("div",{className:`loading-spinner ${c}`,children:[e.jsx("div",{className:"loading-ring loading-ring-1"}),e.jsx("div",{className:"loading-ring loading-ring-2"}),e.jsx("div",{className:"loading-ring loading-ring-3"}),e.jsx("div",{className:"loading-center"})]}),a&&e.jsx("p",{className:"loading-text",children:a})]})},re=({src:s,alt:a,className:r="",placeholder:t=null,onLoad:c=null,...l})=>{const[v,f]=d.useState(!1),[n,i]=d.useState(!1),[k,x]=d.useState(!1),z=d.useRef(null);d.useEffect(()=>{const g=new IntersectionObserver(b=>{b.forEach(o=>{o.isIntersecting&&(i(!0),g.disconnect())})},{rootMargin:"50px",threshold:.01});return z.current&&g.observe(z.current),()=>{z.current&&g.unobserve(z.current),g.disconnect()}},[]);const m=()=>{f(!0),c&&c()},h=()=>{x(!0)},j=t||e.jsx("div",{className:"lazy-image-placeholder",children:e.jsx(Se,{size:"small",variant:"image"})});return e.jsxs("div",{ref:z,className:`lazy-image-wrapper ${r}`,...l,children:[!v&&!k&&j,n&&e.jsx(e.Fragment,{children:k?e.jsxs("div",{className:"lazy-image-error",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("path",{d:"M21 15l-5-5L5 21"})]}),e.jsx("span",{children:"Görsel yüklenemedi"})]}):e.jsx("img",{src:s,alt:a,className:`lazy-image ${v?"lazy-image-loaded":"lazy-image-loading"}`,onLoad:m,onError:h,loading:"lazy",decoding:"async"})}),!n&&j]})},q=({title:s,description:a,keywords:r,image:t,url:c,type:l="website",structuredData:v,noindex:f=!1})=>{const n="Hiedra Perde",i="Hiedra - Online Perde Satış | Modern ve Şık Perde Koleksiyonları",k="Türkiye'nin en kaliteli perde satış sitesi. Zebra perde, Klasik perde, Stor perde ve Jaluzi perde modelleri. Hızlı teslimat, uygun fiyat, kaliteli kumaş. Perde satış için doğru adres!",x=typeof window<"u"?window.location.origin:"https://hiedra.com",z=s?s.includes("perde satış")||s.includes("Perde Satış")?`${s} | ${n}`:`${s} - Perde Satış | ${n}`:i,m=a?a.includes("perde satış")||a.includes("Perde Satış")?a:`${a} Perde satış için Hiedra'yı ziyaret edin.`:k,h=c?`${x}${c}`:x,j=t?t.startsWith("http")?t:`${x}${t}`:`${x}/logo.png`,g="perde satış, online perde satış, perde satın al, perdeler, zebra perde, klasik perde, stor perde, jaluzi perde, perde fiyatları, uygun perde, kaliteli perde, perde modelleri, perde çeşitleri, perde koleksiyonu, türkiye perde satış, bingöl perde, bingöl perde satışı, erzurum perde, erzurum perde satışı",b=r?`${r}, ${g}`:g,o={"@context":"https://schema.org","@type":"LocalBusiness","@id":`${x}#business`,name:"Hiedra Perde",alternateName:"Hiedra Perde Satış",image:`${x}/logo.png`,logo:`${x}/logo.png`,description:"Bingöl ve Türkiye genelinde perde satış hizmeti sunan güvenilir firma. Zebra perde, Klasik perde, Stor perde ve Jaluzi perde modelleri.",telephone:"+905336360079",email:"ysufakin23@gmail.com",priceRange:"₺₺",address:{"@type":"PostalAddress",streetAddress:"Kültür Mahallesi, Örnek Sokak No:123",addressLocality:"Bingöl",addressRegion:"Bingöl",postalCode:"12000",addressCountry:"TR"},geo:{"@type":"GeoCoordinates",latitude:"38.8847",longitude:"40.4986"},openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],opens:"09:00",closes:"18:00"},{"@type":"OpeningHoursSpecification",dayOfWeek:"Saturday",opens:"10:00",closes:"16:00"}],areaServed:[{"@type":"City",name:"Bingöl"},{"@type":"State",name:"Bingöl"},{"@type":"Country",name:"Türkiye"}],serviceType:"Perde Satış ve Dekorasyon",url:x,sameAs:[]},N={"@context":"https://schema.org","@type":"Organization",name:n,url:x,logo:`${x}/logo.png`,contactPoint:{"@type":"ContactPoint",contactType:"Müşteri Hizmetleri",telephone:"+905336360079",email:"ysufakin23@gmail.com",areaServed:"TR",availableLanguage:"Turkish"},address:{"@type":"PostalAddress",streetAddress:"Kültür Mahallesi, Örnek Sokak No:123",addressLocality:"Bingöl",addressRegion:"Bingöl",postalCode:"12000",addressCountry:"TR"},sameAs:[]},C=[o,N,v,c&&c!=="/"?{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Ana Sayfa",item:x},{"@type":"ListItem",position:2,name:s||"Sayfa",item:h}]}:null].filter(Boolean);return e.jsxs(Ta,{children:[e.jsx("title",{children:z}),e.jsx("meta",{name:"description",content:m}),e.jsx("meta",{name:"keywords",content:b}),e.jsx("meta",{name:"author",content:"Hiedra Perde"}),e.jsx("meta",{name:"robots",content:f?"noindex, nofollow":"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),e.jsx("meta",{name:"googlebot",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),e.jsx("link",{rel:"canonical",href:h}),e.jsx("html",{lang:"tr"}),e.jsx("meta",{property:"og:type",content:l}),e.jsx("meta",{property:"og:url",content:h}),e.jsx("meta",{property:"og:title",content:z}),e.jsx("meta",{property:"og:description",content:m}),e.jsx("meta",{property:"og:image",content:j}),e.jsx("meta",{property:"og:image:width",content:"1200"}),e.jsx("meta",{property:"og:image:height",content:"630"}),e.jsx("meta",{property:"og:image:alt",content:s||n}),e.jsx("meta",{property:"og:site_name",content:n}),e.jsx("meta",{property:"og:locale",content:"tr_TR"}),e.jsx("meta",{property:"og:locale:alternate",content:"en_US"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:url",content:h}),e.jsx("meta",{name:"twitter:title",content:z}),e.jsx("meta",{name:"twitter:description",content:m}),e.jsx("meta",{name:"twitter:image",content:j}),e.jsx("meta",{name:"twitter:image:alt",content:s||n}),e.jsx("meta",{name:"theme-color",content:"#667eea"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),e.jsx("meta",{name:"apple-mobile-web-app-title",content:n}),e.jsx("meta",{name:"geo.region",content:"TR"}),e.jsx("meta",{name:"geo.placename",content:"Türkiye"}),C.map((A,y)=>e.jsx("script",{type:"application/ld+json",children:JSON.stringify(A)},y))]})},Ba=({title:s,subtitle:a,className:r=""})=>e.jsxs("div",{className:`category-header-home ${r}`,children:[e.jsx("h2",{className:"category-title-home",children:s}),a&&e.jsx("p",{className:"category-subtitle-home",children:a})]}),xs="http://localhost:8080/api",Oa=()=>{const s=Fe(),a=J(),{addToCart:r}=ye(),[t,c]=d.useState([]),[l,v]=d.useState(!0),[f,n]=d.useState({}),[i,k]=d.useState({}),[x,z]=d.useState(!1),[m,h]=d.useState(null),[j,g]=d.useState(""),o=new URLSearchParams(s.search).get("search")||"";d.useEffect(()=>{(async()=>{try{v(!0);const[w,R]=await Promise.all([fetch(`${xs}/products?page=0&size=1000`),fetch(`${xs}/categories`)]);if(w.ok){const B=await w.json();if(B.isSuccess||B.success){let T=[];B.data&&(B.data.content&&Array.isArray(B.data.content)?T=B.data.content:Array.isArray(B.data)&&(T=B.data)),Array.isArray(T)||(console.warn("productsData array değil, boş array kullanılıyor:",T),T=[]);let P={};if(R.ok){const D=await R.json();(D.isSuccess||D.success)&&(D.data||[]).forEach(F=>{var Z;P[F.id]={id:F.id,name:F.name,slug:F.slug||((Z=F.name)==null?void 0:Z.toLowerCase().replace(/\s+/g,"-"))||""}})}const M=T.filter(D=>(D.quantity||0)>0).map(D=>{var Z,_,ne,Y,te;const $=((Z=D.category)==null?void 0:Z.id)||null,F=$&&P[$]?P[$]:{id:$,name:((_=D.category)==null?void 0:_.name)||"Genel",slug:((ne=D.category)==null?void 0:ne.slug)||((te=(Y=D.category)==null?void 0:Y.name)==null?void 0:te.toLowerCase().replace(/\s+/g,"-"))||""};return{id:D.id,name:D.name,price:D.price?parseFloat(D.price):0,image:D.coverImageUrl||"/images/perde1kapak.jpg",detailImages:D.detailImageUrl?[D.detailImageUrl]:[],description:D.description||D.shortDescription||"",shortDescription:D.shortDescription||"",category:F.name,categoryId:F.id,categorySlug:F.slug,color:D.color||"",inStock:(D.quantity||0)>0,productCode:D.productCode||D.code||D.sku||"",quantity:D.quantity||0,mountingType:D.mountingType||"",material:D.material||"",lightTransmittance:D.lightTransmittance||"",pieceCount:D.pieceCount||null,usageArea:D.usageArea||"",reviewCount:D.reviewCount||0,averageRating:D.averageRating||0,viewCount:D.viewCount||0}});c(M)}else console.warn("Ürünler yüklenemedi:",B.message||"Bilinmeyen hata")}else{console.error("API yanıtı başarısız:",response.status,response.statusText);try{const B=await response.json().catch(()=>({}));console.error("Hata detayı:",B)}catch{console.error("Hata yanıtı parse edilemedi")}}}catch(w){console.error("Ürünler yüklenirken hata:",w)}finally{v(!1)}})()},[]);const N=d.useMemo(()=>{const S={};return t.forEach(w=>{const R=w.category;S[R]||(S[R]={name:R,id:w.categoryId,slug:w.categorySlug,products:[]}),S[R].products.push(w)}),Object.values(S).sort((w,R)=>w.name.localeCompare(R.name)).map(w=>({...w,products:w.products.sort((R,B)=>R.name.localeCompare(B.name))})).filter(w=>w.products.length>0)},[t]),p=o?t.filter(S=>S.name.toLowerCase().includes(o.toLowerCase())||S.description.toLowerCase().includes(o.toLowerCase())||S.category.toLowerCase().includes(o.toLowerCase())):t,C=S=>{a(`/product/${S}`)},A=(S,w)=>{k(R=>({...R,[w]:!0})),setTimeout(()=>{n(R=>({...R,[w]:S})),setTimeout(()=>{k(R=>({...R,[w]:!1}))},50)},200)},y=S=>{if(!S)return null;const w=S.trim();if(w.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(w))return w;const R={beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF",yeşil:"#008000",green:"#008000",kırmızı:"#FF0000",red:"#FF0000",sarı:"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"},B=w.toLowerCase();return R[B]||w};if(o)return e.jsxs("div",{className:"product-list-container",children:[e.jsx(q,{title:`"${o}" Arama Sonuçları`,description:`"${o}" için ${p.length} ürün bulundu`,url:`/?search=${encodeURIComponent(o)}`}),e.jsxs("header",{className:"product-list-header",children:[e.jsx("h1",{children:"Koleksiyonlar"}),e.jsx("p",{children:"Modern ve şık perde seçenekleri"}),e.jsx("div",{className:"search-results-info",children:e.jsxs("span",{children:['"',o,'" için ',p.length," sonuç bulundu"]})})]}),p.length===0?e.jsx("div",{className:"no-products",children:e.jsx("p",{children:"Üzgünüz, aradığınız kriterlere uygun ürün bulunamadı."})}):e.jsx("div",{className:"product-grid-search",children:p.map(S=>e.jsxs("div",{className:"product-card-search",onClick:()=>C(S.id),children:[e.jsx(re,{src:S.image,alt:S.name}),e.jsxs("div",{className:"product-card-info",children:[e.jsx("h3",{children:S.name}),e.jsxs("p",{className:"product-price",children:["Başlangıç: ",S.price.toFixed(2)," ₺"]})]})]},S.id))})]});const I=S=>{S.preventDefault(),j.trim()&&a(`/?search=${encodeURIComponent(j.trim())}`)};return l?e.jsx("div",{className:"product-list-container",children:e.jsx(Se,{size:"large",text:"Ürünler yükleniyor...",variant:"page"})}):e.jsxs("div",{className:"product-list-container",children:[e.jsx(q,{title:"Perde Satış - Online Perde Satın Al | Bingöl Perde Satışı | Hiedra Perde",description:"Bingöl ve Türkiye'nin en kaliteli perde satış sitesi. Zebra perde, Klasik perde, Stor perde ve Jaluzi perde modelleri. Bingöl perde satışı, Erzurum perde satışı. Hızlı teslimat, uygun fiyat garantisi.",keywords:"bingöl perde, bingöl perde satışı, erzurum perde, erzurum perde satışı, perde satış, online perde satış, perde satın al, perdeler, zebra perde satış, klasik perde, stor perde, jaluzi perde, perde fiyatları, uygun perde, kaliteli perde satış",url:"/"}),e.jsx("section",{className:"hero-section-modern",children:e.jsxs("div",{className:"hero-content-modern",children:[e.jsx("h1",{className:"hero-title-modern",children:"Toptan Fiyatına Perakende Satış"}),e.jsx("h2",{className:"hero-subtitle-modern",children:"Modern, Minimalist Perde Modelleri"}),e.jsxs("form",{className:"hero-search-form",onSubmit:I,children:[e.jsx("input",{type:"text",className:"hero-search-input",placeholder:"Ürünün ismini, kodunu veya etiketini yazınız.",value:j,onChange:S=>g(S.target.value)}),e.jsx("button",{type:"submit",className:"hero-search-btn",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})})]}),e.jsxs("div",{className:"hero-statistics",children:[e.jsx("div",{className:"stat-number",children:"53.000+"}),e.jsx("div",{className:"stat-label",children:"Mutlu Müşteri Siparişi"})]}),e.jsxs("div",{className:"hero-description",children:[e.jsx("h3",{className:"description-title",children:"Özelleştirilebilir Perde Modelleri"}),e.jsx("p",{className:"description-text",children:"En, boy, Pile ve bir çok ayrıntılı seçenek ile kendi perdenizi oluşturun. Türkiye'de ilk defa Villa, tiny house, bungalov ve benzeri yerler için Çatı eğimli perdeler ile size özel seçenekler."})]})]})}),e.jsxs("div",{className:"social-media-fixed",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon facebook","aria-label":"Facebook",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon instagram","aria-label":"Instagram",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),e.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),e.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),e.jsx("a",{href:"https://wa.me/905072054460",target:"_blank",rel:"noopener noreferrer",className:"social-icon whatsapp","aria-label":"WhatsApp",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]}),e.jsx("header",{className:"product-list-header-premium",children:e.jsxs("div",{className:"section-header-content-premium",children:[e.jsx("div",{className:"section-header-badge-premium",children:e.jsx("span",{children:"Koleksiyonlarımız"})}),e.jsx("h1",{className:"section-header-title-premium",children:"Özenle Seçilmiş Ürünler"}),e.jsx("p",{className:"section-header-subtitle-premium",children:"Her biri özenle tasarlanmış, kaliteli malzemelerden üretilmiş perde koleksiyonlarımızı keşfedin"})]})}),e.jsx("div",{className:"categories-showcase-home",children:N.map(S=>{const w=f[S.name]||S.products[0];return e.jsxs("div",{className:"category-section-home",children:[e.jsx(Ba,{title:S.name,subtitle:`${S.products.length} ürün`}),e.jsxs("div",{className:"category-product-showcase-home",children:[e.jsx("div",{className:"product-image-section-home",children:e.jsxs("div",{className:`main-product-image-wrapper-home ${i[S.name]?"fade-out":"fade-in"}`,children:[e.jsx(re,{src:w.image||"",alt:w.name,className:"main-product-image-home"}),w.detailImages&&w.detailImages.length>0&&w.detailImages[0]&&e.jsxs("div",{className:"detail-image-preview-home",onClick:()=>{h(w.detailImages[0]),z(!0)},title:"Detay fotoğrafını görüntüle",children:[e.jsx("div",{className:"detail-image-preview-overlay-home",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})}),e.jsx(re,{src:w.detailImages[0],alt:`${w.name} detay`,className:"detail-image-preview-img-home"})]})]})}),e.jsxs("div",{className:`product-details-section-home ${i[S.name]?"fade-out":"fade-in"}`,children:[e.jsxs("div",{className:"product-header-info-home",children:[e.jsx("h2",{className:"product-title-home",children:w.name}),w.productCode&&e.jsxs("p",{className:"product-code-home",children:["Kod: ",w.productCode]}),(w.averageRating>0||w.reviewCount>0)&&e.jsxs("div",{className:"product-rating-section-home",children:[e.jsx("div",{className:"product-rating-stars-home",children:[1,2,3,4,5].map(R=>{const B=R<=Math.floor(w.averageRating),T=!B&&R-.5<=w.averageRating,P=`half-gradient-home-${w.id}-${R}`;return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:B?"#FFD700":T?`url(#${P})`:"none",stroke:B||T?"#FFD700":"#ddd",strokeWidth:"2",children:[T&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:P,children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})]},R)})}),w.averageRating>0&&e.jsx("span",{className:"product-rating-value-home",children:w.averageRating.toFixed(1)}),w.reviewCount>0&&e.jsxs("span",{className:"product-review-count-home",children:["(",w.reviewCount," değerlendirme)"]})]}),e.jsxs("div",{className:"product-price-large-home",children:[e.jsx("span",{className:"price-label-home",children:"Başlangıç:"}),e.jsxs("span",{className:"price-value-home",children:[w.price.toFixed(2)," ₺"]})]})]}),S.products.length>0&&e.jsxs("div",{className:"color-selection-section-home",children:[e.jsx("h3",{className:"color-selection-title-home",children:"RENK SEÇİMİ"}),e.jsx("div",{className:"color-options-home",children:S.products.map(R=>{const B=y(R.color);return e.jsxs("button",{className:`color-option-home ${w.id===R.id?"active":""}`,onClick:()=>A(R,S.name),title:R.color||R.name,children:[e.jsx("div",{className:"color-swatch-home",style:{backgroundColor:B||"#ccc"},children:w.id===R.id&&e.jsx("div",{className:"color-checkmark-home",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),R.color&&e.jsx("span",{className:"color-name-home",children:R.color})]},R.id)})})]}),(w.mountingType||w.material||w.lightTransmittance||w.usageArea||w.pieceCount||w.color)&&e.jsxs("div",{className:"product-features-home",children:[w.mountingType&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsxs("span",{children:["Takma Şekli: ",w.mountingType]})]}),w.material&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),e.jsxs("span",{children:["Materyal: ",w.material]})]}),w.lightTransmittance&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),e.jsxs("span",{children:["Işık Geçirgenliği: ",w.lightTransmittance]})]}),w.usageArea&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{children:["Kullanım Alanı: ",w.usageArea]})]}),w.pieceCount&&w.pieceCount>0&&e.jsxs("div",{className:"product-feature-item-home",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),e.jsxs("span",{children:["Parça Sayısı: ",w.pieceCount," Adet"]})]})]}),e.jsxs("div",{className:"product-actions-home",children:[e.jsxs("button",{className:"view-product-detail-btn-home",onClick:()=>C(w.id),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Ürün Detayını Görüntüle"]}),S.id&&e.jsxs("button",{className:"view-category-btn-home",onClick:()=>a(`/kategori/${S.id}/${S.slug||S.name.toLowerCase().replace(/\s+/g,"-")}`),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Tüm ",S.name," Ürünlerini Gör"]})]})]})]})]},S.name)})}),x&&m&&e.jsx("div",{className:"detail-modal-overlay-home",onClick:()=>z(!1),children:e.jsxs("div",{className:"detail-modal-content-home",onClick:S=>S.stopPropagation(),children:[e.jsx("button",{className:"detail-modal-close-home",onClick:()=>z(!1),"aria-label":"Kapat",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx(re,{src:m,alt:"Ürün detay",className:"detail-modal-image-home"})]})})]})},Pe="http://localhost:8080/api",Fa=()=>{var Q;const{id:s}=we();J();const{refreshCart:a}=ye(),{accessToken:r}=ie(),[t,c]=d.useState(1),[l,v]=d.useState(0),f=d.useRef(null),n=d.useRef(!1),[i,k]=d.useState(null),[x,z]=d.useState(!0),[m,h]=d.useState(!1),[j,g]=d.useState(""),[b,o]=d.useState(!1),[N,p]=d.useState(""),[C,A]=d.useState(""),[y,I]=d.useState("1x1"),[S,w]=d.useState(0),[R,B]=d.useState(!1),[T,P]=d.useState(!1),[M,D]=d.useState(!1),[$,F]=d.useState([]),Z=[{value:"1x1",label:"Pilesiz (1x1)"},{value:"1x2",label:"1x2"},{value:"1x3",label:"1x3"}];d.useEffect(()=>{(async()=>{var E;if(!s){z(!1);return}try{z(!0),k(null);const U=typeof s=="string"?parseInt(s,10):s;if(isNaN(U)){console.error("Geçersiz ürün ID:",s),z(!1);return}console.log("Ürün detayı çekiliyor, ID:",U);const H=await fetch(`${Pe}/products/${U}`);if(H.ok){const G=await H.json();if(console.log("Backend yanıtı:",G),G.isSuccess||G.success){const K=G.data||G,ee=typeof K.price=="number"?K.price:parseFloat(K.price)||0;k({...K,id:K.id||U,name:K.name||"Ürün",price:ee,image:K.coverImageUrl||K.image||"/images/perde1kapak.jpg",detailImages:K.detailImageUrl?Array.isArray(K.detailImageUrl)?K.detailImageUrl:[K.detailImageUrl]:[],inStock:(K.quantity||0)>0,category:((E=K.category)==null?void 0:E.name)||K.category||"Genel",mountingType:K.mountingType||"",material:K.material||"",lightTransmittance:K.lightTransmittance||"",pieceCount:K.pieceCount||null,usageArea:K.usageArea||"",color:K.color||"",reviewCount:K.reviewCount||0,averageRating:K.averageRating||0,viewCount:K.viewCount||0})}else console.error("Backend yanıt hatası:",G),k(null)}else H.status===404?(console.error("Ürün bulunamadı (404)"),k(null)):(console.error("HTTP hatası:",H.status),k(null))}catch(U){console.error("Ürün yüklenirken hata:",U),k(null)}finally{z(!1)}})()},[s]),d.useEffect(()=>{(async()=>{try{const E=await fetch(`${Pe}/products`);if(E.ok){const U=await E.json();if(U.isSuccess||U.success){const G=(U.data||[]).map(K=>{var ee;return{id:K.id,name:K.name,price:K.price?parseFloat(K.price):0,image:K.coverImageUrl||"/images/perde1kapak.jpg",description:K.description||"",category:((ee=K.category)==null?void 0:ee.name)||"Genel",inStock:(K.quantity||0)>0}});F(G)}}}catch(E){console.error("Ürünler yüklenirken hata:",E)}})()},[]);const _=d.useMemo(()=>i?i.detailImages?[i.image,...i.detailImages]:[i.image]:[],[i]);d.useEffect(()=>{if(!i||!_||_.length<=1){f.current&&(clearInterval(f.current),f.current=null);return}f.current&&(clearInterval(f.current),f.current=null);const u=_.length,E=()=>{f.current=setInterval(()=>{v(U=>(U+1)%u)},5e3)};return n.current||E(),()=>{f.current&&(clearInterval(f.current),f.current=null)}},[i,_]);const ne=u=>{v(u),f.current&&(clearInterval(f.current),f.current=null),_.length>1&&setTimeout(()=>{n.current||(f.current=setInterval(()=>{v(E=>(E+1)%_.length)},5e3))},100)},Y=()=>{n.current=!0,f.current&&(clearInterval(f.current),f.current=null)},te=()=>{n.current=!1,_.length>1&&!f.current&&(f.current=setInterval(()=>{v(u=>(u+1)%_.length)},5e3))},ue=oe.useCallback((u,E)=>{if(!i||!i.price){w(0);return}let U=1;try{const ee=E.split("x");ee.length===2&&(U=parseFloat(ee[1]),isNaN(U)&&(U=1))}catch{U=1}const H=u/100,K=(typeof i.price=="number"?i.price:parseFloat(i.price)||0)*H*U;w(Math.round(K*100)/100)},[i]),ce=oe.useCallback(async(u,E,U)=>{if(!u||!E||!U||!i||!i.id){w(0);return}const H=parseFloat(u),G=parseFloat(E);if(isNaN(H)||isNaN(G)||H<=0||G<=0){w(0);return}P(!0);try{const K=await fetch(`${Pe}/products/${i.id}/calculate-price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:H,height:G,pleatType:U,price:i.price})});if(K.ok){const ee=await K.json();if(ee.isSuccess||ee.success){const se=parseFloat(ee.data.calculatedPrice);w(isNaN(se)?0:se)}else ue(H,U)}else ue(H,U)}catch(K){console.error("Fiyat hesaplama hatası:",K),ue(H,U)}finally{P(!1)}},[i,ue]);d.useEffect(()=>{if(i&&i.id&&N&&C&&y){const u=setTimeout(()=>{ce(N,C,y)},500);return()=>clearTimeout(u)}else w(0)},[N,C,y,i==null?void 0:i.id,i==null?void 0:i.price,ce]);const ge=d.useMemo(()=>!i||!i.id||!i.name||!i.price?null:{"@context":"https://schema.org","@type":"Product",name:`${i.name||"Ürün"} - Perde Satış`,description:`${i.description||""} Perde satış için Hiedra'yı ziyaret edin. Kaliteli kumaş, uygun fiyat, hızlı teslimat.`,image:(_&&_.length>0?_:[i.image||"/images/perde1kapak.jpg"]).map(u=>u?u.startsWith("http")?u:`${typeof window<"u"?window.location.origin:"https://hiedra.com"}${u}`:"").filter(u=>u),sku:`PROD-${i.id}`,mpn:`HIEDRA-${i.id}`,category:`${i.category||"Genel"} Perde`,brand:{"@type":"Brand",name:"Hiedra Perde"},manufacturer:{"@type":"Organization",name:"Hiedra Perde"},offers:{"@type":"Offer",url:typeof window<"u"?window.location.href:`https://hiedra.com/product/${i.id}`,priceCurrency:"TRY",price:(typeof i.price=="number"?i.price:parseFloat(i.price)||0).toString(),priceValidUntil:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],availability:i.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Hiedra Perde"},priceSpecification:{"@type":"UnitPriceSpecification",priceCurrency:"TRY",price:(typeof i.price=="number"?i.price:parseFloat(i.price)||0).toString(),unitCode:"MTR",unitText:"metre"}},aggregateRating:{"@type":"AggregateRating",ratingValue:(i.averageRating||4.8).toString(),reviewCount:(i.reviewCount||0).toString(),bestRating:"5",worstRating:"1"},review:i.reviewCount>0?[{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:(i.averageRating||5).toString(),bestRating:"5"},author:{"@type":"Person",name:"Müşteri"},reviewBody:`${i.name||"Ürün"} ürünü kaliteli ve hızlı teslimat ile memnun kaldık.`}]:[]},[i,_]),le=oe.useCallback(async u=>{if(u.preventDefault(),g(""),o(!1),!N||!C){g("Lütfen en ve boy değerlerini giriniz.");return}const E=parseFloat(N),U=parseFloat(C);if(isNaN(E)||isNaN(U)){g("Lütfen geçerli sayısal değerler giriniz.");return}if(E<=0||E>3e4){g("En değeri 0 ile 30000 cm arasında olmalıdır.");return}if(U<=0||U>500){g("Boy değeri 0 ile 500 cm arasında olmalıdır.");return}if(!i||!i.id){g("Ürün bilgisi bulunamadı.");return}h(!0);try{let H=null;r||(H=localStorage.getItem("guestUserId"),H||(H="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",H)));const G=await fetch(`${Pe}/cart/items${H?`?guestUserId=${H}`:""}`,{method:"POST",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}},body:JSON.stringify({productId:i.id,quantity:t,width:E,height:U,pleatType:y})}),K=await G.json();if(G.ok&&(K.isSuccess||K.success))a&&await a(),o(!0);else throw new Error(K.message||"Ürün sepete eklenemedi")}catch(H){console.error("Sepete ekleme hatası:",H),g(H.message||"Ürün sepete eklenirken bir hata oluştu. Lütfen tekrar deneyin.")}finally{h(!1)}},[i,t,N,C,y,S,r,a]);return x?e.jsx("div",{className:"product-detail-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Ürün bilgileri yükleniyor..."})]})}):i?e.jsxs("div",{className:"product-detail-container",children:[i&&e.jsx(q,{title:`${i.name} - ${i.category} Perde Satış | Fiyat: ${i.price} ₺`,description:`${i.description} ${i.category} perde satış için en uygun fiyat: ${i.price} ₺. Kaliteli kumaş, hızlı teslimat. Perde satın al.`,keywords:`${i.name}, ${i.category} perde satış, ${i.category.toLowerCase()} perde, perde satış, online perde satış, ${i.price} TL perde, kaliteli perde`,image:i.image,url:`/product/${i.id}`,type:"product",structuredData:ge}),i&&e.jsxs("div",{className:"product-detail-wrapper",children:[e.jsx("div",{className:"product-detail-badge-container",children:e.jsx("span",{className:"product-detail-badge category-badge-top",children:i.category||"Genel"})}),e.jsxs("div",{className:"product-detail-content",children:[e.jsxs("section",{className:"product-detail-images",children:[_.length>1&&e.jsx("div",{className:"product-side-thumbnails-inside",children:_.slice(0,3).map((u,E)=>e.jsx("button",{className:`side-thumbnail-inside ${l===E?"active":""}`,onClick:()=>ne(E),onMouseEnter:()=>v(E),children:e.jsx(re,{src:u,alt:`${i.name} - ${i.category} perde detay görüntüsü ${E+1}`,className:"thumbnail-image"})},E))}),e.jsxs("div",{className:"main-image-container",onMouseEnter:Y,onMouseLeave:te,children:[e.jsxs("div",{className:"product-badges-top",children:[e.jsx("span",{className:"badge badge-return",children:"14 Gün Koşulsuz İade"}),e.jsx("span",{className:"badge badge-shipping",children:"Ücretsiz Kargo"})]}),e.jsx(re,{src:_[l],alt:`${i.name} - ${i.category} perde modeli. ${i.description.substring(0,120)}`,className:"main-image"}),e.jsx("div",{className:"image-gradient-overlay"}),e.jsxs("div",{className:"image-count-indicator",children:[l+1," / ",_.length]}),_.length>1&&e.jsx("div",{className:"auto-slide-indicator",children:e.jsx("div",{className:"slide-progress-bar",children:e.jsx("div",{className:"slide-progress-fill"},l)})}),_.length>3&&e.jsxs("button",{className:"detail-photo-btn-inside",onClick:()=>v(_.length>3?3:_.length-1),title:"Detay fotoğrafı görüntüle",children:[e.jsx(re,{src:_[_.length>3?3:_.length-1],alt:"Detay görüntüle",className:"detail-thumbnail"}),e.jsxs("div",{className:"detail-btn-overlay",children:[e.jsxs("svg",{className:"zoom-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"}),e.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),e.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),e.jsx("span",{children:"Detay Gör"})]})]})]})]}),e.jsxs("article",{className:"product-detail-info",children:[e.jsxs("div",{className:"product-header-info",children:[e.jsx("span",{className:"product-category",children:i.category}),e.jsx("h1",{className:"product-name",children:i.name}),i.productCode&&e.jsxs("span",{className:"product-code",children:["Ürün Kodu: ",e.jsx("strong",{children:i.productCode})]}),(i.averageRating&&i.averageRating>0||i.reviewCount&&i.reviewCount>0)&&e.jsxs("div",{className:"product-rating-section",children:[e.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(u=>{const E=i.averageRating||0,U=u<=Math.floor(E);return e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:U?"#FFD700":"none",stroke:U?"#FFD700":"#ddd",strokeWidth:"2",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},u)}),i.averageRating>0&&e.jsx("span",{className:"rating-value",children:i.averageRating.toFixed(1)})]}),i.reviewCount>0&&e.jsxs("span",{className:"review-count",children:["(",i.reviewCount," ",(i.reviewCount===1,"yorum"),")"]})]})]}),e.jsx("p",{className:"product-description",style:{fontSize:"1.1rem",lineHeight:"1.8",marginBottom:"2rem",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.description}),(i.mountingType||i.material||i.lightTransmittance||i.pieceCount||i.color||i.usageArea||i.pleatType||i.width&&i.height)&&e.jsxs("div",{className:"product-specifications",children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"var(--text-primary)"},children:"Ürün Özellikleri"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.mountingType&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Takma Şekli"}),e.jsx("div",{className:"spec-value",children:i.mountingType})]}),i.material&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Materyal"}),e.jsx("div",{className:"spec-value",children:i.material})]}),i.pleatType&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Pile"}),e.jsx("div",{className:"spec-value",children:i.pleatType})]}),i.lightTransmittance&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Işık Geçirgenliği"}),e.jsx("div",{className:"spec-value",children:i.lightTransmittance})]}),i.pieceCount&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Parça Sayısı"}),e.jsx("div",{className:"spec-value",children:i.pieceCount})]}),i.color&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Renk"}),e.jsx("div",{className:"spec-value",children:i.color})]}),i.width&&i.height&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Beden"}),e.jsxs("div",{className:"spec-value",children:[i.width," x ",i.height," cm"]})]}),i.usageArea&&e.jsxs("div",{className:"spec-item",children:[e.jsx("div",{className:"spec-label",children:"Kullanım Alanı"}),e.jsx("div",{className:"spec-value",children:i.usageArea})]})]})]}),e.jsxs("div",{className:"product-features",children:[e.jsxs("div",{className:"feature-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),e.jsx("span",{children:"Kaliteli Kumaş"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),e.jsx("span",{children:"Hızlı Teslimat"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),e.jsx("span",{children:"Uygun Fiyat"})]})]}),e.jsx("div",{className:"detail-price-section",children:e.jsxs("div",{className:"price-info",children:[e.jsx("span",{className:"price-label",children:"Metre Fiyatı:"}),e.jsxs("span",{className:"detail-price",children:[i.price," ₺"]})]})}),e.jsxs("div",{className:"pricing-form-wrapper",children:[e.jsxs("button",{type:"button",className:"pricing-form-toggle",onClick:()=>D(!M),children:[e.jsx("h2",{className:"form-title",children:"Özel Fiyatlandırma"}),e.jsx("svg",{className:`form-toggle-arrow ${M?"open":""}`,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),e.jsxs("form",{className:`pricing-form ${M?"open":""}`,onSubmit:le,children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"en",children:["En (cm) ",e.jsx("span",{className:"required",children:"*"}),e.jsx("span",{className:"form-hint",children:"Max: 30000 cm"})]}),e.jsx("input",{type:"number",id:"en",value:N,onChange:u=>{const E=u.target.value;(E===""||parseFloat(E)>=0&&parseFloat(E)<=3e4)&&p(E)},min:"0",max:"30000",step:"0.1",placeholder:"Örn: 200",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"boy",children:["Boy (cm) ",e.jsx("span",{className:"required",children:"*"}),e.jsx("span",{className:"form-hint",children:"Max: 500 cm"})]}),e.jsx("input",{type:"number",id:"boy",value:C,onChange:u=>{const E=u.target.value;(E===""||parseFloat(E)>=0&&parseFloat(E)<=500)&&A(E)},min:"0",max:"500",step:"0.1",placeholder:"Örn: 250",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"pileSikligi",children:["Pile Sıklığı ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"custom-dropdown",children:[e.jsxs("button",{type:"button",className:"dropdown-trigger",onClick:()=>B(!R),onBlur:()=>setTimeout(()=>B(!1),200),children:[e.jsx("span",{className:"dropdown-selected",children:(Q=Z.find(u=>u.value===y))==null?void 0:Q.label}),e.jsx("svg",{className:`dropdown-arrow ${R?"open":""}`,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),R&&e.jsx("div",{className:"dropdown-menu",children:Z.map(u=>e.jsx("button",{type:"button",className:`dropdown-option ${y===u.value?"selected":""}`,onClick:()=>{I(u.value),B(!1)},children:e.jsx("span",{className:"option-label",children:u.label})},u.value))})]}),e.jsx("p",{className:"form-info",children:"Pile sıklığı fiyatlandırmayı etkiler: 1x1 (x1), 1x2 (x2), 1x3 (x3)"})]}),S>0&&e.jsx("div",{className:"calculated-price-section",children:e.jsxs("div",{className:"price-breakdown",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{children:"Metre Fiyatı:"}),e.jsxs("span",{children:[i.price," ₺"]})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{children:"En:"}),e.jsxs("span",{children:[N," cm (",parseFloat(N)/100," m)"]})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{children:"Pile Çarpanı:"}),e.jsx("span",{children:y})]}),e.jsxs("div",{className:"breakdown-item total",children:[e.jsx("span",{children:"Toplam Fiyat:"}),e.jsx("span",{className:"total-price",children:T?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"spinner",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",display:"inline-block",marginRight:"0.5rem",verticalAlign:"middle"},children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Hesaplanıyor..."]}):`${S.toFixed(2)} ₺`})]})]})})]}),e.jsxs("div",{className:"quantity-section",children:[e.jsx("label",{children:"Adet:"}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{type:"button",onClick:()=>c(Math.max(1,t-1)),children:"-"}),e.jsx("span",{children:t}),e.jsx("button",{type:"button",onClick:()=>c(t+1),children:"+"})]})]}),j&&e.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:j}),b&&e.jsx("div",{className:"success-message",style:{padding:"1rem",backgroundColor:"#efe",color:"#3c3",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #cfc"},children:"✓ Ürün sepete başarıyla eklendi!"}),e.jsx("button",{type:"submit",className:"add-to-cart-btn",disabled:!N||!C||S===0||m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",marginRight:"0.5rem"},children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Ekleniyor..."]}):"Sepete Ekle"})]})]})]})]})]}),e.jsxs("button",{type:"button",className:"product-detail-fab",onClick:u=>{u.preventDefault(),u.stopPropagation(),D(!0),setTimeout(()=>{const E=document.querySelector(".pricing-form-wrapper");E&&(E.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const U=E.querySelector('input[type="number"]');U&&U.focus()},600))},100)},onMouseDown:u=>{u.preventDefault(),u.stopPropagation()},onMouseUp:u=>{u.preventDefault(),u.stopPropagation()},title:"Özelleştir & Sipariş Ver",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),e.jsx("span",{children:"Özelleştir & Sipariş Ver"})]}),i&&e.jsxs("section",{className:"related-products-section",children:[e.jsxs("div",{className:"related-products-header",children:[e.jsx("h2",{children:"Benzer Ürünler"}),e.jsx("p",{className:"related-products-subtitle",children:"Size uygun diğer perde modellerini keşfedin"})]}),e.jsxs("div",{className:"related-products-grid",children:[$.filter(u=>u.id!==i.id&&u.category===(i.category||"Genel")).slice(0,3).map(u=>e.jsxs(O,{to:`/product/${u.id}`,className:"related-product-card",children:[e.jsxs("div",{className:"related-product-image-wrapper",children:[e.jsx(re,{src:u.image,alt:`${u.name} - ${u.category} perde satış`,className:"related-product-image"}),e.jsxs("div",{className:"related-product-overlay",children:[e.jsx("span",{className:"related-product-category",children:u.category}),e.jsx("span",{className:"related-product-view",children:"Görüntüle →"})]})]}),e.jsxs("div",{className:"related-product-info",children:[e.jsx("h3",{children:u.name}),e.jsxs("p",{className:"related-product-description",children:[(u.description||"").substring(0,60),(u.description||"").length>60?"...":""]}),e.jsx("div",{className:"related-product-footer",children:e.jsxs("span",{className:"related-product-price",children:[(typeof u.price=="number"?u.price:parseFloat(u.price)||0).toFixed(2)," ₺"]})})]})]},u.id)),$.filter(u=>u.id!==i.id&&u.category!==(i.category||"Genel")).slice(0,3-$.filter(u=>u.id!==i.id&&u.category===(i.category||"Genel")).length).map(u=>e.jsxs(O,{to:`/product/${u.id}`,className:"related-product-card",children:[e.jsxs("div",{className:"related-product-image-wrapper",children:[e.jsx(re,{src:u.image,alt:`${u.name} - ${u.category} perde satış`,className:"related-product-image"}),e.jsxs("div",{className:"related-product-overlay",children:[e.jsx("span",{className:"related-product-category",children:u.category}),e.jsx("span",{className:"related-product-view",children:"Görüntüle →"})]})]}),e.jsxs("div",{className:"related-product-info",children:[e.jsx("h3",{children:u.name}),e.jsxs("p",{className:"related-product-description",children:[(u.description||"").substring(0,60),(u.description||"").length>60?"...":""]}),e.jsx("div",{className:"related-product-footer",children:e.jsxs("span",{className:"related-product-price",children:[(typeof u.price=="number"?u.price:parseFloat(u.price)||0).toFixed(2)," ₺"]})})]})]},u.id))]}),e.jsxs("div",{className:"category-links-section",children:[e.jsx("h3",{children:"Diğer Kategoriler"}),e.jsxs("div",{className:"category-links",children:[e.jsxs(O,{to:"/",className:"category-link",children:[e.jsx("span",{children:"Tüm Ürünler"}),e.jsxs("span",{className:"category-count",children:["(",$.length," ürün)"]})]}),[...new Set($.map(E=>E.category).filter(Boolean))].map(E=>{const U=$.filter(H=>H.category===E);return e.jsxs(O,{to:`/category/${encodeURIComponent(E.toLowerCase().replace(/\s+/g,"-"))}`,className:"category-link",children:[e.jsxs("span",{children:[E," Perde"]}),e.jsxs("span",{className:"category-count",children:["(",U.length," ürün)"]})]},E)})]})]})]})]}):e.jsx("div",{className:"product-detail-container",children:e.jsxs("div",{className:"product-not-found",children:[e.jsx("h2",{children:"Ürün bulunamadı"}),e.jsx("p",{children:"Aradığınız ürün mevcut değil veya silinmiş olabilir."}),e.jsx(O,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})},Ma="http://localhost:8080/api",Ua=()=>{const{categoryName:s}=we(),a=J(),{addToCart:r}=ye(),[t,c]=d.useState([]),[l,v]=d.useState(!0),[f,n]=d.useState(null),[i,k]=d.useState(null);d.useEffect(()=>{s&&(async()=>{try{v(!0);const N=await fetch(`${Ma}/products`);if(N.ok){const p=await N.json();if(p.isSuccess||p.success){const A=(p.data||[]).filter(w=>(w.quantity||0)>0).map(w=>{var R;return{id:w.id,name:w.name,price:w.price?parseFloat(w.price):0,image:w.coverImageUrl||"/images/perde1kapak.jpg",detailImages:w.detailImageUrl?[w.detailImageUrl]:[],description:w.description||"",category:((R=w.category)==null?void 0:R.name)||"Genel",color:w.color||"",inStock:(w.quantity||0)>0,productCode:w.productCode||w.code||"",quantity:w.quantity||0,mountingType:w.mountingType||"",material:w.material||"",lightTransmittance:w.lightTransmittance||"",pieceCount:w.pieceCount||null,usageArea:w.usageArea||"",reviewCount:w.reviewCount||0,averageRating:w.averageRating||0,viewCount:w.viewCount||0}}),I=decodeURIComponent(s||"").replace(/-/g," ").replace(/\b\w/g,w=>w.toUpperCase()),S=A.filter(w=>{const R=w.category||"";return R.toLowerCase()===I.toLowerCase()||R.toLowerCase().includes(I.toLowerCase())||I.toLowerCase().includes(R.toLowerCase())});c(S),S.length>0&&n(S[0].id)}}}catch(N){console.error("Ürünler yüklenirken hata:",N)}finally{v(!1)}})()},[s]);const x=d.useMemo(()=>{const o={};return t.forEach(N=>{if(N.color){const p=N.color.trim();o[p]||(o[p]=[]),o[p].push(N)}}),o},[t]),z=d.useMemo(()=>Object.keys(x).sort(),[x]),m=d.useMemo(()=>i&&x[i]&&x[i].length>0?x[i][0]:f?t.find(o=>o.id===f)||t[0]:t[0]||null,[f,i,t,x]),h=o=>{k(o),x[o]&&x[o].length>0&&n(x[o][0].id)},j=o=>{n(o);const N=t.find(p=>p.id===o);N&&N.color&&k(N.color.trim())},g=o=>{a(`/product/${o}`)};if(l)return e.jsx("div",{className:"category-products-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Ürünler yükleniyor..."})]})});if(t.length===0){const o=decodeURIComponent(s||"").replace(/-/g," ").replace(/\b\w/g,N=>N.toUpperCase());return e.jsx("div",{className:"category-products-container",children:e.jsxs("div",{className:"category-not-found",children:[e.jsxs("h2",{children:[o," kategorisinde ürün bulunamadı"]}),e.jsx("p",{children:"Bu kategoride henüz ürün bulunmamaktadır."}),e.jsx(O,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})}const b=decodeURIComponent(s||"").replace(/-/g," ").replace(/\b\w/g,o=>o.toUpperCase());return m!=null&&m.detailImages?[m.image,...m.detailImages]:m==null||m.image,e.jsxs("div",{className:"category-products-container",children:[e.jsx(q,{title:`${b} - Perde Satış | Hiedra`,description:`${b} kategorisindeki tüm perde modelleri. Kaliteli kumaş, uygun fiyat, hızlı teslimat.`,url:`/category/${s}`}),e.jsxs("header",{className:"category-header",children:[e.jsx("h1",{children:b}),e.jsxs("p",{children:[t.length," ürün bulundu"]})]}),e.jsxs("div",{className:"category-products-content",children:[e.jsx("div",{className:"main-product-section",children:m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"main-product-image-wrapper",onClick:()=>g(m.id),children:[e.jsxs("div",{className:"product-badges-top",children:[e.jsx("span",{className:"badge badge-return",children:"14 Gün Koşulsuz İade"}),e.jsx("span",{className:"badge badge-shipping",children:"Ücretsiz Kargo"})]}),e.jsx(re,{src:m.image,alt:m.name,className:"main-product-image"}),m.detailImages&&m.detailImages.length>0&&e.jsxs("div",{className:"detail-image-preview",children:[e.jsx(re,{src:m.detailImages[0],alt:`${m.name} detay fotoğrafı`,className:"detail-preview-image"}),e.jsxs("div",{className:"detail-preview-label",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"}),e.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),e.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),e.jsx("span",{children:"Detay Fotoğrafı"})]})]})]}),e.jsxs("div",{className:"main-product-info",children:[e.jsxs("div",{className:"product-header",children:[e.jsx("div",{className:"product-category-badge",children:m.category}),e.jsx("h2",{className:"product-name",children:m.name}),m.productCode&&e.jsxs("div",{className:"product-code-display",children:[e.jsx("span",{className:"code-label",children:"Ürün Kodu:"}),e.jsx("span",{className:"code-value",children:m.productCode})]}),e.jsxs("div",{className:"product-price-section",children:[e.jsx("span",{className:"price-label",children:"Başlangıç:"}),e.jsxs("span",{className:"price-value",children:[m.price.toFixed(2)," ₺"]})]})]}),(m.averageRating&&m.averageRating>0||m.reviewCount&&m.reviewCount>0)&&e.jsxs("div",{className:"product-rating-section",children:[e.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(o=>{const N=m.averageRating||0,p=o<=Math.floor(N);return e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:p?"#FFD700":"none",stroke:p?"#FFD700":"#ddd",strokeWidth:"2",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},o)}),m.averageRating>0&&e.jsx("span",{className:"rating-value",children:m.averageRating.toFixed(1)})]}),m.reviewCount>0&&e.jsxs("span",{className:"review-count",children:["(",m.reviewCount," ",(m.reviewCount===1,"yorum"),")"]})]}),m.description&&e.jsx("p",{className:"product-description",children:m.description}),e.jsxs("div",{className:"product-specifications",children:[e.jsx("h4",{className:"specifications-title",children:"Ürün Özellikleri"}),e.jsxs("div",{className:"specifications-grid",children:[m.mountingType&&e.jsxs("div",{className:"spec-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsxs("div",{className:"spec-content",children:[e.jsx("span",{className:"spec-label",children:"Takma Şekli"}),e.jsx("span",{className:"spec-value",children:m.mountingType})]})]}),m.material&&e.jsxs("div",{className:"spec-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),e.jsxs("div",{className:"spec-content",children:[e.jsx("span",{className:"spec-label",children:"Materyal"}),e.jsx("span",{className:"spec-value",children:m.material})]})]}),m.lightTransmittance&&e.jsxs("div",{className:"spec-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),e.jsxs("div",{className:"spec-content",children:[e.jsx("span",{className:"spec-label",children:"Işık Geçirgenliği"}),e.jsx("span",{className:"spec-value",children:m.lightTransmittance})]})]}),m.pieceCount&&e.jsxs("div",{className:"spec-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),e.jsxs("div",{className:"spec-content",children:[e.jsx("span",{className:"spec-label",children:"Parça Sayısı"}),e.jsxs("span",{className:"spec-value",children:[m.pieceCount," Adet"]})]})]}),m.usageArea&&e.jsxs("div",{className:"spec-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("div",{className:"spec-content",children:[e.jsx("span",{className:"spec-label",children:"Kullanım Alanı"}),e.jsx("span",{className:"spec-value",children:m.usageArea})]})]})]})]}),e.jsxs("button",{className:"customize-btn",onClick:()=>g(m.id),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Özelleştir & Sipariş Ver"]})]})]})}),z.length>0&&e.jsxs("div",{className:"color-palette-section",children:[e.jsx("h3",{className:"color-palette-title",children:"Renk Seçenekleri"}),e.jsx("div",{className:"color-palette",children:z.map(o=>{const N=x[o],p=i===o,C=N.length;return e.jsxs("button",{className:`color-button ${p?"active":""}`,onClick:()=>h(o),title:`${o} (${C} ürün)`,children:[e.jsxs("div",{className:"color-button-content",children:[e.jsx("div",{className:"color-name",children:o}),e.jsxs("div",{className:"color-count",children:[C," ürün"]})]}),p&&e.jsx("div",{className:"color-check",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},o)})})]})]}),t.length>1&&e.jsxs("section",{className:"other-products-section",children:[e.jsx("h3",{className:"other-products-title",children:"Aynı Kategorideki Diğer Ürünler"}),e.jsx("div",{className:"other-products-grid",children:t.filter(o=>o.id!==(m==null?void 0:m.id)).map(o=>e.jsxs("div",{className:"other-product-card",onClick:()=>j(o.id),children:[e.jsxs("div",{className:"other-product-image-wrapper",children:[e.jsx(re,{src:o.image,alt:o.name,className:"other-product-image"}),o.color&&e.jsx("div",{className:"other-product-color-badge",children:o.color})]}),e.jsxs("div",{className:"other-product-info",children:[e.jsx("h4",{children:o.name}),e.jsxs("p",{className:"other-product-price",children:[o.price.toFixed(2)," ₺"]})]})]},o.id))})]})]})},gs="http://localhost:8080/api",Ha=()=>{const s=J(),[a,r]=d.useState([]),[t,c]=d.useState(!0),[l,v]=d.useState("");d.useEffect(()=>{(async()=>{try{c(!0),v("");const i=await fetch(`${gs}/categories`);if(i.ok){const k=await i.json();if(k.isSuccess||k.success){const x=k.data||[],z=await fetch(`${gs}/products?page=0&size=1000`);if(z.ok){const m=await z.json();let h=[];(m.isSuccess||m.success)&&m.data&&(m.data.content&&Array.isArray(m.data.content)?h=m.data.content:Array.isArray(m.data)&&(h=m.data));const j=x.map(g=>{const b=h.filter(o=>o.category&&o.category.id===g.id);return{id:g.id,name:g.name,description:g.description||"",productCount:b.length,image:b.length>0&&b[0].coverImageUrl?b[0].coverImageUrl:null}});r(j)}else{const m=x.map(h=>({id:h.id,name:h.name,description:h.description||"",productCount:0,image:null}));r(m)}}else v(k.message||"Kategoriler yüklenemedi")}else v("Kategoriler yüklenirken bir hata oluştu")}catch(i){console.error("Kategoriler yükleme hatası:",i),v("Kategoriler yüklenirken bir hata oluştu")}finally{c(!1)}})()},[]);const f=(n,i)=>{const k=i.toLowerCase().replace(/\s+/g,"-");s(`/kategori/${n}/${k}`)};return t?e.jsx("div",{className:"categories-page",children:e.jsx("div",{className:"categories-container",children:e.jsx(Se,{size:"large",text:"Kategoriler yükleniyor...",variant:"page"})})}):l?e.jsx("div",{className:"categories-page",children:e.jsx("div",{className:"categories-container",children:e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Tekrar Dene"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Kategorilerimiz - Hiedra Home Collection",description:"Hiedra Home Collection'daki tüm perde kategorilerini keşfedin. Tül perde, zebra perde, klasik perde ve daha fazlası."}),e.jsx("div",{className:"categories-page",children:e.jsxs("div",{className:"categories-container",children:[e.jsxs("header",{className:"categories-header",children:[e.jsx("h1",{children:"Kategorilerimiz"}),e.jsx("p",{children:"Geniş ürün yelpazemizdeki kategorileri keşfedin"})]}),a.length===0?e.jsx("div",{className:"no-categories",children:e.jsx("p",{children:"Henüz kategori bulunmamaktadır."})}):e.jsx("div",{className:"categories-grid",children:a.map(n=>e.jsxs("div",{className:"category-card",onClick:()=>f(n.id,n.name),children:[e.jsxs("div",{className:"category-image-wrapper",children:[e.jsx(re,{src:n.image||"",alt:n.name,className:"category-image"}),e.jsx("div",{className:"category-overlay",children:e.jsxs("span",{className:"category-product-count",children:[n.productCount," Ürün"]})})]}),e.jsxs("div",{className:"category-info",children:[e.jsx("h2",{className:"category-name",children:n.name}),n.description&&e.jsx("p",{className:"category-description",children:n.description})]})]},n.id))})]})})]})},js="http://localhost:8080/api",Ka=()=>{const{categoryId:s,categorySlug:a}=we(),r=J(),{addToCart:t}=ye(),[c,l]=d.useState(null),[v,f]=d.useState([]),[n,i]=d.useState(null),[k,x]=d.useState(!0),[z,m]=d.useState(""),[h,j]=d.useState(!1);d.useEffect(()=>{s&&(async()=>{try{x(!0),m("");const p=await fetch(`${js}/products/category/${s}?page=0&size=1000`);if(p.ok){const C=await p.json();if(C.isSuccess||C.success){let A=[];C.data&&(C.data.content&&Array.isArray(C.data.content)?A=C.data.content:Array.isArray(C.data)&&(A=C.data));const y=await fetch(`${js}/categories/${s}`);if(y.ok){const S=await y.json();S.isSuccess||S.success?l({id:S.data.id,name:S.data.name,description:S.data.description||""}):A.length>0&&A[0].category&&l({id:A[0].category.id,name:A[0].category.name,description:A[0].category.description||""})}else A.length>0&&A[0].category&&l({id:A[0].category.id,name:A[0].category.name,description:A[0].category.description||""});const I=A.filter(S=>(S.quantity||0)>0).map(S=>{var w;return{id:S.id,name:S.name,price:S.price?parseFloat(S.price):0,image:S.coverImageUrl||"/images/perde1kapak.jpg",detailImages:S.detailImageUrl?[S.detailImageUrl]:[],description:S.description||S.shortDescription||"",shortDescription:S.shortDescription||"",category:((w=S.category)==null?void 0:w.name)||"Genel",color:S.color||"",inStock:(S.quantity||0)>0,productCode:S.productCode||S.code||S.sku||"",quantity:S.quantity||0,mountingType:S.mountingType||"",material:S.material||"",lightTransmittance:S.lightTransmittance||"",pieceCount:S.pieceCount||null,usageArea:S.usageArea||"",reviewCount:S.reviewCount||0,averageRating:S.averageRating||0,viewCount:S.viewCount||0}});f(I),I.length>0&&i(I[0])}else m(C.message||"Ürünler yüklenemedi")}else m("Ürünler yüklenirken bir hata oluştu")}catch(p){console.error("Kategori ürünleri yükleme hatası:",p),m("Ürünler yüklenirken bir hata oluştu")}finally{x(!1)}})()},[s]);const g=N=>{i(N)},b=N=>{r(`/product/${N}`)},o=N=>{if(!N)return null;const p=N.trim();if(p.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(p))return p;const C={beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF",yeşil:"#008000",green:"#008000",kırmızı:"#FF0000",red:"#FF0000",sarı:"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"},A=p.toLowerCase();return C[A]||p};return k?e.jsx("div",{className:"category-detail-page",children:e.jsx("div",{className:"category-detail-container",children:e.jsx(Se,{size:"large",text:"Ürünler yükleniyor...",variant:"page"})})}):z?e.jsx("div",{className:"category-detail-page",children:e.jsx("div",{className:"category-detail-container",children:e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:z}),e.jsx("button",{onClick:()=>r("/kategoriler"),className:"back-btn",children:"Kategorilere Dön"})]})})}):!c||v.length===0?e.jsx("div",{className:"category-detail-page",children:e.jsx("div",{className:"category-detail-container",children:e.jsxs("div",{className:"no-products",children:[e.jsx("p",{children:"Bu kategoride henüz ürün bulunmamaktadır."}),e.jsx("button",{onClick:()=>r("/kategoriler"),className:"back-btn",children:"Kategorilere Dön"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:`${c.name} - Hiedra Home Collection`,description:`${c.name} kategorisindeki tüm ürünleri keşfedin. ${v.length} ürün bulunmaktadır.`}),e.jsx("div",{className:"category-detail-page",children:e.jsxs("div",{className:"category-detail-container",children:[e.jsxs("div",{className:"category-header",children:[e.jsxs("button",{onClick:()=>r("/kategoriler"),className:"back-to-categories",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Kategorilere Dön"]}),e.jsx("h1",{children:c.name}),c.description&&e.jsx("p",{className:"category-description",children:c.description}),e.jsxs("p",{className:"product-count",children:[v.length," ürün bulundu"]})]}),n&&e.jsxs("div",{className:"category-product-showcase",children:[e.jsx("div",{className:"product-image-section",children:e.jsxs("div",{className:"main-product-image-wrapper",children:[e.jsx(re,{src:n.image||"",alt:n.name,className:"main-product-image"}),n.detailImages&&n.detailImages.length>0&&n.detailImages[0]&&e.jsxs("div",{className:"detail-image-preview",onClick:()=>j(!0),title:"Detay fotoğrafını görüntüle",children:[e.jsx("div",{className:"detail-image-preview-overlay",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})}),e.jsx(re,{src:n.detailImages[0],alt:`${n.name} detay`,className:"detail-image-preview-img"})]})]})}),e.jsxs("div",{className:"product-details-section",children:[e.jsxs("div",{className:"product-header-info",children:[e.jsx("h2",{className:"product-title",children:n.name}),n.productCode&&e.jsxs("p",{className:"product-code",children:["Kod: ",n.productCode]}),(n.averageRating>0||n.reviewCount>0)&&e.jsxs("div",{className:"product-rating-section",children:[e.jsx("div",{className:"product-rating-stars",children:[1,2,3,4,5].map(N=>{const p=N<=Math.floor(n.averageRating),C=!p&&N-.5<=n.averageRating,A=`half-gradient-${n.id}-${N}`;return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:p?"#FFD700":C?`url(#${A})`:"none",stroke:p||C?"#FFD700":"#ddd",strokeWidth:"2",children:[C&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:A,children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})]},N)})}),n.averageRating>0&&e.jsx("span",{className:"product-rating-value",children:n.averageRating.toFixed(1)}),n.reviewCount>0&&e.jsxs("span",{className:"product-review-count",children:["(",n.reviewCount," değerlendirme)"]})]}),e.jsxs("div",{className:"product-price-large",children:[e.jsx("span",{className:"price-label",children:"Başlangıç:"}),e.jsxs("span",{className:"price-value",children:[n.price.toFixed(2)," ₺"]})]})]}),v.length>0&&e.jsxs("div",{className:"color-selection-section",children:[e.jsx("h3",{className:"color-selection-title",children:"RENK SEÇİMİ"}),e.jsx("div",{className:"color-options",children:v.map(N=>{const p=o(N.color);return e.jsxs("button",{className:`color-option ${n.id===N.id?"active":""}`,onClick:()=>g(N),title:N.color||N.name,children:[e.jsx("div",{className:"color-swatch",style:{backgroundColor:p||"#ccc"},children:n.id===N.id&&e.jsx("div",{className:"color-checkmark",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),N.color&&e.jsx("span",{className:"color-name",children:N.color})]},N.id)})})]}),(n.mountingType||n.material||n.lightTransmittance||n.usageArea||n.pieceCount||n.color)&&e.jsxs("div",{className:"product-features",children:[n.mountingType&&e.jsxs("div",{className:"feature-tag",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsxs("span",{children:["Takma Şekli: ",n.mountingType]})]}),n.material&&e.jsxs("div",{className:"feature-tag",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),e.jsxs("span",{children:["Materyal: ",n.material]})]}),n.lightTransmittance&&e.jsxs("div",{className:"feature-tag",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),e.jsxs("span",{children:["Işık Geçirgenliği: ",n.lightTransmittance]})]}),n.usageArea&&e.jsxs("div",{className:"feature-tag",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{children:["Kullanım Alanı: ",n.usageArea]})]}),n.pieceCount&&n.pieceCount>0&&e.jsxs("div",{className:"feature-tag",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),e.jsxs("span",{children:["Parça Sayısı: ",n.pieceCount," Adet"]})]})]}),n.description&&e.jsx("div",{className:"product-description",children:e.jsx("p",{children:n.description})}),e.jsxs("button",{className:"view-product-detail-btn",onClick:()=>b(n.id),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Ürün Detayını Görüntüle"]})]})]})]})}),h&&n&&n.detailImages&&n.detailImages.length>0&&e.jsx("div",{className:"detail-modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"detail-modal-content",onClick:N=>N.stopPropagation(),children:[e.jsx("button",{className:"detail-modal-close",onClick:()=>j(!1),"aria-label":"Kapat",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx(re,{src:n.detailImages[0],alt:`${n.name} detay`,className:"detail-modal-image"})]})})]})},fs="http://localhost:8080/api",_a=()=>{const{cartItems:s,removeFromCart:a,updateQuantity:r,clearCart:t,getCartTotal:c,refreshCart:l}=ye(),{accessToken:v,isAuthenticated:f}=ie(),n=J();d.useEffect(()=>{l()},[]);const i=async(x,z=null,m=null)=>{try{if(m&&z&&z.startsWith("backend_")){let h=null;(!f||!v)&&(h=localStorage.getItem("guestUserId"));const j=`${fs}/cart/items/${m}${h?`?guestUserId=${h}`:""}`;if((await fetch(j,{method:"DELETE",headers:{"Content-Type":"application/json",...v&&{Authorization:`Bearer ${v}`}}})).ok){await l();return}}a(x,z)}catch(h){console.error("Sepetten ürün silinirken hata:",h),a(x,z)}},k=async(x,z,m=null,h=null)=>{if(z<=0){i(x,m,h);return}try{if(h&&m&&m.startsWith("backend_")){let j=null;(!f||!v)&&(j=localStorage.getItem("guestUserId"));const g=`${fs}/cart/items/${h}${j?`?guestUserId=${j}`:""}`;if((await fetch(g,{method:"PUT",headers:{"Content-Type":"application/json",...v&&{Authorization:`Bearer ${v}`}},body:JSON.stringify({quantity:z})})).ok){await l();return}}r(x,z,m)}catch(j){console.error("Sepet miktarı güncellenirken hata:",j),r(x,z,m)}};return s.length===0?e.jsx("div",{className:"cart-container",children:e.jsxs("div",{className:"empty-cart",children:[e.jsx("h2",{children:"Sepetiniz boş"}),e.jsx("p",{children:"Alışverişe başlamak için ürünlerimizi inceleyin"}),e.jsx(O,{to:"/",className:"shop-btn",children:"Alışverişe Başla"})]})}):e.jsxs("div",{className:"cart-container",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h2",{children:"Sepetim"}),e.jsx("button",{className:"clear-cart-btn",onClick:t,children:"Sepeti Temizle"})]}),e.jsxs("div",{className:"cart-content",children:[e.jsx("div",{className:"cart-items",children:s.map((x,z)=>{var m;return e.jsxs("div",{className:"cart-item",children:[e.jsx(O,{to:`/product/${x.id}`,className:"cart-item-image",children:e.jsx("img",{src:x.image,alt:x.name})}),e.jsxs("div",{className:"cart-item-info",children:[e.jsx(O,{to:`/product/${x.id}`,className:"cart-item-name",children:x.name}),e.jsx("span",{className:"cart-item-category",children:x.category}),x.customizations&&e.jsxs("div",{className:"cart-item-customizations",children:[e.jsxs("div",{className:"customization-item",children:[e.jsx("span",{children:"En:"}),e.jsxs("span",{children:[x.customizations.en," cm"]})]}),e.jsxs("div",{className:"customization-item",children:[e.jsx("span",{children:"Boy:"}),e.jsxs("span",{children:[x.customizations.boy," cm"]})]}),e.jsxs("div",{className:"customization-item",children:[e.jsx("span",{children:"Pile:"}),e.jsx("span",{children:x.customizations.pileSikligi==="pilesiz"?"Pilesiz":x.customizations.pileSikligi})]})]})]}),e.jsxs("div",{className:"cart-item-controls",children:[e.jsxs("div",{className:"cart-quantity",children:[e.jsx("button",{onClick:()=>k(x.id,x.quantity-1,x.itemKey,x.cartItemId),children:"-"}),e.jsx("span",{children:x.quantity}),e.jsx("button",{onClick:()=>k(x.id,x.quantity+1,x.itemKey,x.cartItemId),children:"+"})]}),e.jsxs("div",{className:"cart-item-price",children:[((((m=x.customizations)==null?void 0:m.calculatedPrice)||x.price)*x.quantity).toFixed(2)," ₺"]}),e.jsx("button",{className:"remove-item-btn",onClick:()=>i(x.id,x.itemKey,x.cartItemId),children:"✕"})]})]},x.itemKey||`${x.id}_${z}`)})}),e.jsxs("div",{className:"cart-summary",children:[e.jsx("h3",{children:"Sipariş Özeti"}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Ara Toplam:"}),e.jsxs("span",{children:[c().toFixed(2)," ₺"]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Kargo:"}),e.jsx("span",{className:"free-shipping",children:"Ücretsiz"})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[c().toFixed(2)," ₺"]})]}),e.jsx("button",{className:"checkout-btn",onClick:()=>n("/checkout"),children:"Ödemeye Geç"}),e.jsx(O,{to:"/",className:"continue-shopping",children:"Alışverişe Devam Et"})]})]})]})},Ms=d.createContext(null),De=()=>{const s=d.useContext(Ms);if(!s)throw new Error("useToast must be used within ToastProvider");return s},Wa=({children:s})=>{const[a,r]=d.useState([]),t=d.useCallback((i,k="info",x=4e3)=>{const z=Date.now()+Math.random(),m={id:z,message:i,type:k,duration:x};return r(h=>[...h,m]),x>0&&setTimeout(()=>{c(z)},x),z},[]),c=d.useCallback(i=>{r(k=>k.filter(x=>x.id!==i))},[]),l=d.useCallback((i,k)=>t(i,"success",k),[t]),v=d.useCallback((i,k)=>t(i,"error",k),[t]),f=d.useCallback((i,k)=>t(i,"warning",k),[t]),n=d.useCallback((i,k)=>t(i,"info",k),[t]);return e.jsxs(Ms.Provider,{value:{success:l,error:v,warning:f,info:n,showToast:t,removeToast:c},children:[s,e.jsx(qa,{toasts:a,removeToast:c})]})},qa=({toasts:s,removeToast:a})=>e.jsx("div",{className:"toast-container",children:s.map(r=>e.jsx(Ga,{toast:r,onClose:()=>a(r.id)},r.id))}),Ga=({toast:s,onClose:a})=>{const r=()=>{switch(s.type){case"success":return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]});case"error":return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]});case"warning":return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]});default:return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}};return e.jsxs("div",{className:`toast toast--${s.type}`,onClick:a,children:[e.jsx("div",{className:"toast__icon",children:r()}),e.jsx("div",{className:"toast__message",children:s.message}),e.jsx("button",{className:"toast__close",onClick:a,"aria-label":"Kapat",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})},ys="http://localhost:8080/api",Va=()=>{const s=J(),{cartItems:a,getCartTotal:r,clearCart:t}=ye(),{user:c,accessToken:l,isAuthenticated:v}=ie(),f=De(),[n,i]=d.useState(1),[k,x]=d.useState(!1),[z,m]=d.useState([]),[h,j]=d.useState(null),[g,b]=d.useState(!1),[o,N]=d.useState(!1),[p,C]=d.useState({firstName:"",lastName:"",email:"",phone:""}),[A,y]=d.useState({address:"",city:"",district:"",addressDetail:""}),[I,S]=d.useState({cardNumber:"",cardName:"",expiryMonth:"",expiryYear:"",cvv:""}),w=4;d.useEffect(()=>{if(v&&c&&(!p.firstName&&!p.lastName&&!p.phone||p.email===c.email)){let E="",U="";if(c.fullName){const H=c.fullName.trim().split(/\s+/);E=H[0]||"",U=H.slice(1).join(" ")||""}C(H=>({firstName:H.firstName||E,lastName:H.lastName||U,email:H.email||c.email||"",phone:H.phone||c.phone||""}))}},[v,c]),d.useEffect(()=>{v&&l&&(n===2||n===1)&&R()},[v,l,n]);const R=async()=>{try{N(!0);const u=await fetch(`${ys}/user/addresses`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(u.ok){const E=await u.json();if(E.isSuccess||E.success){const U=E.data||[];m(U);const H=U.find(G=>G.isDefault)||U[0];H&&(j(H.id),b(!0),B(H),!A.address&&!A.city&&!A.district&&B(H))}}}catch(u){console.error("Adresler yüklenirken hata:",u)}finally{N(!1)}},B=u=>{u&&y({address:u.addressLine,city:u.city,district:u.district,addressDetail:u.addressDetail||""})},T=u=>{j(u);const E=z.find(U=>U.id===u);E&&B(E)},P=()=>p.firstName.trim()?p.lastName.trim()?!p.email.trim()||!p.email.includes("@")?(f.warning("Lütfen geçerli bir e-posta adresi giriniz."),!1):!p.phone.trim()||p.phone.length<10?(f.warning("Lütfen geçerli bir telefon numarası giriniz."),!1):!0:(f.warning("Lütfen soyadınızı giriniz."),!1):(f.warning("Lütfen adınızı giriniz."),!1),M=()=>A.address.trim()?A.city.trim()?A.district.trim()?!0:(f.warning("Lütfen ilçe bilgisini giriniz."),!1):(f.warning("Lütfen şehir bilgisini giriniz."),!1):(f.warning("Lütfen adres bilgilerinizi giriniz."),!1),D=()=>{const u=I.cardNumber.replace(/\s/g,"");return!u||u.length!==16||!/^\d+$/.test(u)?(f.warning("Lütfen geçerli bir kart numarası giriniz (16 haneli)."),!1):I.cardName.trim()?!I.expiryMonth||!I.expiryYear?(f.warning("Lütfen kart son kullanma tarihini seçiniz."),!1):!I.cvv||I.cvv.length!==3||!/^\d+$/.test(I.cvv)?(f.warning("Lütfen geçerli bir CVV giriniz (3 haneli)."),!1):!0:(f.warning("Lütfen kart üzerindeki ismi giriniz."),!1)},$=()=>{n===1?P()&&i(2):n===2?M()&&i(3):n===3&&D()&&i(4)},F=()=>{i(1)},Z=()=>{i(2)},_=()=>{i(3)},ne=()=>{n>1&&i(n-1)},Y=()=>"ORD-"+Math.random().toString(36).substring(2,10).toUpperCase(),te=async()=>{try{const u=I.cardNumber.replace(/\s/g,""),E=`${I.expiryMonth}/${I.expiryYear}`,U=a.map(ae=>{var L,X,V,je,de;const Ce=(((L=ae.customizations)==null?void 0:L.calculatedPrice)||ae.price)*ae.quantity,Ue=((X=ae.customizations)==null?void 0:X.en)||100,He=((V=ae.customizations)==null?void 0:V.boy)||200;return{productId:ae.id,productName:ae.name,width:Ue,height:He,pleatType:((je=ae.customizations)==null?void 0:je.pileSikligi)==="pilesiz"?"1x1":((de=ae.customizations)==null?void 0:de.pileSikligi)||"1x1",quantity:ae.quantity,price:Ce}}),H={amount:0,cardNumber:u,cardExpiry:E,cardCvc:I.cvv,firstName:p.firstName,lastName:p.lastName,email:p.email,phone:p.phone.replace(/\D/g,""),address:A.address,city:A.city,district:A.district,addressDetail:A.addressDetail||null,orderDetails:U,frontendCallbackUrl:window.location.origin+"/payment/3d-callback",addressId:v&&g&&h?h:null,userId:v&&(c!=null&&c.id)?c.id:null};console.log("Ödeme isteği gönderiliyor (GÜVENLİK: Fiyatlar backend'de hesaplanacak):",H),console.log("OrderDetails (price gönderilmedi, backend hesaplayacak):",U);const G=await fetch(`${ys}/payment/card`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}),K=G.headers.get("content-type")||"",ee=await G.text();let se;try{if(!ee||ee.trim()==="")return{success:!1,message:"Sunucudan yanıt alınamadı."};se=JSON.parse(ee),console.log("Ödeme API Response:",se)}catch(ae){return console.error("JSON parse hatası:",ae),ee.trim().startsWith("<!DOCTYPE")||ee.trim().startsWith("<html")?(console.log("HTML response alındı (JSON parse hatasından sonra), 3D Secure sayfası açılıyor..."),sessionStorage.setItem("checkoutData",JSON.stringify({contactInfo:p,addressInfo:A,cardInfo:I,items:a,totalPrice:r()})),sessionStorage.setItem("frontendUrl",window.location.origin),document.open(),document.write(ee),document.close(),{success:!1,message:"3D Secure yönlendirmesi yapılıyor...",redirecting:!0}):{success:!1,message:`Sunucu yanıtı işlenemedi: ${ae.message}`}}if(G.ok){const ae=se.isSuccess===!0||se.success===!0;if(ae&&se.data&&typeof se.data=="string"&&(se.data.trim().startsWith("<!DOCTYPE")||se.data.trim().startsWith("<html")||se.data.includes("<form"))){console.log("3D Secure HTML alındı, sayfa açılıyor..."),sessionStorage.setItem("checkoutData",JSON.stringify({contactInfo:p,addressInfo:A,cardInfo:I,items:a,totalPrice:r()})),sessionStorage.setItem("frontendUrl",window.location.origin);const Ce=se.data;return document.open(),document.write(Ce),document.close(),{success:!1,message:"3D Secure yönlendirmesi yapılıyor...",redirecting:!0}}return se.requires3D===!0&&se.redirectUrl?(sessionStorage.setItem("checkoutData",JSON.stringify({contactInfo:p,addressInfo:A,cardInfo:I,items:a,totalPrice:r()})),sessionStorage.setItem("frontendUrl",window.location.origin),window.location.href=se.redirectUrl,{success:!1,message:"3D Secure yönlendirmesi yapılıyor...",redirecting:!0}):{success:ae,message:se.message||(ae?"Ödeme başarıyla tamamlandı":"Ödeme işlemi başarısız oldu")}}else return{success:!1,message:se.message||`Hata: ${G.status} ${G.statusText}`}}catch(u){return console.error("Ödeme API hatası:",u),{success:!1,message:u.message||"Ödeme işlemi sırasında bir hata oluştu."}}},ue=async u=>{if(u&&(u.preventDefault(),u.stopPropagation()),k){console.log("Ödeme işlemi zaten devam ediyor, yeni istek atılmıyor");return}x(!0);try{const E=await te();if(E.redirecting)return;if(E.success){const U={orderNumber:Y(),contactInfo:p,addressInfo:A,cardInfo:I,items:a,totalPrice:r()};t(),sessionStorage.removeItem("checkoutData"),s("/siparis-onayi",{state:{orderData:U}})}else x(!1),s("/odeme-basarisiz",{state:{errorMessage:E.message}})}catch(E){console.error("Ödeme işlemi hatası:",E),x(!1),s("/odeme-basarisiz")}},ce=u=>{const E=u.replace(/\s/g,"");return E?/^4/.test(E)?"visa":/^5[1-5]/.test(E)||/^2[2-7]/.test(E)?"mastercard":/^3[47]/.test(E)?"amex":/^6(?:011|5|4[4-9])/.test(E)?"discover":/^9792/.test(E)?"troy":null:null},ge=u=>{var H;const E=u.replace(/\s/g,"");return(((H=E.match(/.{1,4}/g))==null?void 0:H.join(" "))||E).slice(0,19)},le=ce(I.cardNumber);if(a.length===0)return e.jsx("div",{className:"checkout-container",children:e.jsxs("div",{className:"empty-checkout",children:[e.jsx("h2",{children:"Sepetiniz boş"}),e.jsx("p",{children:"Ödeme yapmak için sepetinizde ürün bulunmalıdır."}),e.jsx("button",{onClick:()=>s("/"),className:"shop-btn",children:"Alışverişe Başla"})]})});const Q={"@context":"https://schema.org","@type":"CheckoutPage",name:"Ödeme - Hiedra Perde",description:"Hiedra Perde siparişinizi tamamlayın. Güvenli ödeme sistemi ile alışveriş yapın.",url:window.location.href};return e.jsxs("div",{className:"checkout-container",children:[e.jsx(q,{title:"Ödeme - Perde Satış Ödeme Sayfası",description:"Perde satış ödeme sayfası. Güvenli ödeme sistemi ile siparişinizi tamamlayın. Hiedra Perde ile güvenli alışveriş.",keywords:"perde ödeme, online perde ödeme, perde satış ödeme, güvenli ödeme, perde sipariş ödeme",url:"/checkout",structuredData:Q,noindex:!0}),e.jsxs("header",{className:"checkout-header",children:[e.jsx("h1",{children:"Ödeme"}),e.jsx("div",{className:"checkout-steps",children:[1,2,3,4].map(u=>e.jsxs("div",{className:`step ${n>=u?"active":""} ${n===u?"current":""}`,children:[e.jsx("div",{className:"step-number",children:u}),e.jsxs("div",{className:"step-label",children:[u===1&&"İletişim",u===2&&"Adres",u===3&&"Ödeme",u===4&&"Özet"]})]},u))})]}),e.jsxs("div",{className:"checkout-content",children:[e.jsxs("div",{className:"checkout-form-section",children:[n===1&&e.jsxs("section",{className:"checkout-step",children:[e.jsx("h2",{children:"İletişim Bilgileri"}),v&&c&&e.jsx("div",{style:{padding:"1rem",marginBottom:"1.5rem",backgroundColor:"#e7f3ff",borderRadius:"4px",border:"1px solid #b3d9ff",fontSize:"0.9rem",color:"#004085"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Bilgi:"})," İletişim bilgileriniz hesabınızdan otomatik olarak doldurulmuştur. İsterseniz değiştirebilirsiniz."]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"firstName",children:["Ad ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:p.firstName,onChange:u=>C({...p,firstName:u.target.value}),placeholder:"Adınız",autoComplete:"given-name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"lastName",children:["Soyad ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:p.lastName,onChange:u=>C({...p,lastName:u.target.value}),placeholder:"Soyadınız",autoComplete:"family-name",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:["E-posta ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:p.email,onChange:u=>C({...p,email:u.target.value}),placeholder:"ornek@email.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"phone",children:["Telefon ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:p.phone,onChange:u=>{const E=u.target.value.replace(/\D/g,"");E.length<=11&&C({...p,phone:E})},placeholder:"05XX XXX XX XX",autoComplete:"tel",required:!0})]})]}),n===2&&e.jsxs("section",{className:"checkout-step",children:[e.jsx("h2",{children:"Adres Bilgileri"}),!v&&e.jsx("div",{style:{padding:"1rem",marginBottom:"1.5rem",backgroundColor:"#f8f9fa",borderRadius:"4px",border:"1px solid #dee2e6"},children:e.jsx("p",{style:{margin:0,color:"#495057"},children:"Lütfen teslimat adresinizi giriniz. Tüm alanları doldurmanız gerekmektedir."})}),v&&z.length>0&&e.jsx("div",{style:{padding:"1rem",marginBottom:"1.5rem",backgroundColor:"#e7f3ff",borderRadius:"4px",border:"1px solid #b3d9ff",fontSize:"0.9rem",color:"#004085"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Bilgi:"})," Varsayılan adresiniz otomatik olarak seçilmiştir. Kayıtlı adreslerinizden birini seçebilir veya yeni adres girebilirsiniz."]})}),v&&z.length>0&&e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:g,onChange:u=>{if(b(u.target.checked),u.target.checked&&h){const E=z.find(U=>U.id===h);E&&B(E)}else u.target.checked||y({address:"",city:"",district:"",addressDetail:""})},style:{marginRight:"0.5rem"}}),"Kayıtlı adreslerimden seç"]}),g&&e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",border:"1px solid #ddd",borderRadius:"4px"},children:o?e.jsx("p",{children:"Adresler yükleniyor..."}):e.jsx("div",{children:z.map(u=>e.jsx("div",{style:{padding:"0.75rem",marginBottom:"0.5rem",border:h===u.id?"2px solid #007bff":"1px solid #ddd",borderRadius:"4px",cursor:"pointer",backgroundColor:h===u.id?"#f0f8ff":"#fff"},onClick:()=>T(u.id),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:[u.fullName,u.isDefault&&e.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.85rem",color:"#28a745"},children:"(Varsayılan)"})]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[u.addressLine,u.addressDetail&&`, ${u.addressDetail}`]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[u.district,", ",u.city]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:u.phone})]}),e.jsx("input",{type:"radio",name:"selectedAddress",checked:h===u.id,onChange:()=>T(u.id),style:{marginLeft:"1rem"}})]})},u.id))})})]}),(!v||!g)&&e.jsxs(e.Fragment,{children:[v&&!g&&e.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",backgroundColor:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107",fontSize:"0.9rem",color:"#856404"},children:"Yeni adres bilgilerinizi giriniz."}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"address",children:["Adres ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"address",name:"address",value:A.address,onChange:u=>y({...A,address:u.target.value}),placeholder:"Mahalle, Sokak, Cadde",autoComplete:"street-address",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"addressDetail",children:"Adres Detayı (Opsiyonel)"}),e.jsx("textarea",{id:"addressDetail",value:A.addressDetail,onChange:u=>y({...A,addressDetail:u.target.value}),placeholder:"Daire no, kat, bina adı vb.",rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"city",children:["Şehir ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"city",name:"city",value:A.city,onChange:u=>y({...A,city:u.target.value}),required:!0,placeholder:"Şehir adı"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"district",children:["İlçe ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"district",name:"district",value:A.district,onChange:u=>y({...A,district:u.target.value}),required:!0,placeholder:"İlçe adı"})]})]})]})]}),n===3&&e.jsxs("section",{className:"checkout-step",children:[e.jsx("h2",{children:"Ödeme Bilgileri"}),e.jsx("p",{className:"step-description",children:"Güvenli ödeme için kart bilgilerinizi giriniz"}),e.jsx("div",{className:"supported-cards",children:e.jsxs("div",{className:"card-icons",children:[e.jsx("span",{className:`card-icon ${le==="visa"?"active":""}`,title:"Visa",children:e.jsx("img",{src:"/images/visa.png",alt:"Visa",className:"card-logo-img"})}),e.jsx("span",{className:`card-icon ${le==="mastercard"?"active":""}`,title:"Mastercard",children:e.jsx("img",{src:"/images/master.png",alt:"Mastercard",className:"card-logo-img"})}),e.jsx("span",{className:`card-icon ${le==="troy"?"active":""}`,title:"Troy",children:e.jsx("img",{src:"/images/troy.png",alt:"Troy",className:"card-logo-img"})})]})}),e.jsxs("form",{autoComplete:"on",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"cardNumber",children:["Kart Numarası ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"card-input-wrapper",children:[e.jsx("input",{type:"tel",id:"cardNumber",name:"cardNumber",value:I.cardNumber,onChange:u=>{const E=ge(u.target.value);S({...I,cardNumber:E})},placeholder:"1234 5678 9012 3456",maxLength:"19",autoComplete:"cc-number",inputMode:"numeric",pattern:"[0-9\\s]{13,19}",required:!0}),le&&e.jsxs("div",{className:"detected-card-icon",children:[le==="visa"&&e.jsx("img",{src:"/images/visa.png",alt:"Visa",className:"detected-card-logo"}),le==="mastercard"&&e.jsx("img",{src:"/images/master.png",alt:"Mastercard",className:"detected-card-logo"}),le==="troy"&&e.jsx("img",{src:"/images/troy.png",alt:"Troy",className:"detected-card-logo"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"cardName",children:["Kart Üzerindeki İsim ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"cardName",name:"cardName",value:I.cardName,onChange:u=>S({...I,cardName:u.target.value.toUpperCase()}),placeholder:"AD SOYAD",autoComplete:"cc-name",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"expiryMonth",children:["Son Kullanma Tarihi ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"expiry-inputs",children:[e.jsxs("select",{id:"expiryMonth",name:"expiryMonth",value:I.expiryMonth,onChange:u=>S({...I,expiryMonth:u.target.value}),autoComplete:"cc-exp-month",required:!0,children:[e.jsx("option",{value:"",children:"Ay"}),Array.from({length:12},(u,E)=>E+1).map(u=>e.jsx("option",{value:String(u).padStart(2,"0"),children:String(u).padStart(2,"0")},u))]}),e.jsxs("select",{id:"expiryYear",name:"expiryYear",value:I.expiryYear,onChange:u=>S({...I,expiryYear:u.target.value}),autoComplete:"cc-exp-year",required:!0,children:[e.jsx("option",{value:"",children:"Yıl"}),Array.from({length:10},(u,E)=>new Date().getFullYear()+E).map(u=>e.jsx("option",{value:String(u).slice(-2),children:u},u))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"cvv",children:["CVV ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",id:"cvv",name:"cvv",value:I.cvv,onChange:u=>{const E=u.target.value.replace(/\D/g,"");E.length<=3&&S({...I,cvv:E})},placeholder:"123",maxLength:"3",autoComplete:"cc-csc",inputMode:"numeric",pattern:"[0-9]{3}",required:!0})]})]})]})]}),n===4&&e.jsxs("section",{className:"checkout-step",children:[e.jsx("h2",{children:"Sipariş Özeti"}),e.jsx("p",{className:"step-description",children:"Lütfen bilgilerinizi kontrol ediniz"}),e.jsxs("div",{className:"summary-section",children:[e.jsxs("div",{className:"summary-info-card",children:[e.jsxs("div",{className:"card-header-with-edit",children:[e.jsx("h3",{children:"İletişim Bilgileri"}),e.jsx("button",{type:"button",className:"edit-info-btn-card",onClick:F,"aria-label":"İletişim bilgilerini düzenle",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),e.jsxs("div",{className:"info-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ad Soyad:"})," ",p.firstName," ",p.lastName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"E-posta:"})," ",p.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefon:"})," ",p.phone]})]})]}),e.jsxs("div",{className:"summary-info-card",children:[e.jsxs("div",{className:"card-header-with-edit",children:[e.jsx("h3",{children:"Adres Bilgileri"}),e.jsx("button",{type:"button",className:"edit-info-btn-card",onClick:Z,"aria-label":"Adres bilgilerini düzenle",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),e.jsxs("div",{className:"info-details",children:[e.jsx("p",{children:A.address}),e.jsxs("p",{children:[A.district,", ",A.city]}),A.addressDetail&&e.jsxs("p",{children:[e.jsx("strong",{children:"Adres Detayı:"})," ",A.addressDetail]})]})]}),e.jsxs("div",{className:"summary-info-card",children:[e.jsxs("div",{className:"card-header-with-edit",children:[e.jsx("h3",{children:"Ödeme Bilgileri"}),e.jsx("button",{type:"button",className:"edit-info-btn-card",onClick:_,"aria-label":"Ödeme bilgilerini düzenle",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),e.jsxs("div",{className:"info-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Kart Numarası:"})," •••• •••• •••• ",I.cardNumber.length>=4?I.cardNumber.slice(-4):""]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kart Sahibi:"})," ",I.cardName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Son Kullanma:"})," ",I.expiryMonth,"/",I.expiryYear]})]})]}),e.jsxs("div",{className:"summary-info-card",children:[e.jsx("h3",{children:"Sipariş Detayları"}),e.jsx("div",{className:"order-items-summary",children:a.map(u=>{var E;return e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{className:"order-item-info",children:[e.jsx("span",{className:"order-item-name",children:u.name}),u.customizations&&e.jsxs("div",{className:"order-item-details",children:[e.jsxs("span",{children:["En: ",u.customizations.en," cm"]}),e.jsxs("span",{children:["Boy: ",u.customizations.boy," cm"]}),e.jsxs("span",{children:["Pile: ",u.customizations.pileSikligi==="pilesiz"?"Pilesiz":u.customizations.pileSikligi]})]}),e.jsxs("span",{className:"order-item-quantity",children:["Adet: ",u.quantity]})]}),e.jsxs("div",{className:"order-item-price",children:[((((E=u.customizations)==null?void 0:E.calculatedPrice)||u.price)*u.quantity).toFixed(2)," ₺"]})]},u.itemKey||u.id)})}),e.jsxs("div",{className:"order-total-summary",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Ara Toplam:"}),e.jsxs("span",{children:[r().toFixed(2)," ₺"]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Kargo:"}),e.jsx("span",{className:"free-shipping",children:"Ücretsiz"})]}),e.jsxs("div",{className:"total-row final",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[r().toFixed(2)," ₺"]})]})]})]})]})]}),e.jsxs("div",{className:"checkout-actions",children:[n>1&&e.jsx("button",{type:"button",onClick:ne,className:"btn-back",children:"← Geri"}),n<w?e.jsx("button",{type:"button",onClick:$,className:"btn-next",children:n===3?"Özet'e Git →":"İlerle →"}):n===4?e.jsx("button",{type:"button",onClick:u=>{u.preventDefault(),u.stopPropagation(),ue(u)},onMouseDown:u=>{u.preventDefault(),u.stopPropagation()},className:"btn-complete",disabled:k,children:k?"Ödeme İşleniyor...":"Ödeme Yap"}):null]})]}),e.jsxs("aside",{className:"checkout-summary",children:[e.jsx("h2",{children:"Sipariş Özeti"}),n>=1&&p.firstName&&e.jsxs("div",{className:"summary-info-section",children:[e.jsx("h3",{children:"İletişim"}),e.jsxs("div",{className:"summary-info-content",children:[e.jsxs("p",{children:[p.firstName," ",p.lastName]}),e.jsx("p",{children:p.email}),e.jsx("p",{children:p.phone})]})]}),n>=2&&A.address&&e.jsxs("div",{className:"summary-info-section",children:[e.jsx("h3",{children:"Adres"}),e.jsxs("div",{className:"summary-info-content",children:[e.jsx("p",{children:A.address}),e.jsxs("p",{children:[A.district,", ",A.city]})]})]}),n>=3&&I.cardNumber&&e.jsxs("div",{className:"summary-info-section",children:[e.jsx("h3",{children:"Ödeme"}),e.jsxs("div",{className:"summary-info-content",children:[e.jsxs("p",{children:["•••• •••• •••• ",I.cardNumber.length>=4?I.cardNumber.slice(-4):""]}),e.jsx("p",{children:I.cardName}),e.jsxs("p",{children:[I.expiryMonth,"/",I.expiryYear]})]})]}),e.jsx("div",{className:"summary-items",children:a.map(u=>{var E;return e.jsxs("div",{className:"summary-item",children:[e.jsxs("div",{className:"summary-item-info",children:[e.jsx("span",{className:"item-name",children:u.name}),u.customizations&&e.jsxs("div",{className:"item-details",children:[e.jsxs("span",{children:["En: ",u.customizations.en," cm"]}),e.jsxs("span",{children:["Boy: ",u.customizations.boy," cm"]}),e.jsxs("span",{children:["Pile: ",u.customizations.pileSikligi==="pilesiz"?"Pilesiz":u.customizations.pileSikligi]})]})]}),e.jsxs("div",{className:"summary-item-price",children:[((((E=u.customizations)==null?void 0:E.calculatedPrice)||u.price)*u.quantity).toFixed(2)," ₺"]})]},u.itemKey||u.id)})}),e.jsxs("div",{className:"summary-total",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Ara Toplam:"}),e.jsxs("span",{children:[r().toFixed(2)," ₺"]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Kargo:"}),e.jsx("span",{className:"free-shipping",children:"Ücretsiz"})]}),e.jsxs("div",{className:"total-row final",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[r().toFixed(2)," ₺"]})]})]})]})]})]})},Us="http://localhost:8080",Le=`${Us}/api/orders`,Ya=`${Us}/api/shipping`,Ja=()=>{const{isAuthenticated:s}=ie(),a=J(),[r,t]=d.useState(""),[c,l]=d.useState(""),[v,f]=d.useState(""),[n,i]=d.useState(""),[k,x]=d.useState(!1),[z,m]=d.useState(!1),[h,j]=d.useState(null),[g,b]=d.useState(""),[o,N]=d.useState(!1),[p,C]=d.useState(!1),[A,y]=d.useState(!1),[I,S]=d.useState("Müşteri isteği"),[w,R]=d.useState("İade talebi"),[B,T]=d.useState(!1),[P,M]=d.useState({show:!1,message:"",type:"success"}),[D,$]=d.useState(null),[F,Z]=d.useState(!1),_=d.useRef(null);d.useEffect(()=>{s&&a("/siparislerim")},[s,a]);const ne=(L,X="success")=>{M({show:!0,message:L,type:X}),setTimeout(()=>{M({show:!1,message:"",type:"success"})},4e3)},[Y,te]=d.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:""}),ue=()=>{const L="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let X="";for(let V=0;V<5;V++)X+=L.charAt(Math.floor(Math.random()*L.length));return X};d.useEffect(()=>{f(ue())},[]);const ce=()=>{f(ue()),i(""),_.current&&_.current.focus()},ge=()=>r.trim()?!c.trim()||!c.includes("@")?(ne("Lütfen geçerli bir e-posta adresi giriniz.","error"),!1):n.trim()?n.toUpperCase()!==v.toUpperCase()?(ne("Güvenlik kodu hatalı! Lütfen tekrar deneyiniz.","error"),ce(),!1):!0:(ne("Lütfen güvenlik kodunu giriniz.","error"),!1):(ne("Lütfen sipariş numaranızı giriniz.","error"),!1),le=async(L,X)=>{x(!0),b("");try{const V=await fetch(`${Le}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:L.trim(),customerEmail:X.trim()})});if(!(V.headers.get("content-type")||"").includes("application/json")){const me=await V.text();throw new Error("Beklenmeyen yanıt formatı")}const de=await V.json();if(!V.ok)throw new Error(de.message||"Sipariş bulunamadı");if(de.success&&de.data){const me=de.data;j({...me,shippingAddress:me.addresses&&me.addresses.length>0?me.addresses[0]:{}});const Ie=me.addresses&&me.addresses.length>0?me.addresses[0]:{};te({fullName:me.customerName||"",phone:me.customerPhone||"",addressLine:Ie.addressLine||"",addressDetail:Ie.addressDetail||"",city:Ie.city||"",district:Ie.district||""}),m(!0),me.trackingNumber&&Q(me.orderNumber,X.trim())}else throw new Error(de.message||"Sipariş bulunamadı")}catch(V){b(V.message||"Sipariş sorgulanırken bir hata oluştu"),m(!1)}finally{x(!1)}},Q=async(L,X)=>{if(!(!L||!X))try{Z(!0);const V=new URL(`${Ya}/track-by-order`);V.searchParams.append("orderNumber",L),V.searchParams.append("email",X);const de=await(await fetch(V.toString(),{method:"GET",headers:{"Content-Type":"application/json"}})).json();de.isSuccess||de.success?$(de.data):$(null)}catch(V){console.error("Kargo takip bilgisi alınırken hata:",V),$(null)}finally{Z(!1)}},u=L=>L?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo Alındı",OUT_FOR_DELIVERY:"Teslimat İçin Yola Çıktı"}[L.toUpperCase()]||L:"Bilinmiyor",E=L=>{if(!L)return"";try{return new Date(L).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return L}},U=async L=>{L&&L.preventDefault&&L.preventDefault(),ge()&&await le(r,c)},H=()=>{t(""),l(""),i(""),m(!1),j(null),b(""),N(!1),C(!1),y(!1),$(null),ce()},G=L=>{te({...Y,[L.target.name]:L.target.value})},K=async()=>{if(!Y.fullName||!Y.phone||!Y.addressLine||!Y.city||!Y.district){ne("Lütfen tüm zorunlu alanları doldurunuz.","error");return}T(!0),b("");try{const L=await fetch(`${Le}/${h.orderNumber}/address?email=${encodeURIComponent(c)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:h.orderNumber,fullName:Y.fullName,phone:Y.phone,addressLine:Y.addressLine,addressDetail:Y.addressDetail||"",city:Y.city,district:Y.district})}),X=L.headers.get("content-type")||"";let V;if(X.includes("application/json"))V=await L.json();else{const je=await L.text();throw new Error("Beklenmeyen yanıt formatı")}if(!L.ok)throw new Error(V.message||"Adres güncellenemedi");V.success&&(ne("Adres başarıyla güncellendi!","success"),N(!1),await le(h.orderNumber,c))}catch(L){b(L.message||"Adres güncellenirken bir hata oluştu")}finally{T(!1)}},ee=async()=>{T(!0),b("");try{const L=await fetch(`${Le}/${h.orderNumber}/cancel?email=${encodeURIComponent(c)}&reason=${encodeURIComponent(I)}`,{method:"POST",headers:{"Content-Type":"application/json"}}),X=L.headers.get("content-type")||"";let V;if(X.includes("application/json"))V=await L.json();else{const je=await L.text();throw new Error("Beklenmeyen yanıt formatı")}if(!L.ok)throw new Error(V.message||"Sipariş iptal edilemedi");V.success&&(ne("Sipariş iptal talebiniz alındı!","success"),C(!1),await le(h.orderNumber,c))}catch(L){b(L.message||"Sipariş iptal edilirken bir hata oluştu")}finally{T(!1)}},se=async()=>{T(!0),b("");try{const L=await fetch(`${Le}/${h.orderNumber}/refund?email=${encodeURIComponent(c)}&reason=${encodeURIComponent(w)}`,{method:"POST",headers:{"Content-Type":"application/json"}}),X=L.headers.get("content-type")||"";let V;if(X.includes("application/json"))V=await L.json();else{const je=await L.text();throw new Error("Beklenmeyen yanıt formatı")}if(!L.ok)throw new Error(V.message||"İade talebi oluşturulamadı");V.success&&(ne("İade talebiniz alındı!","success"),y(!1),await le(h.orderNumber,c))}catch(L){b(L.message||"İade talebi oluşturulurken bir hata oluştu")}finally{T(!1)}},ae=()=>{if(!h||!h.status)return!1;const L=h.status.toUpperCase();return L==="PENDING"||L==="PAID"||L==="PROCESSING"},Ce=()=>{if(!h||!h.status)return!1;const L=h.status.toUpperCase();return L==="SHIPPED"||L==="DELIVERED"},Ue=L=>L?{PENDING:"Beklemede",PAID:"Ödendi",PROCESSING:"Hazırlanıyor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"İptal Edildi",REFUNDED:"İade Edildi"}[L.toUpperCase()]||L:"Bilinmiyor",He={"@context":"https://schema.org","@type":"WebPage",name:"Sipariş Sorgula - Perde Satış Sipariş Takibi",description:"Perde satış sipariş durumu sorgulama sayfası. Sipariş numaranız ile siparişinizin durumunu takip edin.",url:typeof window<"u"?window.location.href:"https://hiedra.com/siparis-sorgula"};return e.jsxs("div",{className:"order-lookup-container",children:[e.jsx(q,{title:"Sipariş Sorgula - Perde Satış Sipariş Takibi | Hiedra Perde",description:"Perde satış sipariş sorgulama sayfası. Siparişinizin durumunu öğrenmek için sipariş numaranızı ve e-posta adresinizi giriniz. Hiedra Perde sipariş takip sistemi.",keywords:"sipariş sorgula, sipariş takip, perde satış sipariş sorgulama, sipariş durumu, kargo takip, perde sipariş takibi",url:"/siparis-sorgula",structuredData:He}),e.jsxs("header",{className:"lookup-header",children:[e.jsx("h1",{children:"Sipariş Sorgula - Perde Satış Sipariş Takibi"}),e.jsx("p",{children:"Perde satış siparişinizin durumunu takip etmek için bilgilerinizi giriniz"})]}),z?e.jsxs("div",{className:"order-details-container",children:[g&&e.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:g}),e.jsxs("div",{className:"order-header-actions",children:[e.jsx("button",{onClick:H,className:"new-lookup-btn",children:"← Yeni Sorgulama"}),e.jsxs("div",{className:"action-buttons",children:[ae()&&e.jsx("button",{onClick:()=>C(!0),className:"cancel-btn",disabled:B,children:"Siparişi İptal Et"}),Ce()&&e.jsx("button",{onClick:()=>y(!0),className:"refund-btn",disabled:B,children:"İade Talep Et"}),e.jsx("button",{onClick:()=>N(!o),className:"update-address-btn",children:o?"Adres Formunu Kapat":"Adresi Güncelle"})]})]}),e.jsx("div",{className:"order-status-card",children:e.jsxs("div",{className:"status-header",children:[e.jsxs("div",{className:"status-info",children:[e.jsxs("h3",{children:["Sipariş No: ",h.orderNumber]}),e.jsx("span",{className:`status-badge ${(h.status||"").toLowerCase().replace(/\s+/g,"-")}`,children:Ue(h.status)})]}),e.jsxs("div",{className:"order-date",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),h.createdAt?new Date(h.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]})}),o&&e.jsxs("div",{className:"order-section address-form-section",children:[e.jsx("h3",{children:"Adres Güncelle"}),e.jsxs("div",{className:"address-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Ad Soyad ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",value:Y.fullName,onChange:G,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Telefon ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"phone",value:Y.phone,onChange:G,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Adres Satırı ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"addressLine",value:Y.addressLine,onChange:G,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Adres Detayı"}),e.jsx("input",{type:"text",name:"addressDetail",value:Y.addressDetail,onChange:G})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Şehir ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"city",value:Y.city,onChange:G,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["İlçe ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"district",value:Y.district,onChange:G,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsx("button",{onClick:K,className:"lookup-btn",disabled:B,children:B?"Güncelleniyor...":"Adresi Güncelle"})]})]}),e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"Sipariş Detayları"}),e.jsx("div",{className:"order-items",children:h.orderItems&&h.orderItems.length>0?h.orderItems.map((L,X)=>e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsx("h4",{children:L.productName||"Ürün"}),e.jsxs("div",{className:"item-customizations",children:[L.width&&e.jsxs("span",{children:["En: ",L.width," cm"]}),L.height&&e.jsxs("span",{children:["Boy: ",L.height," cm"]}),L.pleatType&&e.jsxs("span",{children:["Pile: ",L.pleatType==="pilesiz"?"Pilesiz":L.pleatType]})]}),e.jsxs("span",{className:"item-quantity",children:["Adet: ",L.quantity||1]})]}),e.jsxs("div",{className:"item-price",children:[L.price?parseFloat(L.price).toFixed(2):"0.00"," ₺"]})]},X)):e.jsx("p",{children:"Sipariş detayı bulunamadı"})}),e.jsxs("div",{className:"order-total",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[h.totalAmount?parseFloat(h.totalAmount).toFixed(2):"0.00"," ₺"]})]})]}),e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"Teslimat Adresi"}),e.jsxs("div",{className:"address-details",children:[h.shippingAddress&&e.jsxs(e.Fragment,{children:[h.shippingAddress.addressLine&&e.jsx("p",{children:h.shippingAddress.addressLine}),h.shippingAddress.addressDetail&&e.jsx("p",{children:h.shippingAddress.addressDetail}),(h.shippingAddress.district||h.shippingAddress.city)&&e.jsxs("p",{children:[h.shippingAddress.district||""," ",h.shippingAddress.district&&h.shippingAddress.city?"/":""," ",h.shippingAddress.city||""]})]}),(!h.shippingAddress||!h.shippingAddress.addressLine&&!h.shippingAddress.city)&&e.jsx("p",{children:"Adres bilgisi bulunamadı"})]})]}),h.cancelReason&&e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"İptal Bilgisi"}),e.jsxs("div",{className:"address-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sebep:"})," ",h.cancelReason]}),h.cancelledAt&&e.jsxs("p",{children:[e.jsx("strong",{children:"İptal Tarihi:"})," ",new Date(h.cancelledAt).toLocaleDateString("tr-TR")]})]})]}),h.refundedAt&&e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"İade Bilgisi"}),e.jsx("div",{className:"address-details",children:e.jsxs("p",{children:[e.jsx("strong",{children:"İade Tarihi:"})," ",new Date(h.refundedAt).toLocaleDateString("tr-TR")]})})]}),h.trackingNumber&&e.jsxs("div",{className:"order-section tracking-section",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0},children:"📦 Kargo Takip Bilgileri"}),e.jsx("button",{onClick:()=>Q(h.orderNumber,c),disabled:F,style:{padding:"0.5rem 1rem",background:F?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:F?"not-allowed":"pointer",fontSize:"0.9rem",opacity:F?.6:1},children:F?"Yükleniyor...":"🔄 Güncelle"})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Takip Numarası:"})," ",h.trackingNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kargo Firması:"})," ",h.carrier||"DHL"]}),h.shippedAt&&e.jsxs("p",{children:[e.jsx("strong",{children:"Kargoya Verilme:"})," ",new Date(h.shippedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),F?e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:e.jsx("p",{children:"Kargo bilgileri yükleniyor..."})}):D?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"600",backgroundColor:D.status==="DELIVERED"?"#d4edda":D.status==="IN_TRANSIT"?"#d1ecf1":D.status==="EXCEPTION"?"#f8d7da":"#fff3cd",color:D.status==="DELIVERED"?"#155724":D.status==="IN_TRANSIT"?"#0c5460":D.status==="EXCEPTION"?"#721c24":"#856404"},children:u(D.status)}),D.statusDescription&&e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:D.statusDescription})]}),D.events&&D.events.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"1rem"},children:"Kargo Hareketleri"}),e.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[D.events.slice(0,5).map((L,X)=>e.jsxs("div",{style:{padding:"0.75rem",marginBottom:"0.5rem",background:"white",borderRadius:"6px",borderLeft:"4px solid #667eea",fontSize:"0.9rem"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",color:"#333"},children:E(L.timestamp)}),L.location&&e.jsxs("div",{style:{color:"#64748b",marginBottom:"0.25rem"},children:["📍 ",L.location]}),L.description&&e.jsx("div",{style:{color:"#333"},children:L.description})]},X)),D.events.length>5&&e.jsxs("p",{style:{textAlign:"center",color:"#64748b",fontSize:"0.85rem",marginTop:"0.5rem"},children:["+",D.events.length-5," hareket daha"]})]})]}),e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsx("a",{href:`/kargo-takip?trackingNumber=${h.trackingNumber}&orderNumber=${h.orderNumber}`,style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"600"},children:"→ Detaylı Takip Bilgisi"})})]}):e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:e.jsx("p",{children:'Kargo takip bilgisi henüz güncellenmedi. "Güncelle" butonuna tıklayarak en güncel bilgileri alabilirsiniz.'})})]}),p&&e.jsx("div",{className:"modal-overlay",onClick:()=>!B&&C(!1),children:e.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[e.jsx("h3",{children:"Siparişi İptal Et"}),e.jsx("p",{children:"Siparişinizi iptal etmek istediğinizden emin misiniz?"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"İptal Sebebi"}),e.jsx("textarea",{value:I,onChange:L=>S(L.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>C(!1),disabled:B,children:"İptal"}),e.jsx("button",{onClick:ee,disabled:B,className:"confirm-btn",children:B?"İşleniyor...":"Onayla"})]})]})}),A&&e.jsx("div",{className:"modal-overlay",onClick:()=>!B&&y(!1),children:e.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[e.jsx("h3",{children:"İade Talebi Oluştur"}),e.jsx("p",{children:"İade talebi oluşturmak istediğinizden emin misiniz?"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"İade Sebebi"}),e.jsx("textarea",{value:w,onChange:L=>R(L.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>y(!1),disabled:B,children:"İptal"}),e.jsx("button",{onClick:se,disabled:B,className:"confirm-btn",children:B?"İşleniyor...":"Onayla"})]})]})})]}):e.jsxs("div",{className:"lookup-form-container",children:[g&&e.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:g}),e.jsxs("form",{className:"lookup-form",onSubmit:U,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"orderNumber",children:["Sipariş Numarası ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"orderNumber",value:r,onChange:L=>t(L.target.value.toUpperCase()),placeholder:"Örn: ORD-2024-001234",required:!0,maxLength:"20"}),e.jsx("p",{className:"form-hint",children:"Sipariş onay e-postanızdaki sipariş numaranızı giriniz"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:["E-posta Adresi ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:c,onChange:L=>l(L.target.value),placeholder:"siparis@email.com",required:!0}),e.jsx("p",{className:"form-hint",children:"Sipariş verdiğiniz e-posta adresini giriniz"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"captcha",children:["Güvenlik Kodu ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"captcha-container",children:[e.jsxs("div",{className:"captcha-display",onClick:ce,children:[e.jsx("span",{className:"captcha-text",children:v}),e.jsx("button",{type:"button",className:"captcha-refresh",onClick:L=>{L.preventDefault(),ce()},title:"Yenile",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("polyline",{points:"1 20 1 14 7 14"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),e.jsx("input",{ref:_,type:"text",id:"captcha",value:n,onChange:L=>i(L.target.value.toUpperCase()),placeholder:"Yukarıdaki kodu giriniz",required:!0,maxLength:"5",className:"captcha-input"})]}),e.jsx("p",{className:"form-hint",children:"Yukarıdaki kodu giriniz (büyük/küçük harf duyarsız)"})]}),e.jsx("button",{type:"submit",className:"lookup-btn",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Sorgulanıyor..."]}):"Siparişi Sorgula"})]})]}),P.show&&e.jsxs("div",{className:`toast-notification toast-${P.type}`,children:[e.jsxs("div",{className:"toast-content",children:[P.type==="success"&&e.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),P.type==="error"&&e.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("span",{className:"toast-message",children:P.message})]}),e.jsx("button",{className:"toast-close",onClick:()=>M({show:!1,message:"",type:"success"}),"aria-label":"Kapat",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})},qe="http://localhost:8080/api",Xa=()=>{const{user:s,isAuthenticated:a,accessToken:r}=ie(),t=J(),[c,l]=d.useState([]),[v,f]=d.useState(!0),[n,i]=d.useState(""),[k,x]=d.useState(null),[z,m]=d.useState(!1),[h,j]=d.useState("İade talebi"),[g,b]=d.useState(""),[o,N]=d.useState({}),[p,C]=d.useState({});d.useEffect(()=>{if(!a){t("/giris");return}A()},[a,s,r]),d.useEffect(()=>{c.length>0&&(s!=null&&s.email)&&c.forEach(T=>{T.trackingNumber&&!o[T.orderNumber]&&!p[T.orderNumber]&&w(T)})},[c,s==null?void 0:s.email]);const A=async()=>{if(!(s!=null&&s.email)){i("Kullanıcı bilgisi bulunamadı"),f(!1);return}try{f(!0),i("");const T=await fetch(`${qe}/orders/my-orders`,{method:"GET",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}});if(!T.ok){if(T.status===401)throw new Error("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın.");if(T.status===404){l([]);return}else{const M=await T.json().catch(()=>({}));throw new Error(M.message||`Siparişler yüklenemedi (${T.status})`)}}const P=await T.json();if(P.isSuccess||P.success){const M=P.data||[];l(M),console.log("Siparişler yüklendi:",M.length,"adet")}else l([]),i(P.message||"Siparişler yüklenemedi")}catch(T){console.error("Siparişler yüklenirken hata:",T),i(T.message||"Siparişler yüklenirken bir hata oluştu")}finally{f(!1)}},y=T=>T?{PENDING:"Beklemede",PAID:"Ödendi",PROCESSING:"Hazırlanıyor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"İptal Edildi",REFUNDED:"İade Edildi",REFUND_REQUESTED:"İade Talebi"}[T.toUpperCase()]||T:"Bilinmiyor",I=T=>{if(!T)return"status-unknown";const P=T.toUpperCase();return P==="DELIVERED"?"status-delivered":P==="SHIPPED"?"status-shipped":P==="PROCESSING"||P==="PAID"?"status-processing":P==="CANCELLED"||P==="REFUNDED"?"status-cancelled":P==="REFUND_REQUESTED"?"status-refund":"status-pending"},S=T=>{if(!T||!T.status)return!1;const P=T.status.toUpperCase();return P!=="REFUNDED"&&P!=="REFUND_REQUESTED"},w=async T=>{if(!T.trackingNumber||!(s!=null&&s.email))return;const P=T.orderNumber;if(!(p[P]||o[P]))try{C(F=>({...F,[P]:!0}));const M=new URL(`${qe}/shipping/track-by-order`);M.searchParams.append("orderNumber",T.orderNumber),M.searchParams.append("email",s.email);const $=await(await fetch(M.toString(),{method:"GET",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}})).json();($.isSuccess||$.success)&&N(F=>({...F,[P]:$.data}))}catch(M){console.error("Kargo takip bilgisi alınırken hata:",M)}finally{C(M=>({...M,[P]:!1}))}},R=T=>T?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo Alındı",OUT_FOR_DELIVERY:"Teslimat İçin Yola Çıktı"}[T.toUpperCase()]||T:"Bilinmiyor",B=async()=>{if(!h.trim()){i("Lütfen iade sebebini belirtin");return}if(!k||!k.orderNumber){i("Sipariş bilgisi bulunamadı");return}const T=k.orderNumber;i(""),b("");try{const P=await fetch(`${qe}/orders/${T}/refund?email=${encodeURIComponent(s.email)}&reason=${encodeURIComponent(h)}`,{method:"POST",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}}),M=await P.json();if(!P.ok)throw new Error(M.message||"İade talebi oluşturulamadı");if(M.isSuccess||M.success)b("İade talebiniz başarıyla oluşturuldu. En kısa sürede değerlendirilecektir."),m(!1),j("İade talebi"),x(null),await A();else throw new Error(M.message||"İade talebi oluşturulamadı")}catch(P){console.error("İade talebi oluşturulurken hata:",P),i(P.message||"İade talebi oluşturulurken bir hata oluştu")}};return a?e.jsxs("div",{className:"my-orders-container",children:[e.jsx(q,{title:"Siparişlerim - Hiedra Perde",description:"Siparişlerinizi görüntüleyin ve takip edin",url:"/siparislerim"}),e.jsxs("header",{className:"my-orders-header",children:[e.jsx("h1",{children:"Siparişlerim"}),e.jsx("p",{children:"Siparişlerinizin durumunu takip edebilirsiniz"})]}),n&&!v&&e.jsx("div",{className:"error-message",style:{margin:"1rem",padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"4px"},children:n}),g&&e.jsx("div",{className:"success-message",style:{margin:"1rem",padding:"1rem",backgroundColor:"#efe",color:"#3c3",borderRadius:"4px"},children:g}),v?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Siparişler yükleniyor..."})]}):n&&c.length===0?e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:n}),e.jsx("button",{onClick:A,className:"retry-btn",children:"Tekrar Dene"})]}):c.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),e.jsx("circle",{cx:"7",cy:"20",r:"2"}),e.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),e.jsx("h2",{children:"Henüz siparişiniz yok"}),e.jsx("p",{children:"İlk siparişinizi vermek için ürünlerimizi inceleyin"}),e.jsx(O,{to:"/",className:"shop-btn",children:"Alışverişe Başla"})]}):e.jsx("div",{className:"orders-list",children:c.map(T=>e.jsxs("div",{className:"order-card",children:[e.jsxs("div",{className:"order-card-header",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("h3",{children:["Sipariş No: ",T.orderNumber]}),e.jsx("span",{className:`status-badge ${I(T.status)}`,children:y(T.status)})]}),e.jsxs("div",{className:"order-date",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),T.createdAt?new Date(T.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]}),e.jsx("div",{className:"order-items-preview",children:T.orderItems&&T.orderItems.length>0?e.jsxs(e.Fragment,{children:[T.orderItems.slice(0,3).map((P,M)=>{const D=P.price?typeof P.price=="string"?parseFloat(P.price):parseFloat(P.price.toString()):0;return e.jsxs("div",{className:"order-item-preview",children:[e.jsx("span",{className:"item-name",children:P.productName||"Ürün"}),P.width&&P.height&&e.jsxs("span",{className:"item-dimensions",children:["(",P.width," x ",P.height," cm)"]}),P.pleatType&&P.pleatType!=="1x1"&&e.jsxs("span",{className:"item-pleat",children:["Pile: ",P.pleatType]}),e.jsxs("span",{className:"item-quantity",children:["x",P.quantity||1]}),e.jsxs("span",{className:"item-price",children:[D.toFixed(2)," ₺"]})]},P.id||M)}),T.orderItems.length>3&&e.jsxs("div",{className:"more-items",children:["+",T.orderItems.length-3," ürün daha"]})]}):e.jsx("p",{children:"Sipariş detayı bulunamadı"})}),T.trackingNumber&&e.jsxs("div",{className:"order-tracking-section",style:{padding:"1rem",marginTop:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Kargo Takip:"})," ",T.trackingNumber,T.carrier&&e.jsxs("span",{style:{marginLeft:"0.5rem",color:"#64748b"},children:["(",T.carrier,")"]})]}),e.jsx("button",{onClick:()=>w(T),disabled:p[T.orderNumber],style:{padding:"0.25rem 0.75rem",background:"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:p[T.orderNumber]?"not-allowed":"pointer",fontSize:"0.85rem",opacity:p[T.orderNumber]?.6:1},children:p[T.orderNumber]?"Yükleniyor...":"Güncelle"})]}),o[T.orderNumber]?e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsx("div",{style:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.9rem",fontWeight:"600",backgroundColor:o[T.orderNumber].status==="DELIVERED"?"#d4edda":o[T.orderNumber].status==="IN_TRANSIT"?"#d1ecf1":o[T.orderNumber].status==="EXCEPTION"?"#f8d7da":"#fff3cd",color:o[T.orderNumber].status==="DELIVERED"?"#155724":o[T.orderNumber].status==="IN_TRANSIT"?"#0c5460":o[T.orderNumber].status==="EXCEPTION"?"#721c24":"#856404"},children:R(o[T.orderNumber].status)}),o[T.orderNumber].statusDescription&&e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:o[T.orderNumber].statusDescription}),o[T.orderNumber].events&&o[T.orderNumber].events.length>0&&e.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"#64748b"},children:[e.jsx("strong",{children:"Son Hareket:"})," ",o[T.orderNumber].events[0].description||"Bilgi yok",o[T.orderNumber].events[0].location&&e.jsxs("span",{style:{marginLeft:"0.5rem"},children:["📍 ",o[T.orderNumber].events[0].location]})]}),e.jsx(O,{to:`/kargo-takip?trackingNumber=${T.trackingNumber}&orderNumber=${T.orderNumber}`,style:{display:"inline-block",marginTop:"0.75rem",color:"#667eea",textDecoration:"none",fontSize:"0.9rem",fontWeight:"600"},children:"→ Detaylı Takip Bilgisi"})]}):e.jsx(O,{to:`/kargo-takip?trackingNumber=${T.trackingNumber}&orderNumber=${T.orderNumber}`,style:{display:"inline-block",marginTop:"0.5rem",color:"#667eea",textDecoration:"none",fontSize:"0.9rem",fontWeight:"600"},children:"→ Kargo Durumunu Görüntüle"})]}),e.jsxs("div",{className:"order-card-footer",children:[e.jsxs("div",{className:"order-total",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{className:"total-amount",children:[T.totalAmount?typeof T.totalAmount=="string"?parseFloat(T.totalAmount).toFixed(2):parseFloat(T.totalAmount.toString()).toFixed(2):"0.00"," ₺"]})]}),e.jsxs("div",{className:"order-actions",children:[S(T)&&e.jsx("button",{onClick:()=>{x(T),m(!0),i(""),b("")},className:"refund-btn",disabled:k&&k.orderNumber===T.orderNumber,children:k&&k.orderNumber===T.orderNumber?"İşleniyor...":"İade Talebi"}),e.jsx(O,{to:`/siparis/${T.orderNumber}`,className:"view-order-btn",children:"Detayları Gör"})]})]})]},T.id||T.orderNumber))}),z&&k&&e.jsx("div",{className:"modal-overlay",onClick:()=>{m(!1),j("İade talebi"),i(""),x(null)},children:e.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[e.jsx("h3",{children:"İade Talebi Oluştur"}),e.jsxs("p",{children:["Sipariş No: ",k.orderNumber]}),e.jsx("p",{children:"İade talebi oluşturmak istediğinizden emin misiniz? İade talebiniz değerlendirildikten sonra size geri dönüş yapılacaktır."}),n&&e.jsx("div",{className:"error-message",style:{marginTop:"1rem"},children:n}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"refundReason",children:["İade Sebebi ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("textarea",{id:"refundReason",value:h,onChange:T=>j(T.target.value),rows:"4",placeholder:"Lütfen iade sebebinizi detaylı olarak açıklayın...",required:!0})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>{m(!1),j("İade talebi"),i(""),x(null)},className:"cancel-btn",children:"İptal"}),e.jsx("button",{onClick:B,disabled:!h.trim(),className:"confirm-btn",children:"İade Talebi Oluştur"})]})]})})]}):null},Ge="http://localhost:8080/api",Za=()=>{const{orderNumber:s}=we(),{user:a,isAuthenticated:r,accessToken:t}=ie(),c=J(),[l,v]=d.useState(null),[f,n]=d.useState(!0),[i,k]=d.useState(""),[x,z]=d.useState(!1),[m,h]=d.useState("İade talebi"),[j,g]=d.useState(!1),[b,o]=d.useState(""),[N,p]=d.useState(null),[C,A]=d.useState(!1);d.useEffect(()=>{if(!r){c("/giris");return}s&&y()},[s,r,t]);const y=async()=>{if(!(a!=null&&a.email)||!s){k("Kullanıcı bilgisi veya sipariş numarası bulunamadı"),n(!1);return}try{n(!0),k(""),o("");const D=await fetch(`${Ge}/orders/query`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({orderNumber:s,customerEmail:a.email})});if(!D.ok){if(D.status===401)throw new Error("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın.");if(D.status===404)throw new Error("Sipariş bulunamadı.");{const F=await D.json().catch(()=>({}));throw new Error(F.message||`Sipariş yüklenemedi (${D.status})`)}}const $=await D.json();if($.isSuccess||$.success){const F=$.data||$;v({...F,shippingAddress:F.addresses&&F.addresses.length>0?F.addresses[0]:{}}),F.trackingNumber&&S(F.trackingNumber,F.orderNumber)}else throw new Error($.message||"Sipariş yüklenemedi")}catch(D){console.error("Sipariş yüklenirken hata:",D),k(D.message||"Sipariş yüklenirken bir hata oluştu")}finally{n(!1)}},I=async()=>{if(!m.trim()){k("Lütfen iade sebebini belirtin");return}g(!0),k(""),o("");try{const D=await fetch(`${Ge}/orders/${s}/refund?email=${encodeURIComponent(a.email)}&reason=${encodeURIComponent(m)}`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}),$=await D.json();if(!D.ok)throw new Error($.message||"İade talebi oluşturulamadı");if($.isSuccess||$.success)o("İade talebiniz başarıyla oluşturuldu. En kısa sürede değerlendirilecektir."),z(!1),h("İade talebi"),await y();else throw new Error($.message||"İade talebi oluşturulamadı")}catch(D){console.error("İade talebi oluşturulurken hata:",D),k(D.message||"İade talebi oluşturulurken bir hata oluştu")}finally{g(!1)}},S=async(D,$)=>{if(!(!D||!(a!=null&&a.email)))try{A(!0);const F=new URL(`${Ge}/shipping/track-by-order`);F.searchParams.append("orderNumber",$),F.searchParams.append("email",a.email);const _=await(await fetch(F.toString(),{method:"GET",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}})).json();(_.isSuccess||_.success)&&p(_.data)}catch(F){console.error("Kargo takip bilgisi alınırken hata:",F)}finally{A(!1)}},w=()=>{if(!l||!l.status)return!1;const D=l.status.toUpperCase();return D!=="REFUNDED"&&D!=="REFUND_REQUESTED"},R=D=>D?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo Alındı",OUT_FOR_DELIVERY:"Teslimat İçin Yola Çıktı"}[D]||D:"Bilinmiyor",B=D=>{if(!D)return"tracking-status-unknown";const $=D.toUpperCase();return $==="DELIVERED"?"tracking-status-delivered":$==="IN_TRANSIT"||$==="OUT_FOR_DELIVERY"?"tracking-status-transit":$==="EXCEPTION"?"tracking-status-exception":"tracking-status-pending"},T=D=>{if(!D)return"";try{return new Date(D).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return D}},P=D=>D?{PENDING:"Beklemede",PAID:"Ödendi",PROCESSING:"Hazırlanıyor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"İptal Edildi",REFUNDED:"İade Edildi",REFUND_REQUESTED:"İade Talebi"}[D.toUpperCase()]||D:"Bilinmiyor",M=D=>{if(!D)return"status-unknown";const $=D.toUpperCase();return $==="DELIVERED"?"status-delivered":$==="SHIPPED"?"status-shipped":$==="PROCESSING"||$==="PAID"?"status-processing":$==="CANCELLED"||$==="REFUNDED"?"status-cancelled":$==="REFUND_REQUESTED"?"status-refund":"status-pending"};return r?e.jsxs("div",{className:"order-detail-container",children:[e.jsx(q,{title:`Sipariş Detayı - ${s} - Hiedra Perde`,description:`${s} numaralı siparişinizin detaylarını görüntüleyin`,url:`/siparis/${s}`}),f?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Sipariş yükleniyor..."})]}):i&&!l?e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:i}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:y,className:"retry-btn",children:"Tekrar Dene"}),e.jsx(O,{to:"/siparislerim",className:"back-btn",children:"Siparişlerime Dön"})]})]}):l?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"order-detail-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx(O,{to:"/siparislerim",className:"back-link",children:"← Siparişlerime Dön"}),e.jsx("h1",{children:"Sipariş Detayı"})]}),w()&&e.jsx("button",{onClick:()=>z(!0),className:"refund-request-btn",disabled:j,children:"İade Talebi Oluştur"})]}),i&&e.jsx("div",{className:"error-message",children:i}),b&&e.jsx("div",{className:"success-message",children:b}),e.jsxs("div",{className:"order-detail-content",children:[e.jsx("div",{className:"order-summary-card",children:e.jsxs("div",{className:"summary-header",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("h2",{children:["Sipariş No: ",l.orderNumber]}),e.jsx("span",{className:`status-badge ${M(l.status)}`,children:P(l.status)})]}),e.jsxs("div",{className:"order-date",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),l.createdAt?new Date(l.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]})}),e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"Sipariş Ürünleri"}),e.jsx("div",{className:"order-items-list",children:l.orderItems&&l.orderItems.length>0?l.orderItems.map((D,$)=>{const F=D.price?typeof D.price=="string"?parseFloat(D.price):parseFloat(D.price.toString()):0;return e.jsxs("div",{className:"order-item-detail",children:[e.jsxs("div",{className:"item-main-info",children:[e.jsx("h4",{children:D.productName||"Ürün"}),e.jsxs("div",{className:"item-specs",children:[D.width&&D.height&&e.jsxs("span",{className:"spec-item",children:[e.jsx("strong",{children:"Ölçüler:"})," ",D.width," x ",D.height," cm"]}),D.pleatType&&D.pleatType!=="1x1"&&e.jsxs("span",{className:"spec-item",children:[e.jsx("strong",{children:"Pile Tipi:"})," ",D.pleatType]}),e.jsxs("span",{className:"spec-item",children:[e.jsx("strong",{children:"Adet:"})," ",D.quantity||1]})]})]}),e.jsx("div",{className:"item-price-info",children:e.jsxs("span",{className:"item-price",children:[F.toFixed(2)," ₺"]})})]},D.id||$)}):e.jsx("p",{children:"Sipariş detayı bulunamadı"})}),e.jsxs("div",{className:"order-total-section",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:"Ara Toplam:"}),e.jsxs("span",{children:[l.totalAmount?typeof l.totalAmount=="string"?parseFloat(l.totalAmount).toFixed(2):parseFloat(l.totalAmount.toString()).toFixed(2):"0.00"," ₺"]})]}),e.jsxs("div",{className:"total-row final",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{className:"total-amount",children:[l.totalAmount?typeof l.totalAmount=="string"?parseFloat(l.totalAmount).toFixed(2):parseFloat(l.totalAmount.toString()).toFixed(2):"0.00"," ₺"]})]})]})]}),e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"Teslimat Adresi"}),e.jsxs("div",{className:"address-details",children:[l.shippingAddress&&e.jsxs(e.Fragment,{children:[l.shippingAddress.addressLine&&e.jsxs("p",{children:[e.jsx("strong",{children:"Adres:"})," ",l.shippingAddress.addressLine]}),l.shippingAddress.addressDetail&&e.jsxs("p",{children:[e.jsx("strong",{children:"Adres Detayı:"})," ",l.shippingAddress.addressDetail]}),(l.shippingAddress.district||l.shippingAddress.city)&&e.jsxs("p",{children:[e.jsx("strong",{children:"İlçe/Şehir:"})," ",l.shippingAddress.district||"",l.shippingAddress.district&&l.shippingAddress.city?" / ":"",l.shippingAddress.city||""]})]}),(!l.shippingAddress||!l.shippingAddress.addressLine&&!l.shippingAddress.city)&&e.jsx("p",{children:"Adres bilgisi bulunamadı"})]})]}),l.trackingNumber&&e.jsxs("div",{className:"order-section tracking-section",children:[e.jsx("h3",{children:"Kargo Takip Bilgileri"}),e.jsxs("div",{className:"tracking-info-card",children:[e.jsxs("div",{className:"tracking-header-info",children:[e.jsxs("div",{className:"tracking-number-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Takip Numarası:"})," ",l.trackingNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kargo Firması:"})," ",l.carrier||"DHL"]}),l.shippedAt&&e.jsxs("p",{children:[e.jsx("strong",{children:"Kargoya Verilme:"})," ",new Date(l.shippedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("button",{onClick:()=>S(l.trackingNumber,l.orderNumber),disabled:C,style:{padding:"0.5rem 1rem",background:C?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:C?"not-allowed":"pointer",fontSize:"0.9rem",opacity:C?.6:1},children:C?"Yükleniyor...":"🔄 Güncelle"}),e.jsx(O,{to:`/kargo-takip?trackingNumber=${l.trackingNumber}&orderNumber=${l.orderNumber}`,className:"track-shipment-link",children:"📦 Detaylı Takip"})]})]}),C?e.jsx("div",{className:"tracking-loading",children:e.jsx("p",{children:"Kargo bilgileri yükleniyor..."})}):N?e.jsxs("div",{className:"tracking-details",children:[e.jsxs("div",{className:"tracking-status-badge",children:[e.jsx("div",{className:`status-badge ${B(N.status)}`,children:R(N.status)}),N.statusDescription&&e.jsx("p",{className:"status-description",children:N.statusDescription})]}),N.events&&N.events.length>0&&e.jsxs("div",{className:"tracking-events-preview",children:[e.jsx("h4",{children:"Son Hareketler"}),e.jsxs("div",{className:"events-list",children:[N.events.slice(0,3).map((D,$)=>e.jsxs("div",{className:"event-preview-item",children:[e.jsx("div",{className:"event-time-small",children:T(D.timestamp)}),e.jsxs("div",{className:"event-content-small",children:[D.location&&e.jsx("span",{className:"location-icon",children:"📍"}),e.jsx("span",{children:D.location||"Konum bilgisi yok"})]}),D.description&&e.jsx("div",{className:"event-description-small",children:D.description})]},$)),N.events.length>3&&e.jsxs(O,{to:`/kargo-takip?trackingNumber=${l.trackingNumber}&orderNumber=${l.orderNumber}`,className:"view-all-events-link",children:["Tüm hareketleri görüntüle (",N.events.length," adet)"]})]})]})]}):e.jsxs("div",{className:"tracking-no-data",children:[e.jsx("p",{children:'Kargo takip bilgisi henüz güncellenmedi. "Güncelle" butonuna tıklayarak en güncel bilgileri alabilirsiniz.'}),e.jsx("button",{onClick:()=>S(l.trackingNumber,l.orderNumber),disabled:C,style:{marginTop:"0.5rem",padding:"0.5rem 1rem",background:C?"#ccc":"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:C?"not-allowed":"pointer",fontSize:"0.9rem",opacity:C?.6:1},children:C?"Yükleniyor...":"Kargo Bilgisini Yükle"})]})]})]}),e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"Müşteri Bilgileri"}),e.jsxs("div",{className:"customer-details",children:[l.customerName&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ad Soyad:"})," ",l.customerName]}),l.customerEmail&&e.jsxs("p",{children:[e.jsx("strong",{children:"E-posta:"})," ",l.customerEmail]}),l.customerPhone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Telefon:"})," ",l.customerPhone]})]})]}),l.cancelReason&&e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"İptal Bilgisi"}),e.jsxs("div",{className:"cancel-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sebep:"})," ",l.cancelReason]}),l.cancelledAt&&e.jsxs("p",{children:[e.jsx("strong",{children:"İptal Tarihi:"})," ",new Date(l.cancelledAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),l.refundedAt&&e.jsxs("div",{className:"order-section",children:[e.jsx("h3",{children:"İade Bilgisi"}),e.jsx("div",{className:"refund-info",children:e.jsxs("p",{children:[e.jsx("strong",{children:"İade Tarihi:"})," ",new Date(l.refundedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]}),l.status==="REFUND_REQUESTED"&&e.jsxs("div",{className:"order-section info-section",children:[e.jsx("h3",{children:"İade Talebi"}),e.jsx("div",{className:"refund-request-info",children:e.jsx("p",{children:"İade talebiniz alınmıştır ve değerlendirme aşamasındadır. En kısa sürede size geri dönüş yapılacaktır."})})]})]}),x&&e.jsx("div",{className:"modal-overlay",onClick:()=>!j&&z(!1),children:e.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),children:[e.jsx("h3",{children:"İade Talebi Oluştur"}),e.jsx("p",{children:"İade talebi oluşturmak istediğinizden emin misiniz? İade talebiniz değerlendirildikten sonra size geri dönüş yapılacaktır."}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"refundReason",children:["İade Sebebi ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("textarea",{id:"refundReason",value:m,onChange:D=>h(D.target.value),rows:"4",placeholder:"Lütfen iade sebebinizi detaylı olarak açıklayın...",required:!0})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>{z(!1),h("İade talebi"),k("")},disabled:j,className:"cancel-btn",children:"İptal"}),e.jsx("button",{onClick:I,disabled:j||!m.trim(),className:"confirm-btn",children:j?"İşleniyor...":"İade Talebi Oluştur"})]})]})})]}):null]}):null},vs="http://localhost:8080/api",Qa=()=>{const[s,a]=d.useState({totalProducts:0,categoryCount:0,loading:!0});d.useEffect(()=>{(async()=>{try{const c=await fetch(`${vs}/products?page=0&size=1`);let l=0;if(c.ok){const n=await c.json();(n.isSuccess||n.success)&&n.data&&n.data.totalElements!==void 0&&(l=n.data.totalElements)}const v=await fetch(`${vs}/categories`);let f=0;if(v.ok){const n=await v.json();if(n.isSuccess||n.success){const i=n.data||[];f=Array.isArray(i)?i.length:0}}a({totalProducts:l,categoryCount:f,loading:!1})}catch(c){console.error("İstatistikler yüklenirken hata:",c),a(l=>({...l,loading:!1}))}})()},[]);const r={"@context":"https://schema.org","@type":"AboutPage",name:"Hakkımızda - Perde Satış Uzmanı | Hiedra Perde",description:"Hiedra Perde - 2010 yılından beri perde satış sektöründe hizmet veren güvenilir çözüm ortağınız.",url:typeof window<"u"?window.location.href:"https://hiedra.com/hakkimizda",mainEntity:{"@type":"Organization",name:"Hiedra Perde",alternateName:"Hiedra Perde Satış",foundingDate:"2010",description:"Perde satış ve dekorasyon sektöründe kaliteli ürünler ve profesyonel hizmet sunan öncü firma",numberOfEmployees:"50+",address:{"@type":"PostalAddress",addressCountry:"TR"},areaServed:{"@type":"Country",name:"Türkiye"},serviceType:"Perde Satış ve Dekorasyon Hizmetleri",url:typeof window<"u"?window.location.origin:"https://hiedra.com"}};return e.jsxs("div",{className:"about-container",children:[e.jsx(q,{title:"Hakkımızda - Perde Satış Uzmanı | Hiedra Perde",description:"Hiedra Perde - 2010'dan beri perde satış sektöründe güvenilir çözüm ortağınız. Kaliteli perde ürünleri, uygun fiyatlar, profesyonel hizmet. Perde satış için doğru adres.",keywords:"hakkımızda, hiedra perde, perde firması, perde şirketi, perde satış, perde hizmeti, perde montaj, perde satış şirketi, türkiye perde satış",url:"/hakkimizda",structuredData:r}),e.jsxs("div",{className:"about-content",children:[e.jsxs("header",{className:"about-header",children:[e.jsx("h1",{children:"Hakkımızda - Bingöl Perde Satış Uzmanı"}),e.jsxs("p",{className:"about-subtitle",children:["2010'dan beri ",e.jsx("strong",{children:"Bingöl perde satış"})," sektöründe güvenilir çözüm ortağınız.",e.jsx("strong",{children:" Erzurum perde satışı"})," ve Türkiye genelinde hizmet veriyoruz."]})]}),e.jsxs("div",{className:"about-sections",children:[e.jsxs("section",{className:"about-section",children:[e.jsx("div",{className:"section-number",children:"01"}),e.jsx("h2",{children:"Biz Kimiz?"}),e.jsx("p",{children:"HIEDRA olarak, 2010 yılından beri perde ve dekorasyon sektöründe hizmet vermekteyiz. Müşteri memnuniyetini ön planda tutarak, kaliteli ürünler ve profesyonel hizmet anlayışıyla binlerce mutlu müşteriye ulaştık. Modern ve klasik tasarımları bir araya getirerek, her zevke uygun perde çözümleri sunuyoruz."})]}),e.jsxs("section",{className:"about-section",children:[e.jsx("div",{className:"section-number",children:"02"}),e.jsx("h2",{children:"Misyonumuz"}),e.jsx("p",{children:"Evlerinizin ve iş yerlerinizin atmosferini değiştiren, yaşam kalitesini artıran perde çözümleri sunmak. Müşterilerimize en kaliteli ürünleri, uygun fiyatlarla ve mükemmel hizmet kalitesiyle sunarak, onların hayallerindeki mekanları yaratmalarına yardımcı olmak."})]}),e.jsxs("section",{className:"about-section",children:[e.jsx("div",{className:"section-number",children:"03"}),e.jsx("h2",{children:"Vizyonumuz"}),e.jsx("p",{children:"Türkiye'nin önde gelen perde ve dekorasyon markası olmak. Sürekli gelişen tasarım anlayışımız ve müşteri odaklı yaklaşımımızla, sektörde öncü olmak ve uluslararası pazara açılmak."})]}),e.jsxs("section",{className:"about-section features-section",children:[e.jsx("div",{className:"section-number",children:"04"}),e.jsx("h2",{children:"Neden HIEDRA?"}),e.jsxs("ul",{className:"features-list",children:[e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Geniş ürün yelpazesi ve çeşitli tasarım seçenekleri"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Yüksek kaliteli kumaşlar ve dayanıklı malzemeler"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Uygun fiyatlar ve esnek ödeme seçenekleri"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Profesyonel ölçü ve montaj hizmeti"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Müşteri memnuniyeti garantisi"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"feature-icon"}),e.jsx("span",{className:"feature-text",children:"Hızlı teslimat ve güvenilir hizmet"})]})]})]})]}),e.jsxs("div",{className:"stats-section",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"10+"}),e.jsx("p",{children:"Yıllık Deneyim"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"5000+"}),e.jsx("p",{children:"Mutlu Müşteri"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:s.loading?e.jsx("span",{style:{fontSize:"0.8em",opacity:.7},children:"Yükleniyor..."}):`${s.totalProducts}+`}),e.jsx("p",{children:"Toplam Ürün"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:s.loading?e.jsx("span",{style:{fontSize:"0.8em",opacity:.7},children:"Yükleniyor..."}):`${s.categoryCount}+`}),e.jsx("p",{children:"Ürün Çeşidi"})]})]})]})]})},ks="http://localhost:8080/bize_ulaşın",et=()=>{const[s,a]=d.useState({name:"",email:"",phone:"",subject:"",message:""}),[r,t]=d.useState(!1),[c,l]=d.useState(!1),[v,f]=d.useState(!1),[n,i]=d.useState(""),[k,x]=d.useState(""),z=o=>{a({...s,[o.target.name]:o.target.value}),k&&x("")},m=o=>{const N=o.target.value.replace(/\D/g,"");N.length<=6&&(i(N),k&&x(""))},h=async o=>{o.preventDefault(),l(!0),x("");try{const N=encodeURI(`${ks}/gönder`),p=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,email:s.email,phone:s.phone,message:s.message,subject:s.subject})}),C=p.headers.get("content-type");let A;if(C&&C.includes("application/json"))try{const y=await p.text();if(!y||y.trim()===""){console.error("Boş response alındı"),x("Sunucudan yanıt alınamadı. Lütfen tekrar deneyiniz."),l(!1);return}A=JSON.parse(y),console.log("API Response (gönder):",A)}catch(y){console.error("JSON parse hatası:",y),console.error("Parse edilemeyen text:",text.substring(0,200)),x(`Sunucu yanıtı işlenemedi: ${y.message}`),l(!1);return}else{const y=await p.text();console.error("JSON olmayan response:",y),x(`Beklenmeyen yanıt formatı: ${C||"bilinmiyor"}`),l(!1);return}p.ok?A.isSuccess===!0||A.success===!0?f(!0):x(A.message||"Mesaj gönderilemedi. Lütfen tekrar deneyiniz."):x(A.message||`Hata: ${p.status} ${p.statusText}`)}catch(N){console.error("API hatası:",N),N.message?x(`Hata: ${N.message}`):x("Bir hata oluştu. Lütfen tekrar deneyiniz.")}finally{l(!1)}},j=async o=>{if(o.preventDefault(),n.length!==6){x("Lütfen 6 haneli doğrulama kodunu giriniz.");return}l(!0),x("");try{const N=encodeURI(`${ks}/verify-email`),p=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n})}),C=p.headers.get("content-type");let A;if(C&&C.includes("application/json"))try{const y=await p.text();if(!y||y.trim()===""){console.error("Boş response alındı"),x("Sunucudan yanıt alınamadı. Lütfen tekrar deneyiniz."),l(!1);return}A=JSON.parse(y),console.log("API Response (verify-email):",A)}catch(y){console.error("JSON parse hatası:",y),console.error("Parse edilemeyen text:",text.substring(0,200)),x(`Sunucu yanıtı işlenemedi: ${y.message}`),l(!1);return}else{const y=await p.text();console.error("JSON olmayan response:",y),x(`Beklenmeyen yanıt formatı: ${C||"bilinmiyor"}`),l(!1);return}p.ok?A.isSuccess===!0||A.success===!0?(t(!0),f(!1),i(""),setTimeout(()=>{t(!1),a({name:"",email:"",phone:"",subject:"",message:""})},3e3)):x(A.message||"Doğrulama kodu hatalı. Lütfen tekrar deneyiniz."):x(A.message||`Hata: ${p.status} ${p.statusText}`)}catch(N){console.error("API hatası:",N),N.message?x(`Hata: ${N.message}`):x("Bir hata oluştu. Lütfen tekrar deneyiniz.")}finally{l(!1)}},g=()=>{f(!1),i(""),x("")},b={"@context":"https://schema.org","@type":"ContactPage",name:"İletişim - Perde Satış Desteği | Hiedra Perde",description:"Perde satış desteği için Hiedra Perde ile iletişime geçin. Sorularınız, önerileriniz ve talepleriniz için bize ulaşın.",url:typeof window<"u"?window.location.href:"https://hiedra.com/iletisim",mainEntity:{"@type":"LocalBusiness","@id":"https://hiedra.com",name:"Hiedra Perde",alternateName:"Hiedra Perde Satış",image:typeof window<"u"?`${window.location.origin}/logo.png`:"https://hiedra.com/logo.png",telephone:"+905336360079",email:"ysufakin23@gmail.com",priceRange:"₺₺",address:{"@type":"PostalAddress",streetAddress:"Kültür Mahallesi, Örnek Sokak No:123",addressLocality:"Bingöl",postalCode:"12000",addressRegion:"Bingöl",addressCountry:"TR"},geo:{"@type":"GeoCoordinates",latitude:"38.8847",longitude:"40.4986"},openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],opens:"09:00",closes:"18:00"}],areaServed:{"@type":"Country",name:"Türkiye"},hasOfferCatalog:{"@type":"OfferCatalog",name:"Perde Satış",itemListElement:[{"@type":"Offer",itemOffered:{"@type":"Product",name:"Zebra Perde Satış"}},{"@type":"Offer",itemOffered:{"@type":"Product",name:"Klasik Perde Satış"}},{"@type":"Offer",itemOffered:{"@type":"Product",name:"Stor Perde Satış"}},{"@type":"Offer",itemOffered:{"@type":"Product",name:"Jaluzi Perde Satış"}}]},sameAs:[]}};return e.jsxs("div",{className:"contact-container",children:[e.jsx(q,{title:"İletişim - Perde Satış Desteği | Hiedra Perde",description:"Perde satış desteği için Hiedra Perde ile iletişime geçin. Sorularınız, önerileriniz ve siparişleriniz için bize ulaşın. Perde satış konusunda uzman ekibimiz yanınızda.",keywords:"iletişim, hiedra iletişim, perde firması iletişim, perde satış desteği, perde sipariş, perde danışmanlık, perde satış müşteri hizmetleri",url:"/iletisim",structuredData:b}),e.jsxs("div",{className:"contact-content",children:[e.jsxs("header",{className:"contact-header",children:[e.jsx("h1",{children:"İletişim - Bingöl Perde Satış Desteği"}),e.jsxs("p",{className:"contact-subtitle",children:[e.jsx("strong",{children:"Bingöl perde satış"})," ve ",e.jsx("strong",{children:"Erzurum perde satışı"})," konusunda sorularınız için bize ulaşın, size yardımcı olalım"]})]}),e.jsxs("div",{className:"contact-wrapper",children:[e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"info-card",children:[e.jsxs("div",{className:"info-header",children:[e.jsx("span",{className:"info-number",children:"01"}),e.jsx("h3",{children:"Adres"})]}),e.jsxs("p",{children:["Kültür Mahallesi, Örnek Sokak No:123",e.jsx("br",{}),"Bingöl, Türkiye"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsxs("div",{className:"info-header",children:[e.jsx("span",{className:"info-number",children:"02"}),e.jsx("h3",{children:"Telefon"})]}),e.jsx("p",{children:e.jsx("a",{href:"tel:+905336360079",children:"0533 636 0079"})})]}),e.jsxs("div",{className:"info-card",children:[e.jsxs("div",{className:"info-header",children:[e.jsx("span",{className:"info-number",children:"03"}),e.jsx("h3",{children:"E-posta"})]}),e.jsxs("p",{children:[e.jsx("a",{href:"mailto:ysufakin23@gmail.com",children:"ysufakin23@gmail.com"}),e.jsx("br",{}),e.jsx("a",{href:"mailto:destek@hiedra.com",children:"destek@hiedra.com"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsxs("div",{className:"info-header",children:[e.jsx("span",{className:"info-number",children:"04"}),e.jsx("h3",{children:"Çalışma Saatleri"})]}),e.jsxs("p",{children:["Pazartesi - Cuma: 09:00 - 18:00",e.jsx("br",{}),"Cumartesi: 10:00 - 16:00",e.jsx("br",{}),"Pazar: Kapalı"]})]})]}),e.jsx("div",{className:"contact-form-wrapper",children:v?e.jsxs("form",{className:"contact-form verification-form",onSubmit:j,children:[e.jsxs("div",{className:"verification-header",children:[e.jsx("h3",{children:"E-posta Doğrulama"}),e.jsxs("p",{className:"verification-info",children:[e.jsx("strong",{children:s.email})," adresine doğrulama kodu gönderildi.",e.jsx("br",{}),"Lütfen e-posta kutunuzu kontrol ediniz."]})]}),k&&e.jsx("div",{className:"error-message",children:k}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"verificationCode",children:"Doğrulama Kodu (6 haneli) *"}),e.jsx("input",{type:"text",id:"verificationCode",name:"verificationCode",value:n,onChange:m,required:!0,disabled:c,placeholder:"123456",maxLength:"6",autoFocus:!0}),e.jsx("small",{className:"form-hint",children:"E-postanıza gelen 6 haneli kodu giriniz"})]}),e.jsxs("div",{className:"verification-actions",children:[e.jsx("button",{type:"button",onClick:g,className:"btn-back",disabled:c,children:"← Geri Dön"}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:c||n.length!==6,children:c?"Doğrulanıyor...":"Doğrula ve Gönder"})]})]}):e.jsxs("form",{className:"contact-form",onSubmit:h,children:[r&&e.jsx("div",{className:"success-message",children:"Mesajınız başarıyla gönderildi! En kısa sürede size dönüş yapacağız."}),k&&e.jsx("div",{className:"error-message",children:k}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Adınız Soyadınız *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:z,required:!0,disabled:c,placeholder:"Adınız ve soyadınız"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"E-posta *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:z,required:!0,disabled:c,placeholder:"ornek@email.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Telefon"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:z,disabled:c,placeholder:"0555 123 45 67"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"subject",children:"Konu *"}),e.jsx("input",{type:"text",id:"subject",name:"subject",value:s.subject,onChange:z,required:!0,disabled:c,placeholder:"Mesajınızın konusu"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"message",children:"Mesajınız *"}),e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:z,required:!0,disabled:c,rows:"6",placeholder:"Mesajınızı buraya yazın..."})]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:c,children:c?"Gönderiliyor...":"Mesaj Gönder"})]})})]})]})]})},st=()=>{const[s,a]=d.useState(null),r=[{question:"Perde siparişimi nasıl verebilirim?",answer:"Sitemizde ürünlerimizi inceleyebilir, beğendiğiniz perdeyi sepete ekleyebilirsiniz. Ürün detay sayfasında en, boy ve pile sıklığı gibi özelleştirmelerinizi yapabilir, fiyatı görüntüleyebilir ve sepete ekleyebilirsiniz. Ödeme adımlarını tamamladıktan sonra siparişiniz bize ulaşır."},{question:"Perde ölçülerini nasıl belirleyebilirim?",answer:"Perde ölçülerinizi ürün detay sayfasında belirleyebilirsiniz. En (genişlik) için maksimum 30000 cm, boy (yükseklik) için maksimum 500 cm girilebilir. Ölçülerinizi pencere veya duvar ölçülerinize göre belirleyebilirsiniz. Profesyonel ölçü hizmeti de sunmaktayız, iletişim sayfamızdan randevu alabilirsiniz."},{question:"Pile sıklığı nedir? Hangi seçeneği tercih etmeliyim?",answer:"Pile sıklığı, perdenin katlanma sıklığını ifade eder. Pilesiz seçeneği daha sade görünüm sunarken, 1x2 ve 1x3 seçenekleri daha fazla katman ve dolgunluk sağlar. Seçim, zevkinize ve dekorasyon tarzınıza göre değişir. Daha dolgun ve şık bir görünüm için 1x3, daha minimal bir görünüm için pilesiz tercih edebilirsiniz."},{question:"Fiyatlandırma nasıl yapılıyor?",answer:"Fiyatlandırma, ürünün metre fiyatı, seçtiğiniz en (genişlik) ve pile sıklığı çarpanına göre hesaplanır. Pilesiz seçeneği x1, 1x2 seçeneği x2, 1x3 seçeneği x3 çarpanı ile hesaplanır. Ürün detay sayfasında seçimlerinizi yaptıktan sonra otomatik olarak güncel fiyatı görebilirsiniz."},{question:"Teslimat süresi ne kadar?",answer:"Siparişiniz onaylandıktan sonra, özel ölçü ve üretim sürecimiz yaklaşık 7-14 iş günü sürer. Üretim tamamlandıktan sonra kargo ile gönderim yapılır ve teslimat süresi adresinize göre değişiklik gösterir. Acil durumlarda hızlı teslimat seçeneği de sunmaktayız, detaylar için iletişime geçebilirsiniz."},{question:"Montaj hizmeti sunuyor musunuz?",answer:"Evet, profesyonel montaj hizmeti sunmaktayız. Montaj hizmeti için ek ücret alınmaktadır. Siparişiniz sırasında montaj hizmeti talep edebilir veya sonradan randevu alabilirsiniz. Montaj ekibimiz, perdenizin düzgün ve profesyonel bir şekilde takılmasını sağlar."},{question:"İade ve değişim politikası nedir?",answer:"Ürünleriniz size ulaştıktan sonra 14 gün içinde iade veya değişim talebinde bulunabilirsiniz. Ürünün kullanılmamış, paket açılmamış ve hasarsız olması gerekmektedir. Özel ölçüde üretilen perdeler için iade kabul edilmemektedir. Detaylı bilgi için iletişim sayfamızdan bize ulaşabilirsiniz."},{question:"Hangi ödeme yöntemlerini kabul ediyorsunuz?",answer:"Kredi kartı, banka kartı ve kapıda ödeme seçenekleri sunmaktayız. Online ödeme için güvenli ödeme altyapısı kullanılmaktadır. Kart bilgileriniz saklanmaz ve ödemeler SSL sertifikası ile korunur."},{question:"Siparişimi nasıl takip edebilirim?",answer:"Sipariş sorgulama sayfamızdan, sipariş numaranız ve e-posta adresiniz ile siparişinizin durumunu takip edebilirsiniz. Siparişiniz onaylandıktan sonra e-posta ile kargo bilgileriniz de paylaşılır."},{question:"Hangi şehirlere teslimat yapıyorsunuz?",answer:"Tüm Türkiye genelinde kargo ile teslimat yapmaktayız. Adres bilgilerinizi doğru girdiğiniz takdirde, kargo şirketleri aracılığıyla siparişiniz adresinize teslim edilir. İstanbul, Ankara, İzmir gibi büyük şehirlerde montaj hizmeti de sunmaktayız."}],t=l=>{a(s===l?null:l)},c={"@context":"https://schema.org","@type":"FAQPage",mainEntity:r.map(l=>({"@type":"Question",name:l.question,acceptedAnswer:{"@type":"Answer",text:l.answer}}))};return e.jsxs("div",{className:"faq-container",children:[e.jsx(q,{title:"Sık Sorulan Sorular - Perde Satış SSS | Hiedra Perde",description:"Perde satış hakkında en çok merak edilen sorular ve cevapları. Perde siparişi, ölçü, teslimat, montaj ve iade politikası hakkında bilgi alın. Perde satış süreci hakkında detaylar.",keywords:"perde sss, perde sık sorulan sorular, perde satış sss, perde sipariş nasıl verilir, perde teslimat, perde montaj, perde iade, perde satış sorular",url:"/sss",structuredData:c}),e.jsxs("div",{className:"faq-content",children:[e.jsxs("header",{className:"faq-header",children:[e.jsx("h1",{children:"Sık Sorulan Sorular - Perde Satış"}),e.jsx("p",{className:"faq-subtitle",children:"Perde satış hakkında merak ettiğiniz soruların cevaplarını burada bulabilirsiniz"})]}),e.jsx("div",{className:"faq-list",children:r.map((l,v)=>e.jsxs("div",{className:`faq-item ${s===v?"open":""}`,children:[e.jsxs("button",{className:"faq-question",onClick:()=>t(v),"aria-expanded":s===v,"aria-controls":`faq-answer-${v}`,children:[e.jsx("span",{className:"faq-question-text",children:l.question}),e.jsx("span",{className:"faq-icon",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),e.jsx("div",{id:`faq-answer-${v}`,className:"faq-answer","aria-hidden":s!==v,children:e.jsx("p",{children:l.answer})})]},v))}),e.jsxs("div",{className:"faq-contact",children:[e.jsx("p",{children:"Cevaplayamadığınız bir sorunuz mu var?"}),e.jsx("a",{href:"/iletisim",className:"contact-link",children:"Bize Ulaşın"})]})]})]})},Ns=()=>{const s=Fe(),a=J(),[r]=is(),[t,c]=oe.useState(null),[l,v]=oe.useState(!0);if(d.useEffect(()=>{var z;const k=r.get("order");console.log("OrderConfirmation component yüklendi, URL order:",k);let x=((z=s.state)==null?void 0:z.orderData)||null;if(!x)try{const m=sessionStorage.getItem("lastOrderData");m&&(x=JSON.parse(m),console.log("Order data sessionStorage'dan alındı:",x),sessionStorage.removeItem("lastOrderData"))}catch(m){console.error("SessionStorage parse hatası:",m)}if(k&&!x){console.log("URL'den order numarası alındı, orderData oluşturuluyor:",k);try{const m=sessionStorage.getItem("checkoutData");if(m){const h=JSON.parse(m);x={orderNumber:k,contactInfo:h.contactInfo||{},addressInfo:h.addressInfo||{},cardInfo:h.cardInfo||{},items:h.items||[],totalPrice:h.totalPrice||0},sessionStorage.removeItem("checkoutData"),console.log("OrderData URL'den oluşturuldu:",x)}else x={orderNumber:k,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0},console.log("Minimal orderData oluşturuldu (sadece order numarası):",x)}catch(m){console.error("Checkout data parse hatası:",m),x={orderNumber:k,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0}}}k&&!x&&(x={orderNumber:k,contactInfo:{},addressInfo:{},cardInfo:{},items:[],totalPrice:0},console.log("URL'den order numarası geldi, minimal orderData oluşturuldu:",x)),x?(c(x),v(!1)):(console.warn("Order data bulunamadı, ana sayfaya yönlendiriliyor"),a("/",{replace:!0}))},[r,s,a]),l||!t)return e.jsxs("div",{className:"order-confirmation-container",style:{padding:"3rem",textAlign:"center"},children:[e.jsxs("div",{className:"loading-spinner",style:{margin:"2rem auto"},children:[e.jsx("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("style",{children:`
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]}),e.jsx("p",{children:"Yükleniyor..."})]});const f=t.orderNumber||"ORD-"+Date.now(),n=new Date().toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i={"@context":"https://schema.org","@type":"Order",orderNumber:f,orderDate:new Date().toISOString(),customer:{"@type":"Person",name:`${t.contactInfo.firstName} ${t.contactInfo.lastName}`,email:t.contactInfo.email,telephone:t.contactInfo.phone},totalPrice:t.totalPrice};return e.jsxs("div",{className:"order-confirmation-container",children:[e.jsx(q,{title:"Sipariş Onayı",description:"Siparişiniz başarıyla alındı. Sipariş numaranız ve detayları.",keywords:"sipariş onayı, sipariş numarası, perde sipariş, sipariş teşekkür",url:"/siparis-onayi",structuredData:i}),e.jsxs("div",{className:"confirmation-content",children:[e.jsx("div",{className:"success-icon",children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsxs("header",{className:"confirmation-header",children:[e.jsx("h1",{children:"Siparişiniz Alındı!"}),e.jsx("p",{className:"confirmation-subtitle",children:"Siparişiniz için teşekkür ederiz"})]}),e.jsxs("div",{className:"order-details-card",children:[e.jsxs("div",{className:"order-number-section",children:[e.jsx("h2",{children:"Sipariş Numarası"}),e.jsx("p",{className:"order-number",children:f}),e.jsxs("p",{className:"order-date",children:["Sipariş Tarihi: ",n]})]}),e.jsxs("div",{className:"order-info-grid",children:[(t.contactInfo.firstName||t.contactInfo.email||t.contactInfo.phone)&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:"Fatura Bilgileri"}),e.jsxs("div",{className:"info-content",children:[(t.contactInfo.firstName||t.contactInfo.lastName)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ad Soyad:"})," ",t.contactInfo.firstName||""," ",t.contactInfo.lastName||""]}),t.contactInfo.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"E-posta:"})," ",t.contactInfo.email]}),t.contactInfo.phone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Telefon:"})," ",t.contactInfo.phone]})]})]}),(t.addressInfo.address||t.addressInfo.city)&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:"Teslimat Adresi"}),e.jsxs("div",{className:"info-content",children:[t.addressInfo.address&&e.jsx("p",{children:t.addressInfo.address}),(t.addressInfo.district||t.addressInfo.city)&&e.jsxs("p",{children:[t.addressInfo.district||"",t.addressInfo.district&&t.addressInfo.city?", ":"",t.addressInfo.city||""]}),t.addressInfo.addressDetail&&e.jsxs("p",{children:[e.jsx("strong",{children:"Adres Detayı:"})," ",t.addressInfo.addressDetail]})]})]}),(t.cardInfo.cardNumber||t.totalPrice>0)&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:"Ödeme Bilgileri"}),e.jsxs("div",{className:"info-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ödeme Yöntemi:"})," Kredi Kartı"]}),t.cardInfo.cardNumber&&t.cardInfo.cardNumber.length>=4&&e.jsxs("p",{children:[e.jsx("strong",{children:"Kart:"})," •••• •••• •••• ",t.cardInfo.cardNumber.slice(-4)]}),t.totalPrice>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Toplam Tutar:"})," ",t.totalPrice.toFixed(2)," ₺"]})]})]}),t.items&&t.items.length>0&&e.jsxs("div",{className:"info-section full-width",children:[e.jsx("h3",{children:"Sipariş Detayları"}),e.jsx("div",{className:"order-items-list",children:t.items.map((k,x)=>{var z;return e.jsxs("div",{className:"confirmation-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsx("span",{className:"item-name",children:k.name}),k.customizations&&e.jsxs("div",{className:"item-customizations",children:[e.jsxs("span",{children:["En: ",k.customizations.en," cm"]}),e.jsxs("span",{children:["Boy: ",k.customizations.boy," cm"]}),e.jsxs("span",{children:["Pile: ",k.customizations.pileSikligi==="pilesiz"?"Pilesiz":k.customizations.pileSikligi]})]}),e.jsxs("span",{className:"item-quantity",children:["Adet: ",k.quantity]})]}),e.jsxs("div",{className:"item-price",children:[((((z=k.customizations)==null?void 0:z.calculatedPrice)||k.price)*k.quantity).toFixed(2)," ₺"]})]},x)})}),t.totalPrice>0&&e.jsxs("div",{className:"order-summary",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Ara Toplam:"}),e.jsxs("span",{children:[t.totalPrice.toFixed(2)," ₺"]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Kargo:"}),e.jsx("span",{className:"free-shipping",children:"Ücretsiz"})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[t.totalPrice.toFixed(2)," ₺"]})]})]})]})]})]}),e.jsxs("div",{className:"confirmation-actions",children:[e.jsxs("p",{className:"info-text",children:["Sipariş durumunuzu ",e.jsx(O,{to:"/siparis-sorgula",children:"Sipariş Sorgula"})," sayfasından takip edebilirsiniz."]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx(O,{to:"/",className:"btn-primary",children:"Ana Sayfaya Dön"}),e.jsx("button",{onClick:()=>window.print(),className:"btn-secondary",children:"Yazdır"})]})]})]})]})},bs=()=>{var l;const s=J();let r=((l=Fe().state)==null?void 0:l.errorMessage)||"";if(!r)try{const v=sessionStorage.getItem("paymentError");v&&(r=v,sessionStorage.removeItem("paymentError"))}catch(v){console.error("SessionStorage read error:",v)}const t=()=>{s("/checkout")},c={"@context":"https://schema.org","@type":"WebPage",name:"Ödeme Başarısız",description:"Ödeme işleminiz tamamlanamadı. Lütfen tekrar deneyiniz."};return e.jsxs("div",{className:"payment-failed-container",children:[e.jsx(q,{title:"Ödeme Başarısız",description:"Ödeme işleminiz tamamlanamadı. Lütfen bilgilerinizi kontrol edip tekrar deneyiniz.",keywords:"ödeme hatası, ödeme başarısız, perde ödeme sorunu",url:"/odeme-basarisiz",structuredData:c}),e.jsxs("div",{className:"failed-content",children:[e.jsx("div",{className:"error-icon",children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("header",{className:"failed-header",children:[e.jsx("h1",{children:"Ödeme İşlemi Başarısız"}),e.jsx("p",{className:"failed-subtitle",children:"Ödeme işleminiz tamamlanamadı"})]}),e.jsxs("div",{className:"error-details-card",children:[e.jsx("h2",{children:"Hata Detayları"}),e.jsx("div",{className:"error-list",children:e.jsxs("div",{className:"error-item",children:[e.jsx("span",{className:"error-icon-small"}),e.jsxs("div",{className:"error-text",children:[e.jsx("p",{className:"error-title",children:"Ödeme Onaylanamadı"}),e.jsx("p",{className:"error-description",children:r||"Kart bilgileriniz doğrulanamadı veya işlem reddedildi. Lütfen kart bilgilerinizi kontrol edip tekrar deneyiniz."})]})]})}),e.jsxs("div",{className:"possible-causes",children:[e.jsx("h3",{children:"Olası Nedenler:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Kart numarası, son kullanma tarihi veya CVV hatalı olabilir"}),e.jsx("li",{children:"Kart limitiniz yetersiz olabilir"}),e.jsx("li",{children:"İnternet bağlantınızda bir sorun olabilir"}),e.jsx("li",{children:"Banka tarafından işlem reddedilmiş olabilir"})]})]})]}),e.jsxs("div",{className:"failed-actions",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:t,className:"btn-primary",children:"Ödemeyi Tekrar Dene"}),e.jsx(O,{to:"/cart",className:"btn-secondary",children:"Sepete Dön"}),e.jsx(O,{to:"/",className:"btn-link",children:"Ana Sayfaya Dön"})]}),e.jsxs("p",{className:"help-text",children:["Sorun devam ederse lütfen bizimle ",e.jsx(O,{to:"/iletisim",children:"iletişime geçin"})]})]})]})]})},ts="http://172.20.10.2:8080",at=`${ts}/api/payment`,tt=()=>{const[s]=is(),a=J(),[r,t]=d.useState(!0),[c,l]=d.useState(""),v=k=>{if(console.log("Backend'den gelen payment response handle ediliyor:",k),k.success===!0||k.isSuccess===!0){const z=k.data||k.orderNumber||k.order||null;console.log("Ödeme başarılı, order numarası:",z);const m=JSON.parse(sessionStorage.getItem("checkoutData")||"{}"),h={orderNumber:z||"SİPARİŞ-"+Date.now(),contactInfo:m.contactInfo||{},addressInfo:m.addressInfo||{},cardInfo:m.cardInfo||{},items:m.items||[],totalPrice:m.totalPrice||0};sessionStorage.removeItem("checkoutData"),sessionStorage.removeItem("pendingPaymentId"),sessionStorage.removeItem("pendingConversationId"),sessionStorage.setItem("lastOrderData",JSON.stringify(h)),console.log("Başarılı ödeme - sipariş onay sayfasına yönlendiriliyor..."),window.location.replace("/siparis-onayi")}else{const z=k.message||k.error||"Ödeme işlemi başarısız oldu.";console.log("Ödeme başarısız, hata mesajı:",z),sessionStorage.removeItem("pendingPaymentId"),sessionStorage.removeItem("pendingConversationId"),sessionStorage.setItem("paymentError",z),console.log("Başarısız ödeme - hata sayfasına yönlendiriliyor..."),window.location.replace("/odeme-basarisiz")}},f=()=>{const k=document.querySelectorAll("pre");for(const h of k){const j=h.textContent||h.innerText;if(j.trim().startsWith("{")&&j.trim().endsWith("}"))try{const g=JSON.parse(j.trim());return console.log("Pre elementinden JSON bulundu:",g),g}catch(g){console.log("Pre elementinden JSON parse edilemedi:",g)}}const z=(document.body.innerText||document.body.textContent||"").match(/\{[\s\S]*"success"[\s\S]*\}/);if(z)try{const h=JSON.parse(z[0]);return console.log("Body text'den JSON bulundu:",h),h}catch(h){console.log("Body text JSON parse edilemedi:",h)}const m=document.querySelectorAll('textarea, input[type="text"]');for(const h of m){const j=h.value||h.textContent||"";if(j.trim().startsWith("{")&&j.trim().endsWith("}"))try{const g=JSON.parse(j.trim());return console.log("Form elementinden JSON bulundu:",g),g}catch(g){console.log("Form elementinden JSON parse edilemedi:",g)}}return null},n=async(k,x)=>{try{const z=`${at}/3d-callback?paymentId=${encodeURIComponent(k)}&conversationId=${encodeURIComponent(x)}`;console.log("3D Callback isteği gönderiliyor:",{paymentId:k,conversationId:x}),console.log("Backend endpoint URL:",z);const m=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"}}),h=m.headers.get("content-type")||"",j=await m.text(),g=m.status;if(console.log("Response status:",g),console.log("Response content-type:",h),j.includes("Whitelabel Error Page")||j.includes("This application has no explicit mapping")||j.trim().startsWith("<!DOCTYPE")||j.trim().startsWith("<html")&&!j.includes("iyzico")){console.error("Backend HTML error page döndü"),sessionStorage.setItem("paymentError","Sunucuda bir hata oluştu. Lütfen daha sonra tekrar deneyiniz."),window.location.replace("/odeme-basarisiz");return}if(!m.ok||g>=400){let o="Ödeme işlemi sırasında bir hata oluştu.";if(j.trim().startsWith("{")&&j.trim().endsWith("}"))try{const N=JSON.parse(j);o=N.message||N.error||o}catch(N){console.error("JSON parse hatası:",N)}sessionStorage.setItem("paymentError",o),window.location.replace("/odeme-basarisiz");return}let b;if(h.includes("application/json")||j.trim().startsWith("{")&&j.trim().endsWith("}"))try{if(!j||j.trim()===""){sessionStorage.setItem("paymentError","Sunucudan yanıt alınamadı."),window.location.replace("/odeme-basarisiz");return}b=JSON.parse(j),console.log("3D Callback Response:",b)}catch(o){console.error("JSON parse hatası:",o),sessionStorage.setItem("paymentError",`Sunucu yanıtı işlenemedi: ${o.message}`),window.location.replace("/odeme-basarisiz");return}else{console.error("JSON olmayan response:",h),sessionStorage.setItem("paymentError",`Beklenmeyen yanıt formatı: ${h||"bilinmiyor"}`),window.location.replace("/odeme-basarisiz");return}v(b)}catch(z){console.error("3D Callback hatası:",z);const m=z.message||"Ödeme işlemi sırasında bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.";sessionStorage.setItem("paymentError",m),window.location.replace("/odeme-basarisiz")}};d.useEffect(()=>{(async()=>{const x=new URLSearchParams(window.location.search),z=x.get("order")||s.get("order");if(z){console.log("Backend'den redirect ile order numarası geldi:",z);const S=JSON.parse(sessionStorage.getItem("checkoutData")||"{}"),w={orderNumber:z,contactInfo:S.contactInfo||{},addressInfo:S.addressInfo||{},cardInfo:S.cardInfo||{},items:S.items||[],totalPrice:S.totalPrice||0};sessionStorage.removeItem("checkoutData"),sessionStorage.setItem("lastOrderData",JSON.stringify(w)),window.location.replace("/siparis-onayi");return}let m=x.get("paymentId")||s.get("paymentId"),h=x.get("conversationId")||s.get("conversationId");if(console.log("Payment3DCallback - URL Parametreleri:",{paymentId:m,conversationId:h}),console.log("Payment3DCallback - Current URL:",window.location.href),m&&h){console.log("URL parametreleri bulundu, backend API'ye istek atılıyor..."),sessionStorage.setItem("pendingPaymentId",m),sessionStorage.setItem("pendingConversationId",h),await n(m,h);return}const j=()=>{var S,w,R;if(document.body){const B=((S=document.body.innerHTML)==null?void 0:S.trim())||"",T=((w=document.body.textContent)==null?void 0:w.trim())||((R=document.body.innerText)==null?void 0:R.trim())||"";if(B&&B.startsWith("{")&&B.endsWith("}")&&!B.includes("<html")&&!B.includes("<body")&&!B.includes("<!DOCTYPE"))try{const P=JSON.parse(B);if(P.success!==void 0||P.isSuccess!==void 0||P.message)return console.log("ANINDA: innerHTML'den JSON yakalandı:",P),v(P),!0}catch(P){console.log("ANINDA innerHTML JSON parse hatası:",P)}if(T&&T.startsWith("{")&&T.endsWith("}")&&!T.includes("<")&&!T.includes("html")&&!T.includes("HTML"))try{const P=JSON.parse(T);if(P.success!==void 0||P.isSuccess!==void 0||P.message)return console.log("ANINDA: Body'den JSON yakalandı:",P),v(P),!0}catch(P){console.log("ANINDA body JSON parse hatası:",P)}}return!1};if(j())return;document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",()=>{j()}),document.readyState!=="complete"&&window.addEventListener("load",()=>{j()});const g=window.location.href,b=window.location.pathname;if(console.log("Payment3DCallback - Current URL:",g),console.log("Payment3DCallback - Current Path:",b),g.includes("172.20.10.2:8080")||g.includes(ts)){if(console.log("Backend URL'sine yönlendirilmiş, parametreleri çıkarıyoruz..."),j())return;const S=new URL(g),w=S.searchParams.get("paymentId"),R=S.searchParams.get("conversationId");if(w&&R){console.log("Backend URL'den parametreler alındı:",{paymentId:w,conversationId:R}),await n(w,R);return}}const o=f();if(o){console.log("Direkt JSON response bulundu, yönlendiriliyor..."),v(o);return}if(m&&h){console.log("URL parametreleri ile callback işleniyor..."),await n(m,h);return}const N=sessionStorage.getItem("pendingPaymentId"),p=sessionStorage.getItem("pendingConversationId");if(N&&p){console.log("SessionStorage'da bekleyen parametreler bulundu:",{paymentId:N,conversationId:p}),sessionStorage.removeItem("pendingPaymentId"),sessionStorage.removeItem("pendingConversationId"),await n(N,p);return}const C=sessionStorage.getItem("paymentError");if(C){console.log("SessionStorage'da hata mesajı bulundu:",C),window.location.replace("/odeme-basarisiz");return}console.log("URL parametreleri yok, sayfa içeriği kontrol ediliyor...");let A=0;const y=10,I=setInterval(()=>{var w,R,B,T;A++;const S=f();if(S){console.log("Gecikmeli JSON response bulundu, yönlendiriliyor..."),clearInterval(I),v(S);return}if(document.body&&document.body.textContent){const P=document.body.textContent.trim();if(P.startsWith("{")&&P.endsWith("}")||P.startsWith("[")&&P.endsWith("]"))try{const M=JSON.parse(P);if(M.success!==void 0||M.isSuccess!==void 0||M.message){console.log("Body'den direkt JSON parse edildi:",M),clearInterval(I),v(M);return}}catch(M){console.log("Body JSON parse edilemedi:",M)}}if(window.location.href.includes(ts)){const P=((R=(w=document.body)==null?void 0:w.textContent)==null?void 0:R.trim())||((T=(B=document.body)==null?void 0:B.innerText)==null?void 0:T.trim())||"";if(P.startsWith("{")&&P.endsWith("}"))try{const M=JSON.parse(P);if(M.success!==void 0||M.isSuccess!==void 0||M.message){console.log("Backend URL'den JSON yakalandı:",M),clearInterval(I),v(M);return}}catch(M){console.log("Backend URL JSON parse hatası:",M)}if(A===1){const M=new URLSearchParams(window.location.search),D=M.get("paymentId"),$=M.get("conversationId");if(D&&$){console.log("Backend URL'de parametreler bulundu, fetch ediliyor..."),clearInterval(I),n(D,$);return}}}A>=y&&(clearInterval(I),console.error("Ödeme bilgileri bulunamadı"),sessionStorage.setItem("paymentError","Ödeme bilgileri bulunamadı. Lütfen tekrar deneyiniz."),window.location.replace("/odeme-basarisiz"))},300)})()},[s,a]);const i={"@context":"https://schema.org","@type":"WebPage",name:"3D Ödeme Doğrulama",description:"3D Secure ödeme işleminiz tamamlanıyor."};return e.jsxs("div",{className:"payment-3d-callback-container",children:[e.jsx(q,{title:"Ödeme İşleniyor",description:"3D Secure ödeme işleminiz tamamlanıyor. Lütfen bekleyiniz.",keywords:"3d ödeme, ödeme doğrulama, güvenli ödeme",url:"/payment/3d-callback",structuredData:i}),e.jsx("div",{className:"callback-content",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})}),e.jsx("h2",{children:"Ödeme İşleniyor"}),e.jsx("p",{children:"3D Secure ödeme işleminiz tamamlanıyor. Lütfen bekleyiniz..."}),e.jsx("p",{className:"redirect-note",children:"Yönlendiriliyorsunuz..."})]}):c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"error-icon",children:e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsx("h2",{children:"İşlem Başarısız"}),e.jsx("p",{className:"error-text",children:c}),e.jsx("button",{onClick:()=>window.location.replace("/checkout"),className:"btn-retry",children:"Ödemeyi Tekrar Dene"})]}):null})]})},ws="http://localhost:8080/api",rt=()=>{var o,N;const{user:s,accessToken:a,isAuthenticated:r}=ie(),t=J(),[c,l]=d.useState(!0),[v,f]=d.useState(!1),[n,i]=d.useState(null),[k,x]=d.useState(""),[z,m]=d.useState(""),[h,j]=d.useState({fullName:"",phone:""});d.useEffect(()=>{if(!r){t("/");return}},[r,t]),d.useEffect(()=>{r&&a&&g()},[r,a]);const g=async()=>{try{l(!0);const p=await fetch(`${ws}/user/profile`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!p.ok)throw new Error("Profil bilgileri yüklenemedi");const C=await p.json();C.success&&C.data&&(i(C.data),j({fullName:C.data.fullName||"",phone:C.data.phone||""}))}catch(p){console.error("Profil yükleme hatası:",p),x("Profil bilgileri yüklenemedi")}finally{l(!1)}},b=async p=>{p.preventDefault(),f(!0),x(""),m("");try{const C=await fetch(`${ws}/user/profile`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(h)}),A=await C.json();C.ok&&A.success?(i(A.data),m("Profil bilgileri güncellendi"),setTimeout(()=>m(""),3e3)):x(A.message||"Profil güncellenemedi")}catch(C){console.error("Profil güncelleme hatası:",C),x("Profil güncellenirken bir hata oluştu")}finally{f(!1)}};return r?c?e.jsxs("div",{className:"profile-container",children:[e.jsx(q,{title:"Profil - Hiedra",description:"Kullanıcı profil sayfası"}),e.jsx("div",{className:"loading",children:"Yükleniyor..."})]}):e.jsxs("div",{className:"profile-container",children:[e.jsx(q,{title:"Profil - Hiedra",description:"Kullanıcı profil sayfası"}),e.jsxs("div",{className:"profile-header",children:[e.jsx("h1",{children:"Profilim"}),e.jsx("p",{children:"Hesap bilgilerinizi güncelleyin"})]}),k&&e.jsx("div",{className:"alert alert-error",children:k}),z&&e.jsx("div",{className:"alert alert-success",children:z}),e.jsx("div",{className:"profile-content",children:e.jsxs("div",{className:"profile-info-card",children:[e.jsxs("div",{className:"profile-avatar-section",children:[e.jsx("div",{className:"profile-avatar",children:n!=null&&n.fullName?e.jsx("span",{className:"avatar-initials",children:n.fullName.split(" ").map(p=>p[0]).join("").toUpperCase().substring(0,2)}):e.jsx("span",{className:"avatar-initials",children:((N=(o=n==null?void 0:n.email)==null?void 0:o[0])==null?void 0:N.toUpperCase())||"U"})}),e.jsxs("div",{className:"profile-avatar-info",children:[e.jsx("h2",{children:(n==null?void 0:n.fullName)||"Kullanıcı"}),e.jsx("p",{className:"profile-email",children:(n==null?void 0:n.email)||""})]})]}),e.jsxs("form",{onSubmit:b,className:"profile-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"E-posta"]}),e.jsx("input",{type:"email",id:"email",value:(n==null?void 0:n.email)||"",disabled:!0,className:"disabled-input"}),e.jsx("small",{children:"E-posta adresi değiştirilemez"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"fullName",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Ad Soyad *"]}),e.jsx("input",{type:"text",id:"fullName",value:h.fullName,onChange:p=>j({...h,fullName:p.target.value}),placeholder:"Adınız ve soyadınız",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"phone",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telefon Numarası *"]}),e.jsx("input",{type:"tel",id:"phone",value:h.phone,onChange:p=>j({...h,phone:p.target.value}),placeholder:"05XX XXX XX XX",required:!0})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-primary",disabled:v,children:v?"Kaydediliyor...":"Bilgileri Güncelle"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t("/"),children:"Ana Sayfaya Dön"})]})]})]})})]}):null},Hs=d.createContext(),it=()=>{const s=d.useContext(Hs);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},nt=({children:s})=>{const[a,r]=d.useState(()=>{const v=localStorage.getItem("theme")||"light";return typeof document<"u"&&document.documentElement.setAttribute("data-theme",v),v});d.useEffect(()=>{localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a)},[a]);const c={theme:a,toggleTheme:()=>{r(l=>l==="light"?"dark":"light")},isDark:a==="dark"};return e.jsx(Hs.Provider,{value:c,children:s})},lt=()=>{const s=J(),{requestCode:a,verifyCode:r,isAuthenticated:t,setUser:c,setAccessToken:l,saveAuthToStorage:v,accessToken:f}=ie(),{theme:n}=it(),i="http://localhost:8080/api";d.useEffect(()=>{t&&f&&k()},[t,f]);const k=async($=f)=>{if(!$){s("/");return}try{const F=await fetch(`${i}/user/profile`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(F.ok){const Z=await F.json();if(Z.success&&Z.data){const _=Z.data;!_.fullName||!_.phone||_.fullName.trim()===""||_.phone.trim()===""?s("/profil"):s("/")}else s("/")}else s("/")}catch(F){console.error("Profil kontrolü hatası:",F),s("/")}},[x,z]=d.useState(""),[m,h]=d.useState(""),[j,g]=d.useState("email"),[b,o]=d.useState(!1),[N,p]=d.useState(""),[C,A]=d.useState(""),[y,I]=d.useState(0),[S,w]=d.useState(!1);d.useEffect(()=>{if(y>0){const $=setTimeout(()=>{I(y-1)},1e3);return()=>clearTimeout($)}else y===0&&j==="code"&&w(!0)},[y,j]);const R=async $=>{if($.preventDefault(),p(""),A(""),o(!0),!x){p("Lütfen e-posta adresinizi girin"),o(!1);return}const F=await a(x);o(!1),F.success?(A("Doğrulama kodu e-posta adresinize gönderildi"),g("code"),I(180),w(!1)):p(F.error||"Kod gönderilemedi")},B=async $=>{if($.preventDefault(),p(""),A(""),o(!0),!m||m.length!==6){p("Lütfen 6 haneli doğrulama kodunu girin"),o(!1);return}const F=await r(x,m);o(!1),F.success?(A("Giriş başarılı! Yönlendiriliyorsunuz..."),setTimeout(async()=>{await k()},1500)):p(F.error||"Doğrulama kodu geçersiz")},T=async()=>{if(!S||y>0)return;p(""),A(""),o(!0);const $=await a(x);o(!1),$.success?(A("Yeni doğrulama kodu gönderildi"),I(180),w(!1)):p($.error||"Kod gönderilemedi")},P=()=>{g("email"),h(""),p(""),A(""),I(0),w(!1)},M=$=>{const F=Math.floor($/60),Z=$%60;return`${F}:${Z.toString().padStart(2,"0")}`},D=async()=>{p(""),A(""),o(!0);try{const $="http://localhost:8080/api",F=`${$}/auth/oauth2/authorization/google`,Z=500,_=600,ne=window.screen.width/2-Z/2,Y=window.screen.height/2-_/2,te=window.open(F,"Google Login",`width=${Z},height=${_},left=${ne},top=${Y},toolbar=no,menubar=no,scrollbars=yes,resizable=yes`);if(!te){p("Popup engellendi. Lütfen popup engelleyiciyi kapatın ve tekrar deneyin."),o(!1);return}const ue=Q=>{const u=new URL($).origin;if(!(Q.origin!==u&&Q.origin!==window.location.origin))if(Q.data&&Q.data.type==="GOOGLE_AUTH_SUCCESS"){const E=Q.data.authData;c(E.user),l(E.accessToken),v({user:E.user,accessToken:E.accessToken}),A("Google ile giriş başarılı! Yönlendiriliyorsunuz..."),te&&!te.closed&&te.close(),setTimeout(async()=>{await k(E.accessToken)},1500)}else Q.data&&Q.data.type==="GOOGLE_AUTH_ERROR"&&(p(Q.data.error||"Google ile giriş başarısız"),te&&!te.closed&&te.close(),o(!1))};let ce=!1;const ge=Q=>{ue(Q),Q.data&&(Q.data.type==="GOOGLE_AUTH_SUCCESS"||Q.data.type==="GOOGLE_AUTH_ERROR")&&(ce=!0)};window.addEventListener("message",ge);const le=setInterval(()=>{te.closed&&(clearInterval(le),window.removeEventListener("message",ge),ce||(p("Google giriş işlemi iptal edildi"),o(!1)))},1e3)}catch($){console.error("Google login error:",$),p("Google ile giriş yapılırken bir hata oluştu"),o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Giriş Yap - Hiedra Collection",description:"Hiedra Collection'a giriş yapın. E-posta doğrulama kodu ile güvenli giriş."}),e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-page-container",children:e.jsxs("div",{className:"login-page-content","data-theme":n,children:[e.jsxs("div",{className:"login-security-badge",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]}),e.jsx("span",{children:"Güvenli Giriş"})]}),e.jsx("h2",{className:"login-title",children:j==="email"?"Hoş Geldiniz":"Doğrulama Kodu"}),e.jsx("p",{className:"login-subtitle",children:j==="email"?"Hesabınıza güvenli bir şekilde giriş yapın. E-posta adresinize gönderilecek doğrulama kodu ile kimliğiniz doğrulanacaktır.":`${x} adresine gönderilen 6 haneli güvenlik kodunu girin`}),N&&e.jsx("div",{className:"login-error",children:N}),C&&e.jsx("div",{className:"login-success",children:C}),j==="email"?e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:R,className:"login-form",children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{htmlFor:"email",className:"login-label",children:"E-posta Adresi"}),e.jsx("input",{id:"email",type:"email",className:"login-input",placeholder:"E-posta adresinizi girin",value:x,onChange:$=>z($.target.value),required:!0,autoComplete:"email",disabled:b})]}),e.jsx("button",{type:"submit",className:"login-submit",disabled:b,children:b?"Kod gönderiliyor...":"Doğrulama Kodu Gönder"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"veya"})}),e.jsxs("button",{type:"button",className:"login-google-button",onClick:D,disabled:b,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google ile Giriş Yap"]}),j==="email"&&e.jsxs("div",{className:"login-security-features",children:[e.jsxs("div",{className:"security-feature-item",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),e.jsx("span",{children:"SSL Şifreli Bağlantı"})]}),e.jsxs("div",{className:"security-feature-item",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),e.jsx("span",{children:"Doğrulanmış Satıcı"})]}),e.jsxs("div",{className:"security-feature-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})]}),e.jsx("span",{children:"Kişisel Verileriniz Korunur"})]})]})]}):e.jsxs("form",{onSubmit:B,className:"login-form",children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{htmlFor:"code",className:"login-label",children:"Doğrulama Kodu"}),e.jsx("input",{id:"code",type:"text",className:"login-input login-code-input",placeholder:"000000",value:m,onChange:$=>{const F=$.target.value.replace(/\D/g,"").slice(0,6);h(F)},required:!0,maxLength:6,autoComplete:"off",disabled:b,style:{textAlign:"center",letterSpacing:"0.5rem",fontSize:"1.5rem",fontWeight:"bold"}}),e.jsx("p",{className:"login-code-hint",children:"6 haneli doğrulama kodunu girin"})]}),e.jsx("button",{type:"submit",className:"login-submit",disabled:b||m.length!==6,children:b?"Doğrulanıyor...":"Giriş Yap"}),e.jsxs("div",{className:"login-resend-section",children:[e.jsx("button",{type:"button",className:"login-resend-button",onClick:T,disabled:!S||b||y>0,children:y>0?`Yeniden gönder (${M(y)})`:"Yeniden Kod Gönder"}),e.jsx("button",{type:"button",className:"login-back-button",onClick:P,disabled:b,children:"E-posta değiştir"})]})]}),e.jsxs("div",{className:"login-footer",children:[e.jsx("p",{className:"login-footer-text",children:"Hesabınız yok mu? Otomatik olarak oluşturulacaktır."}),e.jsx("div",{className:"login-agreement-notice",children:e.jsxs("p",{className:"agreement-notice-text",children:["Kişisel verileriniz, ",e.jsx(O,{to:"/kvkk",target:"_blank",children:e.jsx("strong",{children:"Aydınlatma Metni"})}),' kapsamında işlenmektedir. "Doğrulama Kodu Gönder" butonuna basarak ',e.jsx(O,{to:"/kullanim-kosullari",target:"_blank",children:e.jsx("strong",{children:"Üyelik Sözleşmesi"})}),"'ni ve ",e.jsx(O,{to:"/gizlilik-politikasi",target:"_blank",children:e.jsx("strong",{children:"Gizlilik Politikası"})}),"'nı okuduğunuzu ve kabul ettiğinizi onaylıyorsunuz."]})})]})]})})})]})},Ae="http://localhost:8080/api",ot=()=>{const{isAuthenticated:s,accessToken:a}=ie(),r=J(),[t,c]=d.useState([]),[l,v]=d.useState(!0),[f,n]=d.useState(""),[i,k]=d.useState(""),[x,z]=d.useState(null),[m,h]=d.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:"",isDefault:!1});d.useEffect(()=>{s||r("/giris",{state:{from:"/adreslerim"}})},[s,r]),d.useEffect(()=>{s&&a&&j()},[s,a]);const j=async()=>{try{v(!0),n("");const y=await fetch(`${Ae}/user/addresses`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),I=await y.json();y.ok&&(I.isSuccess||I.success)?c(I.data||[]):n(I.message||"Adresler yüklenemedi")}catch(y){console.error("Adresler yüklenirken hata:",y),n("Adresler yüklenirken bir hata oluştu")}finally{v(!1)}},g=y=>{const{name:I,value:S,type:w,checked:R}=y.target;h(B=>({...B,[I]:w==="checkbox"?R:S}))},b=async y=>{y.preventDefault(),n(""),k("");try{const I=x?`${Ae}/user/addresses/${x.id}`:`${Ae}/user/addresses`,w=await fetch(I,{method:x?"PUT":"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({...m})}),R=await w.json();w.ok&&(R.isSuccess||R.success)?(k(x?"Adres güncellendi":"Adres eklendi"),z(null),C(),j(),setTimeout(()=>k(""),3e3)):n(R.message||"İşlem başarısız")}catch(I){console.error("Adres kaydedilirken hata:",I),n("Adres kaydedilirken bir hata oluştu")}},o=y=>{z(y),h({fullName:y.fullName||"",phone:y.phone||"",addressLine:y.addressLine||"",addressDetail:y.addressDetail||"",city:y.city||"",district:y.district||"",isDefault:y.isDefault||!1})},N=async y=>{if(window.confirm("Bu adresi silmek istediğinize emin misiniz?"))try{n("");const I=await fetch(`${Ae}/user/addresses/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),S=await I.json();I.ok&&(S.isSuccess||S.success)?(k("Adres silindi"),j(),setTimeout(()=>k(""),3e3)):n(S.message||"Adres silinemedi")}catch(I){console.error("Adres silinirken hata:",I),n("Adres silinirken bir hata oluştu")}},p=async y=>{try{n("");const I=t.find(R=>R.id===y);if(!I)return;const S=await fetch(`${Ae}/user/addresses/${y}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({...I,isDefault:!0})}),w=await S.json();S.ok&&(w.isSuccess||w.success)?(k("Varsayılan adres güncellendi"),j(),setTimeout(()=>k(""),3e3)):n(w.message||"Varsayılan adres güncellenemedi")}catch(I){console.error("Varsayılan adres güncellenirken hata:",I),n("Varsayılan adres güncellenirken bir hata oluştu")}},C=()=>{h({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:"",isDefault:!1})},A=()=>{z(null),C()};return s?l?e.jsx("div",{className:"addresses-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Adresler yükleniyor..."})]})}):e.jsxs("div",{className:"addresses-container",children:[e.jsxs("div",{className:"addresses-header",children:[e.jsx("h1",{children:"Adreslerim"}),e.jsxs("div",{className:"header-actions",children:[t.length>0&&e.jsxs("span",{className:"address-count",children:[t.length," / 10 adres"]}),e.jsx(O,{to:"/adres-ekle",className:`btn-add-address ${t.length>=10?"disabled":""}`,onClick:y=>{if(t.length>=10){y.preventDefault(),n("Maksimum 10 adet adres ekleyebilirsiniz. Lütfen mevcut adreslerinizden birini silin.");return}},style:{textDecoration:"none",display:"inline-block"},children:"+ Yeni Adres Ekle"})]})]}),f&&e.jsx("div",{className:"alert alert-error",children:f}),i&&e.jsx("div",{className:"alert alert-success",children:i}),t.length===0?e.jsxs("div",{className:"no-addresses",children:[e.jsx("p",{children:"Henüz adres eklenmemiş."}),e.jsx(O,{to:"/adres-ekle",className:"btn-add-address",style:{textDecoration:"none",display:"inline-block"},children:"İlk Adresinizi Ekleyin"})]}):t.length>=10?e.jsx("div",{className:"max-addresses-warning",children:e.jsx("p",{children:"Maksimum adres sayısına ulaştınız (10 adet). Yeni adres eklemek için mevcut adreslerinizden birini silin."})}):e.jsx("div",{className:"addresses-list",children:t.map(y=>{const I=x&&x.id===y.id;return e.jsx("div",{className:`address-card ${y.isDefault?"default":""} ${I?"address-card-editing":""}`,children:e.jsxs("form",{onSubmit:I?b:S=>S.preventDefault(),className:I?"address-form-inline":"",children:[e.jsxs("div",{className:"address-card-header",children:[y.isDefault&&e.jsx("div",{className:"default-badge",children:"Varsayılan Adres"}),e.jsx("div",{className:"address-card-title",children:I?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"fullName",value:m.fullName,onChange:g,className:"address-input-inline",placeholder:"Ad Soyad",required:!0}),e.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:g,className:"address-input-inline address-input-phone",placeholder:"Telefon",required:!0})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:y.fullName}),e.jsx("p",{className:"address-phone",children:y.phone})]})})]}),e.jsxs("div",{className:"address-info",children:[e.jsxs("div",{className:"address-detail-row",children:[e.jsx("span",{className:"address-label",children:"Adres:"}),I?e.jsx("input",{type:"text",name:"addressLine",value:m.addressLine,onChange:g,className:"address-input-inline",required:!0}):e.jsx("span",{className:"address-value",children:y.addressLine})]}),e.jsxs("div",{className:"address-detail-row",children:[e.jsx("span",{className:"address-label",children:"Adres Detayı:"}),I?e.jsx("input",{type:"text",name:"addressDetail",value:m.addressDetail,onChange:g,className:"address-input-inline",placeholder:"Daire, Kat vb."}):e.jsx("span",{className:"address-value",children:y.addressDetail||"-"})]}),e.jsxs("div",{className:"address-detail-row",children:[e.jsx("span",{className:"address-label",children:"Şehir:"}),I?e.jsx("input",{type:"text",name:"city",value:m.city,onChange:g,className:"address-input-inline",required:!0,style:{width:"100%",padding:"0.5rem"}}):e.jsx("span",{className:"address-value",children:y.city})]}),e.jsxs("div",{className:"address-detail-row",children:[e.jsx("span",{className:"address-label",children:"İlçe:"}),I?e.jsx("input",{type:"text",name:"district",value:m.district,onChange:g,className:"address-input-inline",required:!0,style:{width:"100%",padding:"0.5rem"}}):e.jsx("span",{className:"address-value",children:y.district})]}),I&&e.jsxs("div",{className:"address-detail-row",children:[e.jsx("span",{className:"address-label"}),e.jsxs("label",{className:"checkbox-inline",children:[e.jsx("input",{type:"checkbox",name:"isDefault",checked:m.isDefault,onChange:g}),e.jsx("span",{children:"Varsayılan adres olarak ayarla"})]})]})]}),e.jsx("div",{className:"address-actions",children:I?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn-cancel",onClick:A,children:"İptal"}),e.jsx("button",{type:"submit",className:"btn-submit",children:"Güncelle"})]}):e.jsxs(e.Fragment,{children:[!y.isDefault&&e.jsx("button",{type:"button",className:"btn-set-default",onClick:()=>p(y.id),children:"Varsayılan Yap"}),e.jsx("button",{type:"button",className:"btn-edit",onClick:S=>{S.preventDefault(),S.stopPropagation(),o(y)},children:"Düzenle"}),e.jsx("button",{type:"button",className:"btn-delete",onClick:()=>N(y.id),children:"Sil"})]})})]})},y.id)})})]}):null},Ss="http://localhost:8080/api",ct=()=>{const{isAuthenticated:s,accessToken:a}=ie(),r=J(),t=De(),[c,l]=d.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:"",neighbourhood:"",isDefault:!1}),[v,f]=d.useState(!1),[n,i]=d.useState(""),[k,x]=d.useState(!1);d.useEffect(()=>{s||r("/giris",{state:{from:"/adres-ekle"}})},[s,r]);const z=async()=>{if(!navigator.geolocation){t.show({title:"Hata",message:"Tarayıcınız konum özelliğini desteklemiyor.",type:"error"});return}x(!0),i("");try{navigator.geolocation.getCurrentPosition(async j=>{const{latitude:g,longitude:b,accuracy:o}=j.coords;console.log(`Konum alındı - Enlem: ${g}, Boylam: ${b}, Hassasiyet: ±${o?Math.round(o):"bilinmiyor"} metre`),o&&o>100&&t.show({title:"Dikkat",message:`Konum hassasiyeti düşük (±${Math.round(o)}m). Daha doğru sonuç için açık alanda tekrar deneyin.`,type:"warning"});try{const N=await fetch(`${Ss}/geocoding/reverse?latitude=${g}&longitude=${b}`),p=await N.json();if(N.ok&&p.success&&p.data){const C=p.data;l(A=>{let y=C.city||A.city,I=C.district||A.district,S=C.neighbourhood||A.neighbourhood;if(C.displayName){const B=C.displayName.split(",").map(T=>T.trim());if(B.length>=3){if(B[2]&&(y=B[2]),!S&&B[0]){const T=B[0];(T.toLowerCase().includes("mahallesi")||T.toLowerCase().includes("mahalle"))&&(S=T)}if(!I&&B[1]){let T=B[1];y&&T.includes(y)&&(T=T.replace(y,"").trim(),(T===""||T.toLowerCase()==="merkez")&&(T="Merkez")),I=T}!S&&B[0]&&!B[0].toLowerCase().includes("merkez")&&!B[0].toLowerCase().includes("bölge")&&(S=B[0])}}if(y&&(y.toLowerCase().includes("merkez")&&(y=y.replace(/\s*merkez\s*/i,"").trim()),I&&y.includes(I)&&(y=y.replace(I,"").trim())),I&&y&&I.includes(y)){const B=I.replace(y,"").trim();B===""||B.toLowerCase()==="merkez"?I="Merkez":I=B}const w=[];C.road&&w.push(C.road),C.houseNumber&&w.push(`No: ${C.houseNumber}`);let R=A.addressLine;if(w.length>0)R=w.join(", ");else if(C.displayName){const B=C.displayName.split(",");B.length>1&&(R=B[0].trim())}return{...A,city:y,district:I,neighbourhood:S,addressLine:R}}),t.show({title:"Başarılı!",message:"Konumunuzdan adres bilgileri alındı. Lütfen kontrol edin ve gerekirse düzenleyin.",type:"success"})}else throw new Error(p.message||"Adres bilgisi alınamadı")}catch(N){console.error("Adres bilgisi alınırken hata:",N),t.show({title:"Hata",message:"Adres bilgisi alınırken bir hata oluştu. Lütfen manuel olarak girin.",type:"error"})}finally{x(!1)}},j=>{console.error("Konum alınırken hata:",j);let g="Konum alınamadı.";switch(j.code){case j.PERMISSION_DENIED:g="Konum izni reddedildi. Lütfen tarayıcı ayarlarından konum iznini açın.";break;case j.POSITION_UNAVAILABLE:g="Konum bilgisi alınamadı.";break;case j.TIMEOUT:g="Konum alınırken zaman aşımı oluştu.";break}t.show({title:"Hata",message:g,type:"error"}),x(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}catch(j){console.error("Konum servisi hatası:",j),t.show({title:"Hata",message:"Konum servisi kullanılamıyor.",type:"error"}),x(!1)}},m=j=>{const{name:g,value:b,type:o,checked:N}=j.target;l(p=>({...p,[g]:o==="checkbox"?N:b}))},h=async j=>{j.preventDefault(),i(""),f(!0);try{const g=await fetch(`${Ss}/user/addresses`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({...c})}),b=await g.json();g.ok&&(b.isSuccess||b.success)?(t.show({title:"Başarılı!",message:"Adres başarıyla eklendi.",type:"success"}),r("/adreslerim")):i(b.message||"Adres eklenemedi")}catch(g){console.error("Adres eklenirken hata:",g),i("Adres eklenirken bir hata oluştu")}finally{f(!1)}};return s?e.jsxs("div",{className:"add-address-page",children:[e.jsx(q,{title:"Yeni Adres Ekle - Hiedra Home Collection",description:"Yeni teslimat adresi ekleyin",url:"/adres-ekle"}),e.jsxs("div",{className:"add-address-container",children:[e.jsxs("div",{className:"add-address-header",children:[e.jsxs(O,{to:"/adreslerim",className:"back-link",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Adreslerime Dön"]}),e.jsx("h1",{children:"Yeni Adres Ekle"}),e.jsx("p",{className:"page-subtitle",children:"Teslimat için yeni bir adres ekleyin"}),e.jsxs("div",{className:"location-button-container",children:[e.jsx("button",{type:"button",onClick:z,disabled:k,className:"location-button-primary",children:k?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Konumunuz alınıyor..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Konumumdan Adres Bilgilerini Al"]})}),e.jsx("p",{className:"location-hint",children:"Konum izni vererek adres bilgilerinizi otomatik doldurabilirsiniz"})]})]}),n&&e.jsx("div",{className:"alert alert-error",children:n}),e.jsx("div",{className:"add-address-form-wrapper",children:e.jsxs("form",{onSubmit:h,className:"add-address-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"form-section-title",children:"Kişi Bilgileri"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fullName",children:"Ad Soyad *"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:c.fullName,onChange:m,required:!0,placeholder:"Adınız ve soyadınız"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Telefon *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:m,required:!0,placeholder:"05XX XXX XX XX"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"form-section-title",children:"Adres Bilgileri"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"addressLine",children:"Sokak / Cadde / Bina No *"}),e.jsx("input",{type:"text",id:"addressLine",name:"addressLine",value:c.addressLine,onChange:m,required:!0,placeholder:"Sokak, cadde ve bina numarası"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"addressDetail",children:"Adres Detayı"}),e.jsx("input",{type:"text",id:"addressDetail",name:"addressDetail",value:c.addressDetail,onChange:m,placeholder:"Daire, kat, blok vb. (opsiyonel)"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"city",children:"İl *"}),e.jsx("input",{type:"text",id:"city",name:"city",value:c.city,onChange:m,required:!0,placeholder:"İl adı"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"district",children:"İlçe *"}),e.jsx("input",{type:"text",id:"district",name:"district",value:c.district,onChange:m,required:!0,placeholder:"İlçe adı"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"neighbourhood",children:"Mahalle"}),e.jsx("input",{type:"text",id:"neighbourhood",name:"neighbourhood",value:c.neighbourhood,onChange:m,placeholder:"Mahalle adı (opsiyonel)"})]})})]}),e.jsx("div",{className:"form-section",children:e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"isDefault",checked:c.isDefault,onChange:m}),e.jsx("span",{children:"Varsayılan adres olarak ayarla"})]})})}),e.jsxs("div",{className:"form-actions",children:[e.jsx(O,{to:"/adreslerim",className:"btn-cancel",children:"İptal"}),e.jsx("button",{type:"submit",className:"btn-submit",disabled:v,children:v?"Kaydediliyor...":"Adresi Kaydet"})]})]})})]})]}):null},Cs="http://localhost:8080/api",dt=()=>{const{isAuthenticated:s,accessToken:a}=ie(),r=J(),[t,c]=d.useState([]),[l,v]=d.useState(!0),[f,n]=d.useState(""),[i,k]=d.useState("");d.useEffect(()=>{s||r("/giris",{state:{from:"/yorumlarim"}})},[s,r]),d.useEffect(()=>{s&&a&&x()},[s,a]);const x=async()=>{try{v(!0),n("");const j=await fetch(`${Cs}/reviews/my-reviews`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),g=await j.json();j.ok&&(g.isSuccess||g.success)?c(g.data||[]):n(g.message||"Yorumlar yüklenemedi")}catch(j){console.error("Yorumlar yüklenirken hata:",j),n("Yorumlar yüklenirken bir hata oluştu")}finally{v(!1)}},z=async j=>{if(window.confirm("Bu yorumu silmek istediğinize emin misiniz?"))try{n("");const g=await fetch(`${Cs}/reviews/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),b=await g.json();g.ok&&(b.isSuccess||b.success)?(k("Yorum silindi"),x(),setTimeout(()=>k(""),3e3)):n(b.message||"Yorum silinemedi")}catch(g){console.error("Yorum silinirken hata:",g),n("Yorum silinirken bir hata oluştu")}},m=j=>j?new Date(j).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"",h=j=>Array.from({length:5},(g,b)=>e.jsx("span",{className:b<j?"star filled":"star",children:"★"},b));return s?l?e.jsx("div",{className:"my-reviews-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Yorumlar yükleniyor..."})]})}):e.jsxs("div",{className:"my-reviews-container",children:[e.jsxs("div",{className:"my-reviews-header",children:[e.jsx("h1",{children:"Yorumlarım"}),t.length>0&&e.jsxs("span",{className:"review-count",children:[t.length," ",(t.length===1,"yorum")]})]}),f&&e.jsx("div",{className:"alert alert-error",children:f}),i&&e.jsx("div",{className:"alert alert-success",children:i}),t.length===0?e.jsxs("div",{className:"no-reviews",children:[e.jsx("p",{children:"Henüz yorum yapmamışsınız."}),e.jsx(O,{to:"/",className:"btn-browse-products",children:"Ürünlere Göz At"})]}):e.jsx("div",{className:"reviews-list",children:t.map(j=>{var g;return e.jsxs("div",{className:`review-card ${j.active?"":"inactive"}`,children:[!j.active&&e.jsx("div",{className:"inactive-badge",children:"Silinmiş"}),e.jsxs("div",{className:"review-header",children:[e.jsx("div",{className:"review-product",children:j.product&&e.jsxs(O,{to:`/product/${j.product.id}`,className:"product-link",children:[e.jsx("img",{src:j.product.coverImageUrl||j.product.image||"/images/perde1kapak.jpg",alt:j.product.name,className:"product-image"}),e.jsxs("div",{className:"product-info",children:[e.jsx("h3",{children:j.product.name}),e.jsx("p",{className:"product-category",children:((g=j.product.category)==null?void 0:g.name)||"Genel"})]})]})}),e.jsxs("div",{className:"review-rating",children:[e.jsx("div",{className:"stars",children:h(j.rating||0)}),e.jsxs("span",{className:"rating-value",children:[j.rating,"/5"]})]})]}),j.comment&&e.jsx("div",{className:"review-comment",children:e.jsx("p",{children:j.comment})}),j.imageUrls&&j.imageUrls.length>0&&e.jsx("div",{className:"review-images",children:j.imageUrls.map((b,o)=>e.jsx("img",{src:b,alt:`Yorum fotoğrafı ${o+1}`,className:"review-image",onClick:()=>window.open(b,"_blank")},o))}),e.jsxs("div",{className:"review-footer",children:[e.jsxs("span",{className:"review-date",children:[m(j.createdAt),j.updatedAt&&j.updatedAt!==j.createdAt&&e.jsx("span",{className:"updated-badge",children:" (Güncellendi)"})]}),j.active&&e.jsx("div",{className:"review-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>z(j.id),children:"Sil"})})]})]},j.id)})})]}):null},mt="http://localhost:8080/api",ht=()=>{const s=J(),[a,r]=d.useState([]),[t,c]=d.useState(!0),[l,v]=d.useState(""),[f,n]=d.useState(null),{accessToken:i}=ie();d.useEffect(()=>{k()},[i]);const k=async()=>{try{c(!0),v("");const h={"Content-Type":"application/json"};i&&(h.Authorization=`Bearer ${i}`);const j=await fetch(`${mt}/coupons`,{headers:h}),g=await j.json();j.ok&&(g.isSuccess||g.success)?r(g.data||[]):v(g.message||"Kuponlar yüklenemedi")}catch(h){console.error("Kuponlar yüklenirken hata:",h),v("Kuponlar yüklenirken bir hata oluştu")}finally{c(!1)}},x=h=>h.type==="YUZDE"?`%${h.discountValue}`:h.type==="SABIT_TUTAR"?`${h.discountValue} ₺`:`${h.discountValue}`,z=h=>{if(!h)return null;const b=new Date(h)-new Date,o=Math.ceil(b/(1e3*60*60*24));return o>0?o:0},m={"@context":"https://schema.org","@type":"WebPage",name:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",url:typeof window<"u"?window.location.href:"https://hiedra.com/kuponlar"};return t?e.jsxs("div",{className:"coupons-container",children:[e.jsx(q,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın.",url:"/kuponlar"}),e.jsx(Se,{size:"large",text:"Kuponlar yükleniyor...",variant:"page"})]}):e.jsxs("div",{className:"coupons-container",children:[e.jsx(q,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",keywords:"kupon, indirim kuponu, kupon kodu, perde indirimi, kampanya, özel fırsat",url:"/kuponlar",structuredData:m}),l&&e.jsxs("div",{className:"error-message",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("span",{children:l})]}),!l&&a.length===0&&e.jsxs("div",{className:"no-coupons",children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("h2",{children:"Şu anda geçerli kupon bulunmuyor"}),e.jsx("p",{children:"Yeni kampanyalar ve özel fırsatlar için bizi takip edin!"}),e.jsx("button",{className:"back-to-shop-btn",onClick:()=>s("/"),children:"Alışverişe Dön"})]}),!l&&a.length>0&&e.jsx("div",{className:"coupons-grid",children:a.map(h=>{const j=z(h.validUntil),g=j!==null&&j<=7&&j>0,b=h.isPersonal===!0;return e.jsxs("div",{className:`coupon-card-simple ${b?"personal-coupon":""}`,onClick:()=>s(`/kupon/${h.id}`),children:[h.coverImageUrl?e.jsxs("div",{className:"coupon-cover-image-simple",children:[e.jsx(re,{src:h.coverImageUrl,alt:h.name}),b&&e.jsxs("div",{className:"personal-badge-simple",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:"Size Özel"})]}),g&&e.jsxs("div",{className:"expiring-badge-simple",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:"Yakında bitiyor"})]}),e.jsx("div",{className:"coupon-overlay",children:e.jsxs("div",{className:"coupon-discount-overlay",children:[e.jsx("span",{className:"discount-value-overlay",children:x(h)}),e.jsx("span",{className:"discount-label-overlay",children:"İndirim"})]})})]}):e.jsxs("div",{className:"coupon-header-simple",children:[e.jsxs("div",{className:"coupon-discount-badge-simple",children:[e.jsx("span",{className:"discount-value-simple",children:x(h)}),e.jsx("span",{className:"discount-label-simple",children:"İndirim"})]}),b&&e.jsxs("div",{className:"personal-badge-header-simple",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:"Size Özel"})]}),g&&e.jsxs("div",{className:"expiring-badge-header-simple",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:"Yakında bitiyor"})]})]}),e.jsx("div",{className:"coupon-body-simple",children:e.jsx("h3",{className:"coupon-name-simple",children:h.name})})]},h.id)})})]})},ut="http://localhost:8080/api",pt=()=>{const{id:s}=we(),a=J(),[r,t]=d.useState(null),[c,l]=d.useState(!0),[v,f]=d.useState(""),[n,i]=d.useState(!1),{accessToken:k}=ie();d.useEffect(()=>{x()},[s,k]);const x=async()=>{try{l(!0),f("");const y={"Content-Type":"application/json"};k&&(y.Authorization=`Bearer ${k}`);const I=await fetch(`${ut}/coupons`,{headers:y}),S=await I.json();if(I.ok&&(S.isSuccess||S.success)){const w=(S.data||[]).find(R=>R.id===parseInt(s));w?t(w):f("Kupon bulunamadı")}else f(S.message||"Kupon yüklenemedi")}catch(y){console.error("Kupon yüklenirken hata:",y),f("Kupon yüklenirken bir hata oluştu")}finally{l(!1)}},z=y=>{navigator.clipboard.writeText(y).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)})},m=y=>y?new Date(y).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"",h=y=>y.type==="YUZDE"?`%${y.discountValue}`:y.type==="SABIT_TUTAR"?`${y.discountValue} ₺`:`${y.discountValue}`,j=y=>{if(!y)return null;const w=new Date(y)-new Date,R=Math.ceil(w/(1e3*60*60*24));return R>0?R:0};if(c)return e.jsxs("div",{className:"coupon-detail-container",children:[e.jsx(q,{title:"Kupon Detayı | Hiedra Perde",description:"Kupon detaylarını görüntüleyin.",url:`/kupon/${s}`}),e.jsx(Se,{size:"large",text:"Kupon yükleniyor...",variant:"page"})]});if(v||!r)return e.jsxs("div",{className:"coupon-detail-container",children:[e.jsx(q,{title:"Kupon Bulunamadı | Hiedra Perde",description:"Kupon bulunamadı.",url:`/kupon/${s}`}),e.jsxs("div",{className:"error-state",children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("h2",{children:v||"Kupon bulunamadı"}),e.jsx("button",{className:"back-btn",onClick:()=>a("/kuponlar"),children:"Kuponlara Dön"})]})]});const g=j(r.validUntil),b=g!==null&&g<=7&&g>0,o=r.isPersonal===!0,N=r.maxUsageCount>0?r.maxUsageCount-r.currentUsageCount:null,p=r.maxUsageCount>0,C=N!==null&&N>0&&N<=10,A=r.maxUsageCount>0?Math.round(r.currentUsageCount/r.maxUsageCount*100):0;return e.jsxs("div",{className:"coupon-detail-container",children:[e.jsx(q,{title:`${r.name} - Kupon Detayı | Hiedra Perde`,description:r.description||`Özel indirim kuponu: ${r.name}`,url:`/kupon/${s}`}),e.jsxs("button",{className:"back-to-coupons-btn",onClick:()=>a("/kuponlar"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Kuponlara Dön"]}),e.jsxs("div",{className:"coupon-detail-card",children:[r.coverImageUrl&&e.jsxs("div",{className:"coupon-detail-cover",children:[e.jsx(re,{src:r.coverImageUrl,alt:r.name}),o&&e.jsxs("div",{className:"personal-badge-detail",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:"Size Özel"})]})]}),e.jsxs("div",{className:"coupon-detail-header",children:[e.jsxs("div",{className:"coupon-detail-discount",children:[e.jsx("span",{className:"discount-value-large",children:h(r)}),e.jsx("span",{className:"discount-label-large",children:"İndirim"})]}),e.jsxs("div",{className:"coupon-detail-badges",children:[b&&e.jsxs("div",{className:"expiring-badge-detail",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsxs("span",{children:["Yakında bitiyor (",g," gün kaldı)"]})]}),p&&e.jsxs("div",{className:"limited-usage-badge-detail",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:"Sınırlı Kullanım"})]})]})]}),e.jsxs("div",{className:"coupon-detail-body",children:[e.jsx("h1",{className:"coupon-detail-name",children:r.name}),r.description&&e.jsx("p",{className:"coupon-detail-description",children:r.description}),e.jsxs("div",{className:"coupon-detail-code-section",children:[e.jsx("label",{className:"coupon-code-label-detail",children:"Kupon Kodu"}),e.jsxs("div",{className:"coupon-code-detail",children:[e.jsx("span",{className:"code-text-detail",children:r.code}),e.jsx("button",{className:"copy-btn-detail",onClick:()=>z(r.code),title:"Kopyala",children:n?e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),n&&e.jsx("div",{className:"copy-success-detail",children:"Kupon kodu kopyalandı!"})]}),e.jsxs("div",{className:"coupon-detail-info",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{className:"detail-section-title",children:"Geçerlilik Tarihleri"}),e.jsxs("div",{className:"detail-item-detail",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsxs("div",{className:"detail-content-detail",children:[e.jsx("span",{className:"detail-label-detail",children:"Başlangıç:"}),e.jsx("span",{className:"detail-value-detail",children:m(r.validFrom)})]})]}),e.jsxs("div",{className:"detail-item-detail",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsxs("div",{className:"detail-content-detail",children:[e.jsx("span",{className:"detail-label-detail",children:"Bitiş:"}),e.jsx("span",{className:"detail-value-detail",children:m(r.validUntil)}),g!==null&&g>0&&e.jsxs("span",{className:"remaining-days-detail",children:["(",g," gün kaldı)"]})]})]})]}),r.minimumPurchaseAmount&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{className:"detail-section-title",children:"Kullanım Koşulları"}),e.jsxs("div",{className:"detail-item-detail",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),e.jsxs("div",{className:"detail-content-detail",children:[e.jsx("span",{className:"detail-label-detail",children:"Minimum Alışveriş Tutarı:"}),e.jsxs("span",{className:"detail-value-detail",children:[parseFloat(r.minimumPurchaseAmount).toFixed(2)," ₺"]})]})]})]}),p&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{className:"detail-section-title",children:"Kullanım Bilgileri"}),e.jsxs("div",{className:"detail-item-detail",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),e.jsxs("div",{className:"detail-content-detail",children:[e.jsx("span",{className:"detail-label-detail",children:"Kalan Kullanım:"}),e.jsx("span",{className:`detail-value-detail ${C?"low-stock":""}`,children:N!==null&&N>0?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:N})," kullanım hakkı kaldı",C&&e.jsx("span",{className:"low-stock-badge-detail",children:"Az kaldı!"})]}):e.jsx("span",{className:"out-of-stock-detail",children:"Kullanım hakkı kalmadı"})}),e.jsxs("div",{className:"usage-info-detail",children:[e.jsxs("span",{className:"usage-text-detail",children:[r.currentUsageCount," / ",r.maxUsageCount," kullanıldı"]}),e.jsx("div",{className:"usage-bar-detail",children:e.jsx("div",{className:`usage-bar-fill-detail ${C?"low-stock-bar":""}`,style:{width:`${A}%`}})})]})]})]})]})]}),e.jsx("div",{className:"coupon-detail-actions",children:e.jsxs("button",{className:"use-coupon-btn-detail",onClick:()=>a("/cart"),children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),e.jsx("circle",{cx:"7",cy:"20",r:"2"}),e.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),"Sepete Git ve Kullan"]})})]})]})]})},xt=()=>{const s=new Date().getFullYear();return e.jsx("footer",{className:"footer",role:"contentinfo",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section footer-about",children:[e.jsxs(O,{to:"/",className:"footer-logo",children:[e.jsx("img",{src:"/logo.png",alt:"Hiedra Home Collection",className:"footer-logo-img"}),e.jsx("div",{className:"footer-logo-text",children:e.jsx("h2",{children:"HIEDRA HOME COLLECTION"})})]}),e.jsx("p",{className:"footer-description",children:"Modern ve şık perde koleksiyonları ile evinize değer katın. Kaliteli ürünler, uygun fiyatlar ve müşteri memnuniyeti odaklı hizmet."})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{className:"footer-title",children:"Hızlı Linkler"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx(O,{to:"/",children:"Ana Sayfa"})}),e.jsx("li",{children:e.jsx(O,{to:"/hakkimizda",children:"Hakkımızda"})}),e.jsx("li",{children:e.jsx(O,{to:"/iletisim",children:"İletişim"})}),e.jsx("li",{children:e.jsx(O,{to:"/sss",children:"SSS"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{className:"footer-title",children:"Müşteri Hizmetleri"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx(O,{to:"/siparis-sorgula",children:"Sipariş Sorgula"})}),e.jsx("li",{children:e.jsx(O,{to:"/giris",children:"Giriş Yap"})}),e.jsx("li",{children:e.jsx(O,{to:"/kargo-teslimat",children:"Kargo ve Teslimat"})}),e.jsx("li",{children:e.jsx(O,{to:"/iade-degisim",children:"İade ve Değişim"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{className:"footer-title",children:"Yasal Bilgiler"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx(O,{to:"/gizlilik-politikasi",children:"Gizlilik Politikası"})}),e.jsx("li",{children:e.jsx(O,{to:"/kullanim-kosullari",children:"Kullanım Koşulları"})}),e.jsx("li",{children:e.jsx(O,{to:"/kvkk",children:"KVKK"})}),e.jsx("li",{children:e.jsx(O,{to:"/mesafeli-satis-sozlesmesi",children:"Mesafeli Satış Sözleşmesi"})}),e.jsx("li",{children:e.jsx(O,{to:"/cerez-politikasi",children:"Çerez Politikası"})}),e.jsx("li",{children:e.jsx(O,{to:"/sozlesmeler",children:"Tüm Sözleşmeler"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{className:"footer-title",children:"İletişim"}),e.jsxs("ul",{className:"footer-contact",children:[e.jsxs("li",{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{children:"Adres Bilgileri"})]}),e.jsxs("li",{children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),e.jsx("span",{children:"Telefon: +90 (XXX) XXX XX XX"})]}),e.jsxs("li",{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),e.jsx("span",{children:"E-posta: info@hiedra.com"})]})]})]})]}),e.jsxs("div",{className:"footer-middle",children:[e.jsxs("div",{className:"footer-social",children:[e.jsx("h4",{className:"footer-middle-title",children:"Bizi Takip Edin"}),e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon social-icon-facebook","aria-label":"Facebook",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),e.jsx("a",{href:"https://www.instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon social-icon-instagram","aria-label":"Instagram",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),e.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),e.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),e.jsx("a",{href:"https://www.twitter.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon social-icon-twitter","aria-label":"Twitter",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})}),e.jsx("a",{href:"https://www.youtube.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon social-icon-youtube","aria-label":"YouTube",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),e.jsx("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})]})})]})]}),e.jsxs("div",{className:"footer-payment",children:[e.jsx("h4",{className:"footer-middle-title",children:"Güvenli Ödeme"}),e.jsxs("div",{className:"payment-logos",children:[e.jsx("div",{className:"payment-logo-wrapper",children:e.jsx("img",{src:"/images/visa.png",alt:"Visa",className:"payment-logo"})}),e.jsx("div",{className:"payment-logo-wrapper",children:e.jsx("img",{src:"/images/master.png",alt:"Mastercard",className:"payment-logo"})}),e.jsx("div",{className:"payment-logo-wrapper",children:e.jsx("img",{src:"/images/troy.png",alt:"Troy",className:"payment-logo"})})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsxs("p",{className:"footer-copyright",children:["© ",s," HIEDRA HOME COLLECTION. Tüm hakları saklıdır."]})})]})})},Ve="http://localhost:8080/api",ve=({contractType:s,seoTitle:a,seoDescription:r,seoUrl:t})=>{const c=J(),{accessToken:l,isAuthenticated:v}=ie(),f=De(),[n,i]=d.useState(null),[k,x]=d.useState(!0),[z,m]=d.useState(""),[h,j]=d.useState(!1),[g,b]=d.useState(!1);d.useEffect(()=>{s&&(async()=>{try{x(!0),m("");const C=await fetch(`${Ve}/contracts/type/${s}`,{headers:{"Content-Type":"application/json",...v&&l&&{Authorization:`Bearer ${l}`}}});if(!C.ok){C.status===404?m("Sözleşme bulunamadı"):m("Sözleşme yüklenirken bir hata oluştu"),x(!1);return}const A=await C.json();A.isSuccess||A.success?(i(A.data),v&&A.data&&o(A.data.id)):m(A.message||"Sözleşme yüklenemedi")}catch(C){console.error("Sözleşme yüklenirken hata:",C),m("Sözleşme yüklenirken bir hata oluştu")}finally{x(!1)}})()},[s,l,v]);const o=async p=>{var C;if(!v||!l){j(!1);return}try{const A=await fetch(`${Ve}/contracts/${p}/status`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(A.ok){const y=await A.json();(y.isSuccess||y.success)&&j(((C=y.data)==null?void 0:C.accepted)||!1)}}catch(A){console.error("Onay durumu kontrol edilirken hata:",A)}},N=async()=>{if(!(!v||!n||!l)){b(!0),m("");try{const p=await fetch(`${Ve}/contracts/${n.id}/accept`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!p.ok){const A=await p.json().catch(()=>({}));throw new Error(A.message||"Sözleşme onaylanamadı")}const C=await p.json();if(C.isSuccess||C.success)j(!0),f.success("Sözleşme başarıyla onaylandı!");else{const A=C.message||"Sözleşme onaylanamadı";m(A),f.error(A)}}catch(p){console.error("Sözleşme onaylama hatası:",p);const C=p.message||"Sözleşme onaylanırken bir hata oluştu";m(C),f.error(C)}finally{b(!1)}}};return k?e.jsxs("div",{className:"legal-page",children:[e.jsx(q,{title:a,description:r,url:t}),e.jsx("div",{className:"legal-container",children:e.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:e.jsx("p",{children:"Yükleniyor..."})})})]}):z&&!n?e.jsxs("div",{className:"legal-page",children:[e.jsx(q,{title:a,description:r,url:t}),e.jsx("div",{className:"legal-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h1",{children:"Hata"}),e.jsx("p",{children:z}),e.jsx("button",{onClick:()=>c("/"),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Ana Sayfaya Dön"})]})})]}):n?e.jsxs(e.Fragment,{children:[e.jsx(q,{title:a,description:r,url:t}),e.jsx("div",{className:"legal-page",children:e.jsxs("div",{className:"legal-container",children:[e.jsxs("div",{className:"legal-header",children:[e.jsx("h1",{children:n.title}),e.jsxs("p",{className:"legal-version",children:["Versiyon: ",n.version]}),e.jsxs("p",{className:"legal-date",children:["Son Güncelleme: ",new Date(n.updatedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("div",{className:"legal-content",dangerouslySetInnerHTML:{__html:n.content}}),e.jsxs("div",{className:"legal-actions",children:[v&&h?e.jsxs("p",{className:"legal-accepted",children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{verticalAlign:"middle",marginRight:"0.5rem"},children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Bu sözleşmeyi ",new Date(n.updatedAt).toLocaleDateString("tr-TR")," tarihinde onayladınız."]}):v&&e.jsx("button",{onClick:N,className:"btn btn-primary",disabled:g,children:g?"Onaylanıyor...":"Sözleşmeyi Oku ve Onayla"}),!v&&e.jsx("p",{style:{marginTop:"1rem",color:"var(--text-secondary)"},children:"Sözleşmeyi onaylamak için giriş yapmalısınız."})]}),e.jsx("div",{className:"legal-footer",children:e.jsx("button",{onClick:()=>c(-1),className:"btn btn-secondary",children:"Geri Dön"})})]})})]}):e.jsxs("div",{className:"legal-page",children:[e.jsx(q,{title:a,description:r,url:t}),e.jsx("div",{className:"legal-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h1",{children:"Sözleşme Bulunamadı"}),e.jsx("p",{children:"Aradığınız sözleşme mevcut değil veya aktif değil."}),e.jsx("button",{onClick:()=>c("/"),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Ana Sayfaya Dön"})]})})]})},gt=()=>e.jsx(ve,{contractType:"GIZLILIK",seoTitle:"Gizlilik Politikası - HIEDRA HOME COLLECTION",seoDescription:"HIEDRA HOME COLLECTION gizlilik politikası ve kişisel verilerin korunması hakkında bilgiler",seoUrl:"/gizlilik-politikasi"}),jt=()=>e.jsx(ve,{contractType:"KULLANIM",seoTitle:"Kullanım Koşulları - HIEDRA HOME COLLECTION",seoDescription:"HIEDRA HOME COLLECTION web sitesi kullanım koşulları ve şartları",seoUrl:"/kullanim-kosullari"}),ft=()=>e.jsx(ve,{contractType:"KVKK",seoTitle:"Kişisel Verilerin Korunması (KVKK) - HIEDRA HOME COLLECTION",seoDescription:"KVKK kapsamında kişisel verilerin korunması ve işlenmesi hakkında bilgilendirme",seoUrl:"/kvkk"}),yt=()=>e.jsx(ve,{contractType:"SATIS",seoTitle:"Mesafeli Satış Sözleşmesi - HIEDRA HOME COLLECTION",seoDescription:"6502 sayılı Tüketicinin Korunması Hakkında Kanun kapsamında mesafeli satış sözleşmesi",seoUrl:"/mesafeli-satis-sozlesmesi"}),vt=()=>e.jsx(ve,{contractType:"IADE",seoTitle:"İade ve Değişim Koşulları - HIEDRA HOME COLLECTION",seoDescription:"Ürün iade ve değişim koşulları, süreçleri ve şartları",seoUrl:"/iade-degisim"}),kt=()=>e.jsx(ve,{contractType:"KARGO",seoTitle:"Kargo ve Teslimat Bilgileri - HIEDRA HOME COLLECTION",seoDescription:"Kargo ücretleri, teslimat süreleri ve kargo firmaları hakkında bilgiler",seoUrl:"/kargo-teslimat"}),zs="http://localhost:8080/api",Nt=()=>{const[s]=is();J();const[a,r]=d.useState(s.get("trackingNumber")||""),[t,c]=d.useState(s.get("orderNumber")||""),[l,v]=d.useState(""),[f,n]=d.useState(null),[i,k]=d.useState(!1),[x,z]=d.useState("");d.useEffect(()=>{a&&t&&l?h():a&&m()},[]);const m=async()=>{if(!a.trim()){z("Lütfen takip numarası giriniz");return}try{k(!0),z("");const o=new URL(`${zs}/shipping/track`);o.searchParams.append("trackingNumber",a),t&&o.searchParams.append("orderNumber",t);const p=await(await fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json"}})).json();p.isSuccess||p.success?n(p.data):(z(p.message||"Kargo takip bilgisi alınamadı"),n(null))}catch(o){console.error("Kargo takip hatası:",o),z("Kargo takip bilgisi alınırken bir hata oluştu"),n(null)}finally{k(!1)}},h=async()=>{if(!t.trim()||!l.trim()){z("Lütfen sipariş numarası ve e-posta adresinizi giriniz");return}try{k(!0),z("");const o=new URL(`${zs}/shipping/track-by-order`);o.searchParams.append("orderNumber",t),o.searchParams.append("email",l);const p=await(await fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json"}})).json();p.isSuccess||p.success?(n(p.data),p.data.trackingNumber&&r(p.data.trackingNumber)):(z(p.message||"Kargo takip bilgisi alınamadı"),n(null))}catch(o){console.error("Kargo takip hatası:",o),z("Kargo takip bilgisi alınırken bir hata oluştu"),n(null)}finally{k(!1)}},j=o=>o?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo Alındı",OUT_FOR_DELIVERY:"Teslimat İçin Yola Çıktı"}[o]||o:"Bilinmiyor",g=o=>{if(!o)return"tracking-status-unknown";const N=o.toUpperCase();return N==="DELIVERED"?"tracking-status-delivered":N==="IN_TRANSIT"||N==="OUT_FOR_DELIVERY"?"tracking-status-transit":N==="EXCEPTION"?"tracking-status-exception":"tracking-status-pending"},b=o=>{if(!o)return"";try{return new Date(o).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return o}};return e.jsxs("div",{className:"track-shipment-page",children:[e.jsx(q,{title:"Kargo Takip - HIEDRA HOME COLLECTION",description:"Siparişinizin kargo durumunu takip edin",url:"/kargo-takip"}),e.jsxs("div",{className:"track-shipment-container",children:[e.jsx("h1",{children:"Kargo Takip"}),e.jsxs("div",{className:"track-shipment-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Takip Numarası ile Sorgula"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Kargo Takip Numarası"}),e.jsx("input",{type:"text",value:a,onChange:o=>r(o.target.value),placeholder:"Örn: 1234567890"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sipariş Numarası (Opsiyonel)"}),e.jsx("input",{type:"text",value:t,onChange:o=>c(o.target.value),placeholder:"Örn: ORD-20251109-1234"})]}),e.jsx("button",{onClick:m,disabled:i,className:"btn-track",children:i?"Sorgulanıyor...":"Sorgula"})]}),e.jsx("div",{className:"form-divider",children:"veya"}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Sipariş Numarası ile Sorgula"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sipariş Numarası"}),e.jsx("input",{type:"text",value:t,onChange:o=>c(o.target.value),placeholder:"Örn: ORD-20251109-1234"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"E-posta Adresiniz"}),e.jsx("input",{type:"email",value:l,onChange:o=>v(o.target.value),placeholder:"sipariş@example.com"})]}),e.jsx("button",{onClick:h,disabled:i,className:"btn-track",children:i?"Sorgulanıyor...":"Sorgula"})]})]}),x&&e.jsx("div",{className:"tracking-error",children:e.jsx("p",{children:x})}),f&&e.jsxs("div",{className:"tracking-results",children:[e.jsxs("div",{className:"tracking-header",children:[e.jsx("h2",{children:"Kargo Takip Bilgileri"}),e.jsxs("div",{className:"tracking-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Takip Numarası:"})," ",f.trackingNumber]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Kargo Firması:"})," ",f.carrier||"DHL"]}),f.orderNumber&&e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Sipariş Numarası:"})," ",f.orderNumber]})]})]}),e.jsxs("div",{className:"tracking-status",children:[e.jsx("div",{className:`status-badge ${g(f.status)}`,children:j(f.status)}),f.statusDescription&&e.jsx("p",{className:"status-description",children:f.statusDescription})]}),f.events&&f.events.length>0&&e.jsxs("div",{className:"tracking-events",children:[e.jsx("h3",{children:"Kargo Hareketleri"}),e.jsx("div",{className:"events-timeline",children:f.events.map((o,N)=>e.jsxs("div",{className:"event-item",children:[e.jsx("div",{className:"event-time",children:b(o.timestamp)}),e.jsxs("div",{className:"event-content",children:[e.jsxs("div",{className:"event-location",children:[o.location&&e.jsx("span",{className:"location-icon",children:"📍"}),o.location||"Konum bilgisi yok"]}),e.jsx("div",{className:"event-description",children:o.description||"Açıklama yok"})]})]},N))})]})]})]})]})},bt=()=>e.jsx(ve,{contractType:"CEREZ",seoTitle:"Çerez Politikası - HIEDRA HOME COLLECTION",seoDescription:"Web sitemizde kullanılan çerezler ve çerez tercihleri hakkında bilgilendirme",seoUrl:"/cerez-politikasi"}),Ye="http://localhost:8080/api",wt=()=>{const{id:s}=we(),a=J(),r=De(),[t,c]=d.useState(null),[l,v]=d.useState(!0),[f,n]=d.useState(""),[i,k]=d.useState(!1),[x,z]=d.useState(!1);d.useEffect(()=>{s&&(async()=>{try{v(!0),n("");const g=await fetch(`${Ye}/contracts/${s}`);if(!g.ok){g.status===404?n("Sözleşme bulunamadı"):n("Sözleşme yüklenirken bir hata oluştu"),v(!1);return}const b=await g.json();b.isSuccess||b.success?(c(b.data),m(b.data.id)):n(b.message||"Sözleşme yüklenemedi")}catch(g){console.error("Sözleşme yüklenirken hata:",g),n("Sözleşme yüklenirken bir hata oluştu")}finally{v(!1)}})()},[s]);const m=async j=>{var g;try{const b=localStorage.getItem("guestUserId"),o=localStorage.getItem("accessToken"),N={"Content-Type":"application/json"};o&&(N.Authorization=`Bearer ${o}`);const p=`${Ye}/contracts/${j}/status${b?`?guestUserId=${encodeURIComponent(b)}`:""}`,C=await fetch(p,{headers:N});if(C.ok){const A=await C.json();(A.isSuccess||A.success)&&z(((g=A.data)==null?void 0:g.accepted)||!1)}}catch(b){console.error("Onay durumu kontrol edilirken hata:",b)}},h=async()=>{try{k(!0);const j=localStorage.getItem("guestUserId"),g=localStorage.getItem("accessToken"),b={"Content-Type":"application/json"};g&&(b.Authorization=`Bearer ${g}`);const o=`${Ye}/contracts/${s}/accept${j?`?guestUserId=${encodeURIComponent(j)}`:""}`,N=await fetch(o,{method:"POST",headers:b});if(N.ok){const p=await N.json();if(p.isSuccess||p.success)z(!0),r.success("Sözleşme başarıyla onaylandı!");else{const C=p.message||"Sözleşme onaylanamadı";r.error(C)}}else{const C=(await N.json().catch(()=>({}))).message||"Sözleşme onaylanamadı";r.error(C)}}catch(j){console.error("Sözleşme onaylanırken hata:",j),r.error("Sözleşme onaylanırken bir hata oluştu")}finally{k(!1)}};return l?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:e.jsx("p",{children:"Yükleniyor..."})})})}):f||!t?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h1",{children:"Hata"}),e.jsx("p",{children:f||"Sözleşme bulunamadı"}),e.jsx("button",{onClick:()=>a("/"),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Ana Sayfaya Dön"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:`${t.title} - Hiedra Home`,description:t.content.substring(0,160)}),e.jsx("div",{className:"legal-page",children:e.jsxs("div",{className:"legal-container",children:[e.jsxs("div",{className:"legal-header",children:[e.jsx("h1",{children:t.title}),t.version&&e.jsxs("p",{className:"legal-version",children:["Versiyon: ",t.version]}),t.updatedAt&&e.jsxs("p",{className:"legal-date",children:["Son Güncelleme: ",new Date(t.updatedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"legal-content",dangerouslySetInnerHTML:{__html:t.content}}),t.requiredApproval&&e.jsx("div",{className:"legal-actions",children:x?e.jsx("div",{className:"legal-accepted",children:e.jsx("p",{style:{color:"var(--success)",fontWeight:"bold"},children:"✓ Bu sözleşmeyi onayladınız"})}):e.jsx("button",{onClick:h,disabled:i,className:"btn btn-primary",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:i?"Onaylanıyor...":"Sözleşmeyi Onayla"})}),e.jsx("div",{className:"legal-footer",children:e.jsx("button",{onClick:()=>a(-1),className:"btn btn-secondary",children:"Geri Dön"})})]})})]})},St="http://localhost:8080/api",Ct=()=>{const s=J(),[a,r]=d.useState([]),[t,c]=d.useState(!0),[l,v]=d.useState("");return d.useEffect(()=>{(async()=>{try{c(!0),v("");const n=await fetch(`${St}/contracts`);if(!n.ok){v("Sözleşmeler yüklenirken bir hata oluştu"),c(!1);return}const i=await n.json();i.isSuccess||i.success?r(i.data||[]):v(i.message||"Sözleşmeler yüklenemedi")}catch(n){console.error("Sözleşmeler yüklenirken hata:",n),v("Sözleşmeler yüklenirken bir hata oluştu")}finally{c(!1)}})()},[]),t?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:e.jsx("p",{children:"Yükleniyor..."})})})}):l?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h1",{children:"Hata"}),e.jsx("p",{children:l}),e.jsx("button",{onClick:()=>s("/"),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Ana Sayfaya Dön"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Sözleşmeler - Hiedra Home",description:"Tüm sözleşmeleri görüntüleyin ve onaylayın"}),e.jsx("div",{className:"legal-page",children:e.jsxs("div",{className:"legal-container",children:[e.jsxs("div",{className:"legal-header",children:[e.jsx("h1",{children:"Sözleşmeler"}),e.jsx("p",{children:"Lütfen aşağıdaki sözleşmeleri okuyun ve onaylayın"})]}),a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("p",{children:"Henüz sözleşme bulunmamaktadır."})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:a.map(f=>e.jsxs("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>s(`/sozlesme/${f.id}`),onMouseEnter:n=>{n.currentTarget.style.borderColor="var(--primary)",n.currentTarget.style.boxShadow="0 2px 8px var(--shadow)"},onMouseLeave:n=>{n.currentTarget.style.borderColor="var(--border-color)",n.currentTarget.style.boxShadow="none"},children:[e.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:"var(--text-primary)"},children:f.title}),f.type&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Tür: ",f.type]}),f.version&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Versiyon: ",f.version]}),f.updatedAt&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Son Güncelleme: ",new Date(f.updatedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),e.jsx("div",{style:{marginTop:"1rem"},children:e.jsx("button",{className:"btn btn-primary",onClick:n=>{n.stopPropagation(),s(`/sozlesme/${f.id}`)},children:"Sözleşmeyi Görüntüle"})})]},f.id))}),e.jsx("div",{className:"legal-footer",children:e.jsx("button",{onClick:()=>s("/"),className:"btn btn-secondary",children:"Ana Sayfaya Dön"})})]})})]})},Je="http://localhost:8080/api",zt=()=>{const s=J(),{accessToken:a,isAuthenticated:r}=ie(),t=De(),[c,l]=d.useState([]),[v,f]=d.useState([]),[n,i]=d.useState(!0),[k,x]=d.useState("");d.useEffect(()=>{if(!r){s("/giris");return}(async()=>{try{i(!0),x("");const[g,b]=await Promise.all([fetch(`${Je}/contracts`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),fetch(`${Je}/contracts/my-history`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})]);if(!g.ok||!b.ok){x("Sözleşmeler yüklenirken bir hata oluştu"),i(!1);return}const o=await g.json(),N=await b.json();(o.isSuccess||o.success)&&l(o.data||[]),(N.isSuccess||N.success)&&f(N.data||[])}catch(g){console.error("Sözleşmeler yüklenirken hata:",g),x("Sözleşmeler yüklenirken bir hata oluştu")}finally{i(!1)}})()},[a,r,s]);const z=(j,g)=>{const b=v.find(o=>{var N;return((N=o.contract)==null?void 0:N.id)===j&&o.acceptedVersion===g});return b?{status:b.status==="ACCEPTED"?"accepted":"rejected",acceptance:b}:{status:"pending",acceptance:null}},m=j=>["KULLANIM","GIZLILIK","KVKK","SATIS"].includes(j),h=async(j,g)=>{if(window.confirm(`"${g}" sözleşmesini feshetmek istediğinize emin misiniz?`))try{const b=await fetch(`${Je}/contracts/${j}/reject`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){const p=(await b.json().catch(()=>({}))).message||"Sözleşme feshedilemedi";t.error(p);return}const o=await b.json();if(o.isSuccess||o.success)t.success("Sözleşme başarıyla feshedildi"),setTimeout(()=>{window.location.reload()},1e3);else{const N=o.message||"Sözleşme feshedilemedi";t.error(N)}}catch(b){console.error("Sözleşme feshedilirken hata:",b),t.error("Sözleşme feshedilirken bir hata oluştu")}};return n?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:e.jsx("p",{children:"Yükleniyor..."})})})}):k?e.jsx("div",{className:"legal-page",children:e.jsx("div",{className:"legal-container",children:e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h1",{children:"Hata"}),e.jsx("p",{children:k}),e.jsx("button",{onClick:()=>s("/"),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Ana Sayfaya Dön"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Onayladığım Sözleşmeler - Hiedra Home",description:"Onayladığınız sözleşmeleri görüntüleyin"}),e.jsx("div",{className:"legal-page",children:e.jsxs("div",{className:"legal-container",children:[e.jsxs("div",{className:"legal-header",children:[e.jsx("h1",{children:"Onayladığım Sözleşmeler"}),e.jsx("p",{children:"Onayladığınız tüm sözleşmeleri buradan görüntüleyebilirsiniz"})]}),(()=>{const j=c.filter(g=>{const{status:b}=z(g.id,g.version);return b==="accepted"});return j.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("p",{children:"Henüz onaylanmış sözleşme bulunmamaktadır."})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:j.map(g=>{const{status:b,acceptance:o}=z(g.id,g.version);return e.jsxs("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"rgba(16, 185, 129, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:"var(--text-primary)"},children:g.title}),g.type&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Tür: ",g.type]}),g.version&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Versiyon: ",g.version]}),o&&o.acceptedAt&&e.jsxs("p",{style:{margin:"0.25rem 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Onay Tarihi: ",new Date(o.acceptedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("div",{style:{marginLeft:"1rem"},children:e.jsx("span",{style:{padding:"0.5rem 1rem",backgroundColor:"var(--success)",color:"white",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"bold"},children:"✓ Onaylandı"})})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>s(`/sozlesme/${g.id}`),children:"Sözleşmeyi Görüntüle"}),!m(g.type)&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>h(g.id,g.title),style:{backgroundColor:"var(--danger)",color:"white"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="#dc2626"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="var(--danger)"},children:"Sözleşmeyi Feshet"})]})]},g.id)})})})(),e.jsx("div",{className:"legal-footer",children:e.jsx("button",{onClick:()=>s("/profil"),className:"btn btn-secondary",children:"Profilime Dön"})})]})})]})},Tt=()=>{const s=J(),a={"@context":"https://schema.org","@type":"WebPage",name:"404 - Sayfa Bulunamadı | Hiedra Home Collection",description:"Aradığınız sayfa bulunamadı. Ana sayfamıza dönmek için tıklayın.",url:typeof window<"u"?window.location.href:"https://hiedra.com/404"};return e.jsxs("div",{className:"not-found-container",children:[e.jsx(q,{title:"404 - Sayfa Bulunamadı | Hiedra Home Collection",description:"Aradığınız sayfa bulunamadı. Ana sayfamıza dönmek için tıklayın.",keywords:"404, sayfa bulunamadı",url:"/404",structuredData:a,noindex:!0}),e.jsxs("div",{className:"not-found-content",children:[e.jsxs("div",{className:"error-illustration",children:[e.jsx("div",{className:"error-number",children:"404"}),e.jsx("div",{className:"error-icon",children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"currentColor",strokeWidth:"3",opacity:"0.2"}),e.jsx("path",{d:"M40 40L80 80M80 40L40 80",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})]})})]}),e.jsxs("header",{className:"not-found-header",children:[e.jsx("h1",{children:"Sayfa Bulunamadı"}),e.jsxs("p",{className:"not-found-subtitle",children:["Üzgünüz, aradığınız sayfa mevcut değil veya taşınmış olabilir.",e.jsx("br",{}),"Ana sayfaya dönerek istediğiniz sayfayı bulabilirsiniz."]})]}),e.jsxs("div",{className:"not-found-suggestions",children:[e.jsx("h2",{children:"Popüler Sayfalar"}),e.jsxs("div",{className:"suggestions-grid",children:[e.jsxs(O,{to:"/",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"Ana Sayfa"}),e.jsx("p",{children:"Ürün koleksiyonlarımızı keşfedin"})]})]}),e.jsxs(O,{to:"/kategoriler",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"Kategoriler"}),e.jsx("p",{children:"Tüm ürün kategorilerimizi görüntüleyin"})]})]}),e.jsxs(O,{to:"/kuponlar",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"Kuponlar"}),e.jsx("p",{children:"Geçerli indirim kuponlarını görüntüleyin"})]})]}),e.jsxs(O,{to:"/hakkimizda",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"Hakkımızda"}),e.jsx("p",{children:"Hiedra Home Collection hakkında bilgi"})]})]}),e.jsxs(O,{to:"/iletisim",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"İletişim"}),e.jsx("p",{children:"Bize ulaşın, sorularınızı yanıtlayalım"})]})]}),e.jsxs(O,{to:"/sss",className:"suggestion-card",children:[e.jsx("div",{className:"suggestion-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h3",{children:"Sık Sorulan Sorular"}),e.jsx("p",{children:"Merak ettiklerinizin cevapları"})]})]})]})]}),e.jsxs("div",{className:"not-found-actions",children:[e.jsxs(O,{to:"/",className:"btn-primary",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),"Ana Sayfaya Dön"]}),e.jsxs("button",{onClick:()=>s(-1),className:"btn-secondary",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Geri Git"]})]})]})]})},At="http://localhost:8080/api",Ts="hiedra_active_session_id";function Dt(){const s=Fe(),{isAuthenticated:a,accessToken:r}=ie(),t=d.useRef(typeof window<"u"?localStorage.getItem(Ts):null),c=typeof window<"u",l=d.useMemo(()=>{const f=s.pathname||"/",n=s.search||"";return`${f}${n}`},[s.pathname,s.search]),v=d.useCallback(async()=>{var f;if(c)try{const n={sessionId:t.current,currentPage:l,visitorType:a?"USER":"GUEST"},i={"Content-Type":"application/json"};a&&r&&(i.Authorization=`Bearer ${r}`);const k=await fetch(`${At}/visitors/heartbeat`,{method:"POST",headers:i,body:JSON.stringify(n)}).catch(m=>{if(m.name==="TypeError"&&m.message.includes("Failed to fetch"))return null;throw m});if(!k||!k.ok)return;const x=await k.json().catch(()=>null),z=(f=x==null?void 0:x.data)==null?void 0:f.sessionId;z&&z!==t.current&&(t.current=z,localStorage.setItem(Ts,z))}catch(n){console.error("Ziyaretçi heartbeat hatası:",n)}},[r,l,a,c]);return d.useEffect(()=>{v()},[v]),d.useEffect(()=>{if(!c)return;const f=window.setInterval(v,3e5);return()=>window.clearInterval(f)},[v,c]),d.useEffect(()=>{if(!c)return;const f=()=>{document.visibilityState==="visible"&&v()};return document.addEventListener("visibilitychange",f),()=>document.removeEventListener("visibilitychange",f)},[v,c]),null}function It(){return e.jsx(nt,{children:e.jsx(Wa,{children:e.jsx(Da,{children:e.jsx(Ra,{children:e.jsxs(qs,{children:[e.jsx(Dt,{}),e.jsxs("div",{className:"app",children:[e.jsx($a,{}),e.jsx("main",{className:"main-content",role:"main",children:e.jsxs(Gs,{children:[e.jsx(W,{path:"/",element:e.jsx(Oa,{})}),e.jsx(W,{path:"/product/:id",element:e.jsx(Fa,{})}),e.jsx(W,{path:"/kategoriler",element:e.jsx(Ha,{})}),e.jsx(W,{path:"/kategori/:categoryId/:categorySlug",element:e.jsx(Ka,{})}),e.jsx(W,{path:"/category/:categoryName",element:e.jsx(Ua,{})}),e.jsx(W,{path:"/cart",element:e.jsx(_a,{})}),e.jsx(W,{path:"/checkout",element:e.jsx(Va,{})}),e.jsx(W,{path:"/siparis-sorgula",element:e.jsx(Ja,{})}),e.jsx(W,{path:"/siparislerim",element:e.jsx(Xa,{})}),e.jsx(W,{path:"/siparis/:orderNumber",element:e.jsx(Za,{})}),e.jsx(W,{path:"/hakkimizda",element:e.jsx(Qa,{})}),e.jsx(W,{path:"/iletisim",element:e.jsx(et,{})}),e.jsx(W,{path:"/sss",element:e.jsx(st,{})}),e.jsx(W,{path:"/siparis-onayi",element:e.jsx(Ns,{})}),e.jsx(W,{path:"/odeme-basarisiz",element:e.jsx(bs,{})}),e.jsx(W,{path:"/payment/3d-callback",element:e.jsx(tt,{})}),e.jsx(W,{path:"/giris",element:e.jsx(lt,{})}),e.jsx(W,{path:"/profil",element:e.jsx(rt,{})}),e.jsx(W,{path:"/adreslerim",element:e.jsx(ot,{})}),e.jsx(W,{path:"/adres-ekle",element:e.jsx(ct,{})}),e.jsx(W,{path:"/yorumlarim",element:e.jsx(dt,{})}),e.jsx(W,{path:"/kuponlar",element:e.jsx(ht,{})}),e.jsx(W,{path:"/kupon/:id",element:e.jsx(pt,{})}),e.jsx(W,{path:"/sozlesmelerim",element:e.jsx(zt,{})}),e.jsx(W,{path:"/gizlilik-politikasi",element:e.jsx(gt,{})}),e.jsx(W,{path:"/kullanim-kosullari",element:e.jsx(jt,{})}),e.jsx(W,{path:"/kvkk",element:e.jsx(ft,{})}),e.jsx(W,{path:"/mesafeli-satis-sozlesmesi",element:e.jsx(yt,{})}),e.jsx(W,{path:"/iade-degisim",element:e.jsx(vt,{})}),e.jsx(W,{path:"/kargo-teslimat",element:e.jsx(kt,{})}),e.jsx(W,{path:"/kargo-takip",element:e.jsx(Nt,{})}),e.jsx(W,{path:"/cerez-politikasi",element:e.jsx(bt,{})}),e.jsx(W,{path:"/sozlesmeler",element:e.jsx(Ct,{})}),e.jsx(W,{path:"/sozlesme/:id",element:e.jsx(wt,{})}),e.jsx(W,{path:"/payment-success",element:e.jsx(Ns,{})}),e.jsx(W,{path:"/payment-failed",element:e.jsx(bs,{})}),e.jsx(W,{path:"*",element:e.jsx(Tt,{})})]})}),e.jsx(xt,{})]})]})})})})})}Ze.createRoot(document.getElementById("root")).render(e.jsx(oe.StrictMode,{children:e.jsx(Bs,{children:e.jsx(It,{})})}));
